function Ga(c,Y){for(var k=0;k<Y.length;k++){const g=Y[k];if(typeof g!="string"&&!Array.isArray(g)){for(const l0 in g)if(l0!=="default"&&!(l0 in c)){const j=Object.getOwnPropertyDescriptor(g,l0);j&&Object.defineProperty(c,l0,j.get?j:{enumerable:!0,get:()=>g[l0]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}var ce={};function $a(c){return new Int8Array(c)}function Ta(c){return new Int16Array(c)}function wa(c){return new Int32Array(c)}function ya(c){return new Float32Array(c)}function Pa(c){return new Float64Array(c)}function Ia(c){if(c.length==1)return ya(c[0]);var Y=c[0];c=c.slice(1);for(var k=[],g=0;g<Y;g++)k.push(Ia(c));return k}function La(c){if(c.length==1)return wa(c[0]);var Y=c[0];c=c.slice(1);for(var k=[],g=0;g<Y;g++)k.push(La(c));return k}function Na(c){if(c.length==1)return Ta(c[0]);var Y=c[0];c=c.slice(1);for(var k=[],g=0;g<Y;g++)k.push(Na(c));return k}function Va(c){if(c.length==1)return new Array(c[0]);var Y=c[0];c=c.slice(1);for(var k=[],g=0;g<Y;g++)k.push(Va(c));return k}var pa={};pa.fill=function(c,Y,k,g){if(arguments.length==2)for(var l0=0;l0<c.length;l0++)c[l0]=arguments[1];else for(var l0=Y;l0<k;l0++)c[l0]=g};var ie={};ie.arraycopy=function(c,Y,k,g,l0){for(var j=Y+l0;Y<j;)k[g++]=c[Y++]};ie.out={};ie.out.println=function(c){console.log(c)};ie.out.printf=function(){console.log.apply(console,arguments)};var Se={};Se.SQRT2=1.4142135623730951;Se.FAST_LOG10=function(c){return Math.log10(c)};Se.FAST_LOG10_X=function(c,Y){return Math.log10(c)*Y};function q1(c){this.ordinal=c}q1.short_block_allowed=new q1(0);q1.short_block_coupled=new q1(1);q1.short_block_dispensed=new q1(2);q1.short_block_forced=new q1(3);var Ha={};Ha.MAX_VALUE=34028235e31;function I1(c){this.ordinal=c}I1.vbr_off=new I1(0);I1.vbr_mt=new I1(1);I1.vbr_rh=new I1(2);I1.vbr_abr=new I1(3);I1.vbr_mtrh=new I1(4);I1.vbr_default=I1.vbr_mtrh;var Ua=function(c){},W0={System:ie,VbrMode:I1,Float:Ha,ShortBlock:q1,Util:Se,Arrays:pa,new_array_n:Va,new_byte:$a,new_double:Pa,new_float:ya,new_float_n:Ia,new_int:wa,new_int_n:La,new_short:Ta,new_short_n:Na,assert:Ua},Le,ge;function Za(){if(ge)return Le;ge=1;var c=W0,Y=c.System;c.VbrMode,c.Float,c.ShortBlock;var k=c.Util,g=c.Arrays;c.new_array_n,c.new_byte,c.new_double;var l0=c.new_float;c.new_float_n,c.new_int,c.new_int_n,c.assert;var j=t1();function $(){var q=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*k.SQRT2*.5/2384e-9,.017876148*k.SQRT2*.5/2384e-9,.003134727*k.SQRT2*.5/2384e-9,.002457142*k.SQRT2*.5/2384e-9,971317e-9*k.SQRT2*.5/2384e-9,218868e-9*k.SQRT2*.5/2384e-9,101566e-9*k.SQRT2*.5/2384e-9,13828e-9*k.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],r0=12,f0=36,A=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],f=A[j.SHORT_TYPE],C=A[j.SHORT_TYPE],i0=A[j.SHORT_TYPE],Q=A[j.SHORT_TYPE],a0=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function W(u,M,e){for(var i=10,S=M+238-14-286,V=-15;V<0;V++){var N,w,P;N=q[i+-10],w=u[S+-224]*N,P=u[M+224]*N,N=q[i+-9],w+=u[S+-160]*N,P+=u[M+160]*N,N=q[i+-8],w+=u[S+-96]*N,P+=u[M+96]*N,N=q[i+-7],w+=u[S+-32]*N,P+=u[M+32]*N,N=q[i+-6],w+=u[S+32]*N,P+=u[M+-32]*N,N=q[i+-5],w+=u[S+96]*N,P+=u[M+-96]*N,N=q[i+-4],w+=u[S+160]*N,P+=u[M+-160]*N,N=q[i+-3],w+=u[S+224]*N,P+=u[M+-224]*N,N=q[i+-2],w+=u[M+-256]*N,P-=u[S+256]*N,N=q[i+-1],w+=u[M+-192]*N,P-=u[S+192]*N,N=q[i+0],w+=u[M+-128]*N,P-=u[S+128]*N,N=q[i+1],w+=u[M+-64]*N,P-=u[S+64]*N,N=q[i+2],w+=u[M+0]*N,P-=u[S+0]*N,N=q[i+3],w+=u[M+64]*N,P-=u[S+-64]*N,N=q[i+4],w+=u[M+128]*N,P-=u[S+-128]*N,N=q[i+5],w+=u[M+192]*N,P-=u[S+-192]*N,w*=q[i+6],N=P-w,e[30+V*2]=P+w,e[31+V*2]=q[i+7]*N,i+=18,M--,S++}{var w,P,Z,m;P=u[M+-16]*q[i+-10],w=u[M+-32]*q[i+-2],P+=(u[M+-48]-u[M+16])*q[i+-9],w+=u[M+-96]*q[i+-1],P+=(u[M+-80]+u[M+48])*q[i+-8],w+=u[M+-160]*q[i+0],P+=(u[M+-112]-u[M+80])*q[i+-7],w+=u[M+-224]*q[i+1],P+=(u[M+-144]+u[M+112])*q[i+-6],w-=u[M+32]*q[i+2],P+=(u[M+-176]-u[M+144])*q[i+-5],w-=u[M+96]*q[i+3],P+=(u[M+-208]+u[M+176])*q[i+-4],w-=u[M+160]*q[i+4],P+=(u[M+-240]-u[M+208])*q[i+-3],w-=u[M+224],Z=w-P,m=w+P,P=e[14],w=e[15]-P,e[31]=m+P,e[30]=Z+w,e[15]=Z-w,e[14]=m-P}{var r;r=e[28]-e[0],e[0]+=e[28],e[28]=r*q[i+-2*18+7],r=e[29]-e[1],e[1]+=e[29],e[29]=r*q[i+-2*18+7],r=e[26]-e[2],e[2]+=e[26],e[26]=r*q[i+-4*18+7],r=e[27]-e[3],e[3]+=e[27],e[27]=r*q[i+-4*18+7],r=e[24]-e[4],e[4]+=e[24],e[24]=r*q[i+-6*18+7],r=e[25]-e[5],e[5]+=e[25],e[25]=r*q[i+-6*18+7],r=e[22]-e[6],e[6]+=e[22],e[22]=r*k.SQRT2,r=e[23]-e[7],e[7]+=e[23],e[23]=r*k.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],r=e[6],e[6]=e[31]-r,e[31]=e[31]+r,r=e[7],e[7]=e[30]-r,e[30]=e[30]+r,r=e[22],e[22]=e[15]-r,e[15]=e[15]+r,r=e[23],e[23]=e[14]-r,e[14]=e[14]+r,r=e[20]-e[8],e[8]+=e[20],e[20]=r*q[i+-10*18+7],r=e[21]-e[9],e[9]+=e[21],e[21]=r*q[i+-10*18+7],r=e[18]-e[10],e[10]+=e[18],e[18]=r*q[i+-12*18+7],r=e[19]-e[11],e[11]+=e[19],e[19]=r*q[i+-12*18+7],r=e[16]-e[12],e[12]+=e[16],e[16]=r*q[i+-14*18+7],r=e[17]-e[13],e[13]+=e[17],e[17]=r*q[i+-14*18+7],r=-e[20]+e[24],e[20]+=e[24],e[24]=r*q[i+-12*18+7],r=-e[21]+e[25],e[21]+=e[25],e[25]=r*q[i+-12*18+7],r=e[4]-e[8],e[4]+=e[8],e[8]=r*q[i+-12*18+7],r=e[5]-e[9],e[5]+=e[9],e[9]=r*q[i+-12*18+7],r=e[0]-e[12],e[0]+=e[12],e[12]=r*q[i+-4*18+7],r=e[1]-e[13],e[1]+=e[13],e[13]=r*q[i+-4*18+7],r=e[16]-e[28],e[16]+=e[28],e[28]=r*q[i+-4*18+7],r=-e[17]+e[29],e[17]+=e[29],e[29]=r*q[i+-4*18+7],r=k.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=r,r=k.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=r,r=k.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=r-e[18],r=k.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=r-e[19],r=e[2],e[19]-=e[3],e[3]-=r,e[2]=e[31]-r,e[31]+=r,r=e[3],e[11]-=e[19],e[18]-=r,e[3]=e[30]-r,e[30]+=r,r=e[18],e[27]-=e[11],e[19]-=r,e[18]=e[15]-r,e[15]+=r,r=e[19],e[10]-=r,e[19]=e[14]-r,e[14]+=r,r=e[10],e[11]-=r,e[10]=e[23]-r,e[23]+=r,r=e[11],e[26]-=r,e[11]=e[22]-r,e[22]+=r,r=e[26],e[27]-=r,e[26]=e[7]-r,e[7]+=r,r=e[27],e[27]=e[6]-r,e[6]+=r,r=k.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=r,r=k.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=r,r=k.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=r,r=k.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=r,r=-k.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=r-e[8],r=-k.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=r-e[9],r=-k.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=r-e[25],r=-k.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=r-e[24],r=e[24]-e[16],e[24]=r,r=e[20]-r,e[20]=r,r=e[28]-r,e[28]=r,r=e[25]-e[17],e[25]=r,r=e[21]-r,e[21]=r,r=e[29]-r,e[29]=r,r=e[17]-e[1],e[17]=r,r=e[9]-r,e[9]=r,r=e[25]-r,e[25]=r,r=e[5]-r,e[5]=r,r=e[21]-r,e[21]=r,r=e[13]-r,e[13]=r,r=e[29]-r,e[29]=r,r=e[1]-e[0],e[1]=r,r=e[16]-r,e[16]=r,r=e[17]-r,e[17]=r,r=e[8]-r,e[8]=r,r=e[9]-r,e[9]=r,r=e[24]-r,e[24]=r,r=e[25]-r,e[25]=r,r=e[4]-r,e[4]=r,r=e[5]-r,e[5]=r,r=e[20]-r,e[20]=r,r=e[21]-r,e[21]=r,r=e[12]-r,e[12]=r,r=e[13]-r,e[13]=r,r=e[28]-r,e[28]=r,r=e[29]-r,e[29]=r,r=e[0],e[0]+=e[31],e[31]-=r,r=e[1],e[1]+=e[30],e[30]-=r,r=e[16],e[16]+=e[15],e[15]-=r,r=e[17],e[17]+=e[14],e[14]-=r,r=e[8],e[8]+=e[23],e[23]-=r,r=e[9],e[9]+=e[22],e[22]-=r,r=e[24],e[24]+=e[7],e[7]-=r,r=e[25],e[25]+=e[6],e[6]-=r,r=e[4],e[4]+=e[27],e[27]-=r,r=e[5],e[5]+=e[26],e[26]-=r,r=e[20],e[20]+=e[11],e[11]-=r,r=e[21],e[21]+=e[10],e[10]-=r,r=e[12],e[12]+=e[19],e[19]-=r,r=e[13],e[13]+=e[18],e[18]-=r,r=e[28],e[28]+=e[3],e[3]-=r,r=e[29],e[29]+=e[2],e[2]-=r}}function R(u,M){for(var e=0;e<3;e++){var i,S,V,N,w,P;N=u[M+2*3]*A[j.SHORT_TYPE][0]-u[M+5*3],i=u[M+0*3]*A[j.SHORT_TYPE][2]-u[M+3*3],S=N+i,V=N-i,N=u[M+5*3]*A[j.SHORT_TYPE][0]+u[M+2*3],i=u[M+3*3]*A[j.SHORT_TYPE][2]+u[M+0*3],w=N+i,P=-N+i,i=(u[M+1*3]*A[j.SHORT_TYPE][1]-u[M+4*3])*2069978111953089e-26,N=(u[M+4*3]*A[j.SHORT_TYPE][1]+u[M+1*3])*2069978111953089e-26,u[M+3*0]=S*190752519173728e-25+i,u[M+3*5]=-w*190752519173728e-25+N,V=V*.8660254037844387*1907525191737281e-26,w=w*.5*1907525191737281e-26+N,u[M+3*1]=V-w,u[M+3*2]=V+w,S=S*.5*1907525191737281e-26-i,P=P*.8660254037844387*1907525191737281e-26,u[M+3*3]=S+P,u[M+3*4]=S-P,M++}}function h(u,M,e){var i,S;{var V,N,w,P,Z,m,r,d;V=e[17]-e[9],w=e[15]-e[11],P=e[14]-e[12],Z=e[0]+e[8],m=e[1]+e[7],r=e[2]+e[6],d=e[3]+e[5],u[M+17]=Z+r-d-(m-e[4]),S=(Z+r-d)*C[19]+(m-e[4]),i=(V-w-P)*C[18],u[M+5]=i+S,u[M+6]=i-S,N=(e[16]-e[10])*C[18],m=m*C[19]+e[4],i=V*C[12]+N+w*C[13]+P*C[14],S=-Z*C[16]+m-r*C[17]+d*C[15],u[M+1]=i+S,u[M+2]=i-S,i=V*C[13]-N-w*C[14]+P*C[12],S=-Z*C[17]+m-r*C[15]+d*C[16],u[M+9]=i+S,u[M+10]=i-S,i=V*C[14]-N+w*C[12]-P*C[13],S=Z*C[15]-m+r*C[16]-d*C[17],u[M+13]=i+S,u[M+14]=i-S}{var I,p,L,K,B,E,n,s;I=e[8]-e[0],L=e[6]-e[2],K=e[5]-e[3],B=e[17]+e[9],E=e[16]+e[10],n=e[15]+e[11],s=e[14]+e[12],u[M+0]=B+n+s+(E+e[13]),i=(B+n+s)*C[19]-(E+e[13]),S=(I-L+K)*C[18],u[M+11]=i+S,u[M+12]=i-S,p=(e[7]-e[1])*C[18],E=e[13]-E*C[19],i=B*C[15]-E+n*C[16]+s*C[17],S=I*C[14]+p+L*C[12]+K*C[13],u[M+3]=i+S,u[M+4]=i-S,i=-B*C[17]+E-n*C[15]-s*C[16],S=I*C[13]+p-L*C[14]-K*C[12],u[M+7]=i+S,u[M+8]=i-S,i=-B*C[16]+E-n*C[17]-s*C[15],S=I*C[12]-p+L*C[13]-K*C[14],u[M+15]=i+S,u[M+16]=i-S}}this.mdct_sub48=function(u,M,e){for(var i=M,S=286,V=0;V<u.channels_out;V++){for(var N=0;N<u.mode_gr;N++){for(var w,P=u.l3_side.tt[N][V],Z=P.xr,m=0,r=u.sb_sample[V][1-N],d=0,I=0;I<18/2;I++)for(W(i,S,r[d]),W(i,S+32,r[d+1]),d+=2,S+=64,w=1;w<32;w+=2)r[d-1][w]*=-1;for(w=0;w<32;w++,m+=18){var p=P.block_type,L=u.sb_sample[V][N],K=u.sb_sample[V][1-N];if(P.mixed_block_flag!=0&&w<2&&(p=0),u.amp_filter[w]<1e-12)g.fill(Z,m+0,m+18,0);else{if(u.amp_filter[w]<1)for(var I=0;I<18;I++)K[I][a0[w]]*=u.amp_filter[w];if(p==j.SHORT_TYPE){for(var I=-r0/4;I<0;I++){var B=A[j.SHORT_TYPE][I+3];Z[m+I*3+9]=L[9+I][a0[w]]*B-L[8-I][a0[w]],Z[m+I*3+18]=L[14-I][a0[w]]*B+L[15+I][a0[w]],Z[m+I*3+10]=L[15+I][a0[w]]*B-L[14-I][a0[w]],Z[m+I*3+19]=K[2-I][a0[w]]*B+K[3+I][a0[w]],Z[m+I*3+11]=K[3+I][a0[w]]*B-K[2-I][a0[w]],Z[m+I*3+20]=K[8-I][a0[w]]*B+K[9+I][a0[w]]}R(Z,m)}else{for(var E=l0(18),I=-f0/4;I<0;I++){var n,s;n=A[p][I+27]*K[I+9][a0[w]]+A[p][I+36]*K[8-I][a0[w]],s=A[p][I+9]*L[I+9][a0[w]]-A[p][I+18]*L[8-I][a0[w]],E[I+9]=n-s*f[3+I+9],E[I+18]=n*f[3+I+9]+s}h(Z,m,E)}}if(p!=j.SHORT_TYPE&&w!=0)for(var I=7;I>=0;--I){var a,o;a=Z[m+I]*i0[20+I]+Z[m+-1-I]*Q[28+I],o=Z[m+I]*Q[28+I]-Z[m+-1-I]*i0[20+I],Z[m+-1-I]=a,Z[m+I]=o}}}if(i=e,S=286,u.mode_gr==1)for(var O=0;O<18;O++)Y.arraycopy(u.sb_sample[V][1][O],0,u.sb_sample[V][0][O],0,32)}}}return Le=$,Le}var Ne,ea;function Oa(){if(ea)return Ne;ea=1;var c=t1(),Y=W0,k=Y.System;Y.VbrMode,Y.Float,Y.ShortBlock,Y.Util,Y.Arrays,Y.new_array_n,Y.new_byte,Y.new_double;var g=Y.new_float,l0=Y.new_float_n;Y.new_int,Y.new_int_n,Y.assert;function j(){this.l=g(c.SBMAX_l),this.s=l0([c.SBMAX_s,3]);var $=this;this.assign=function(q){k.arraycopy(q.l,0,$.l,0,c.SBMAX_l);for(var r0=0;r0<c.SBMAX_s;r0++)for(var f0=0;f0<3;f0++)$.s[r0][f0]=q.s[r0][f0]}}return Ne=j,Ne}var Ve,aa;function Ka(){if(aa)return Ve;aa=1;var c=Oa();function Y(){this.thm=new c,this.en=new c}return Ve=Y,Ve}function F1(c){var Y=c;this.ordinal=function(){return Y}}F1.STEREO=new F1(0);F1.JOINT_STEREO=new F1(1);F1.DUAL_CHANNEL=new F1(2);F1.MONO=new F1(3);F1.NOT_SET=new F1(4);var _e=F1,pe,ra;function t1(){if(ra)return pe;ra=1;var c=W0,Y=c.System,k=c.VbrMode;c.Float,c.ShortBlock,c.Util,c.Arrays;var g=c.new_array_n;c.new_byte,c.new_double;var l0=c.new_float,j=c.new_float_n,$=c.new_int;c.new_int_n;var q=c.assert;r0.ENCDELAY=576,r0.POSTDELAY=1152,r0.MDCTDELAY=48,r0.FFTOFFSET=224+r0.MDCTDELAY,r0.DECDELAY=528,r0.SBLIMIT=32,r0.CBANDS=64,r0.SBPSY_l=21,r0.SBPSY_s=12,r0.SBMAX_l=22,r0.SBMAX_s=13,r0.PSFB21=6,r0.PSFB12=6,r0.BLKSIZE=1024,r0.HBLKSIZE=r0.BLKSIZE/2+1,r0.BLKSIZE_s=256,r0.HBLKSIZE_s=r0.BLKSIZE_s/2+1,r0.NORM_TYPE=0,r0.START_TYPE=1,r0.SHORT_TYPE=2,r0.STOP_TYPE=3,r0.MPG_MD_LR_LR=0,r0.MPG_MD_LR_I=1,r0.MPG_MD_MS_LR=2,r0.MPG_MD_MS_I=3,r0.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function r0(){var f0=Za(),A=Ka(),f=_e,C=r0.FFTOFFSET,i0=r0.MPG_MD_MS_LR,Q=null;this.psy=null;var a0=null,W=null,R=null;this.setModules=function(i,S,V,N){Q=i,this.psy=S,a0=S,W=N,R=V};var h=new f0;function u(i){var S,V;if(i.ATH.useAdjust==0){i.ATH.adjust=1;return}if(V=i.loudness_sq[0][0],S=i.loudness_sq[1][0],i.channels_out==2?(V+=i.loudness_sq[0][1],S+=i.loudness_sq[1][1]):(V+=V,S+=S),i.mode_gr==2&&(V=Math.max(V,S)),V*=.5,V*=i.ATH.aaSensitivityP,V>.03125)i.ATH.adjust>=1?i.ATH.adjust=1:i.ATH.adjust<i.ATH.adjustLimit&&(i.ATH.adjust=i.ATH.adjustLimit),i.ATH.adjustLimit=1;else{var N=31.98*V+625e-6;i.ATH.adjust>=N?(i.ATH.adjust*=N*.075+.925,i.ATH.adjust<N&&(i.ATH.adjust=N)):i.ATH.adjustLimit>=N?i.ATH.adjust=N:i.ATH.adjust<i.ATH.adjustLimit&&(i.ATH.adjust=i.ATH.adjustLimit),i.ATH.adjustLimit=N}}function M(i){var S,V;for(q(0<=i.bitrate_index&&i.bitrate_index<16),q(0<=i.mode_ext&&i.mode_ext<4),i.bitrate_stereoMode_Hist[i.bitrate_index][4]++,i.bitrate_stereoMode_Hist[15][4]++,i.channels_out==2&&(i.bitrate_stereoMode_Hist[i.bitrate_index][i.mode_ext]++,i.bitrate_stereoMode_Hist[15][i.mode_ext]++),S=0;S<i.mode_gr;++S)for(V=0;V<i.channels_out;++V){var N=i.l3_side.tt[S][V].block_type|0;i.l3_side.tt[S][V].mixed_block_flag!=0&&(N=4),i.bitrate_blockType_Hist[i.bitrate_index][N]++,i.bitrate_blockType_Hist[i.bitrate_index][5]++,i.bitrate_blockType_Hist[15][N]++,i.bitrate_blockType_Hist[15][5]++}}function e(i,S){var V=i.internal_flags,N,w;if(V.lame_encode_frame_init==0){var P,Z,m=l0(2014),r=l0(2014);for(V.lame_encode_frame_init=1,P=0,Z=0;P<286+576*(1+V.mode_gr);++P)P<576*V.mode_gr?(m[P]=0,V.channels_out==2&&(r[P]=0)):(m[P]=S[0][Z],V.channels_out==2&&(r[P]=S[1][Z]),++Z);for(w=0;w<V.mode_gr;w++)for(N=0;N<V.channels_out;N++)V.l3_side.tt[w][N].block_type=r0.SHORT_TYPE;h.mdct_sub48(V,m,r),q(576>=r0.FFTOFFSET),q(V.mf_size>=r0.BLKSIZE+i.framesize-r0.FFTOFFSET),q(V.mf_size>=512+i.framesize-32)}}this.lame_encode_mp3_frame=function(i,S,V,N,w,P){var Z,m=g([2,2]);m[0][0]=new A,m[0][1]=new A,m[1][0]=new A,m[1][1]=new A;var r=g([2,2]);r[0][0]=new A,r[0][1]=new A,r[1][0]=new A,r[1][1]=new A;var d,I=[null,null],p=i.internal_flags,L=j([2,4]),K=[.5,.5],B=[[0,0],[0,0]],E=[[0,0],[0,0]],n,s,a;if(I[0]=S,I[1]=V,p.lame_encode_frame_init==0&&e(i,I),p.padding=0,(p.slot_lag-=p.frac_SpF)<0&&(p.slot_lag+=i.out_samplerate,p.padding=1),p.psymodel!=0){var o,O=[null,null],J=0,D=$(2);for(a=0;a<p.mode_gr;a++){for(s=0;s<p.channels_out;s++)O[s]=I[s],J=576+a*576-r0.FFTOFFSET;if(i.VBR==k.vbr_mtrh||i.VBR==k.vbr_mt?o=a0.L3psycho_anal_vbr(i,O,J,a,m,r,B[a],E[a],L[a],D):o=a0.L3psycho_anal_ns(i,O,J,a,m,r,B[a],E[a],L[a],D),o!=0)return-4;for(i.mode==f.JOINT_STEREO&&(K[a]=L[a][2]+L[a][3],K[a]>0&&(K[a]=L[a][3]/K[a])),s=0;s<p.channels_out;s++){var y=p.l3_side.tt[a][s];y.block_type=D[s],y.mixed_block_flag=0}}}else for(a=0;a<p.mode_gr;a++)for(s=0;s<p.channels_out;s++)p.l3_side.tt[a][s].block_type=r0.NORM_TYPE,p.l3_side.tt[a][s].mixed_block_flag=0,E[a][s]=B[a][s]=700;if(u(p),h.mdct_sub48(p,I[0],I[1]),p.mode_ext=r0.MPG_MD_LR_LR,i.force_ms)p.mode_ext=r0.MPG_MD_MS_LR;else if(i.mode==f.JOINT_STEREO){var z=0,_0=0;for(a=0;a<p.mode_gr;a++)for(s=0;s<p.channels_out;s++)z+=E[a][s],_0+=B[a][s];if(z<=1*_0){var m0=p.l3_side.tt[0],y0=p.l3_side.tt[p.mode_gr-1];m0[0].block_type==m0[1].block_type&&y0[0].block_type==y0[1].block_type&&(p.mode_ext=r0.MPG_MD_MS_LR)}}if(p.mode_ext==i0?(d=r,n=E):(d=m,n=B),i.analysis&&p.pinfo!=null)for(a=0;a<p.mode_gr;a++)for(s=0;s<p.channels_out;s++)p.pinfo.ms_ratio[a]=p.ms_ratio[a],p.pinfo.ms_ener_ratio[a]=K[a],p.pinfo.blocktype[a][s]=p.l3_side.tt[a][s].block_type,p.pinfo.pe[a][s]=n[a][s],Y.arraycopy(p.l3_side.tt[a][s].xr,0,p.pinfo.xr[a][s],0,576),p.mode_ext==i0&&(p.pinfo.ers[a][s]=p.pinfo.ers[a][s+2],Y.arraycopy(p.pinfo.energy[a][s+2],0,p.pinfo.energy[a][s],0,p.pinfo.energy[a][s].length));if(i.VBR==k.vbr_off||i.VBR==k.vbr_abr){var A0,d0;for(A0=0;A0<18;A0++)p.nsPsy.pefirbuf[A0]=p.nsPsy.pefirbuf[A0+1];for(d0=0,a=0;a<p.mode_gr;a++)for(s=0;s<p.channels_out;s++)d0+=n[a][s];for(p.nsPsy.pefirbuf[18]=d0,d0=p.nsPsy.pefirbuf[9],A0=0;A0<9;A0++)d0+=(p.nsPsy.pefirbuf[A0]+p.nsPsy.pefirbuf[18-A0])*r0.fircoef[A0];for(d0=670*5*p.mode_gr*p.channels_out/d0,a=0;a<p.mode_gr;a++)for(s=0;s<p.channels_out;s++)n[a][s]*=d0}if(p.iteration_loop.iteration_loop(i,n,K,d),Q.format_bitstream(i),Z=Q.copy_buffer(p,N,w,P,1),i.bWriteVbrTag&&W.addVbrFrame(i),i.analysis&&p.pinfo!=null){for(s=0;s<p.channels_out;s++){var I0;for(I0=0;I0<C;I0++)p.pinfo.pcmdata[s][I0]=p.pinfo.pcmdata[s][I0+i.framesize];for(I0=C;I0<1600;I0++)p.pinfo.pcmdata[s][I0]=I[s][I0-C]}R.set_frame_pinfo(i,d)}return M(p),Z}}return pe=r0,pe}var v1=W0;v1.System;v1.VbrMode;v1.Float;v1.ShortBlock;var ta=v1.Util;v1.Arrays;v1.new_array_n;v1.new_byte;v1.new_double;var na=v1.new_float;v1.new_float_n;v1.new_int;v1.new_int_n;v1.assert;var J0=t1();function Qa(){var c=na(J0.BLKSIZE),Y=na(J0.BLKSIZE_s/2),k=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function g(j,$,q){var r0=0,f0,A,f;q<<=1;var C=$+q;f0=4;do{var i0,Q,a0,W,R,h,u;u=f0>>1,W=f0,R=f0<<1,h=R+W,f0=R<<1,A=$,f=A+u;do{var M,e,i,S;e=j[A+0]-j[A+W],M=j[A+0]+j[A+W],S=j[A+R]-j[A+h],i=j[A+R]+j[A+h],j[A+R]=M-i,j[A+0]=M+i,j[A+h]=e-S,j[A+W]=e+S,e=j[f+0]-j[f+W],M=j[f+0]+j[f+W],S=ta.SQRT2*j[f+h],i=ta.SQRT2*j[f+R],j[f+R]=M-i,j[f+0]=M+i,j[f+h]=e-S,j[f+W]=e+S,f+=f0,A+=f0}while(A<C);for(Q=k[r0+0],i0=k[r0+1],a0=1;a0<u;a0++){var V,N;V=1-2*i0*i0,N=2*i0*Q,A=$+a0,f=$+W-a0;do{var w,P,Z,M,e,m,i,r,S,d;P=N*j[A+W]-V*j[f+W],w=V*j[A+W]+N*j[f+W],e=j[A+0]-w,M=j[A+0]+w,m=j[f+0]-P,Z=j[f+0]+P,P=N*j[A+h]-V*j[f+h],w=V*j[A+h]+N*j[f+h],S=j[A+R]-w,i=j[A+R]+w,d=j[f+R]-P,r=j[f+R]+P,P=i0*i-Q*d,w=Q*i+i0*d,j[A+R]=M-w,j[A+0]=M+w,j[f+h]=m-P,j[f+W]=m+P,P=Q*r-i0*S,w=i0*r+Q*S,j[f+R]=Z-w,j[f+0]=Z+w,j[A+h]=e-P,j[A+W]=e+P,f+=f0,A+=f0}while(A<C);V=Q,Q=V*k[r0+0]-i0*k[r0+1],i0=V*k[r0+1]+i0*k[r0+0]}r0+=2}while(f0<q)}var l0=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(j,$,q,r0,f0){for(var A=0;A<3;A++){var f=J0.BLKSIZE_s/2,C=65535&576/3*(A+1),i0=J0.BLKSIZE_s/8-1;do{var Q,a0,W,R,h,u=l0[i0<<2]&255;Q=Y[u]*r0[q][f0+u+C],h=Y[127-u]*r0[q][f0+u+C+128],a0=Q-h,Q=Q+h,W=Y[u+64]*r0[q][f0+u+C+64],h=Y[63-u]*r0[q][f0+u+C+192],R=W-h,W=W+h,f-=4,$[A][f+0]=Q+W,$[A][f+2]=Q-W,$[A][f+1]=a0+R,$[A][f+3]=a0-R,Q=Y[u+1]*r0[q][f0+u+C+1],h=Y[126-u]*r0[q][f0+u+C+129],a0=Q-h,Q=Q+h,W=Y[u+65]*r0[q][f0+u+C+65],h=Y[62-u]*r0[q][f0+u+C+193],R=W-h,W=W+h,$[A][f+J0.BLKSIZE_s/2+0]=Q+W,$[A][f+J0.BLKSIZE_s/2+2]=Q-W,$[A][f+J0.BLKSIZE_s/2+1]=a0+R,$[A][f+J0.BLKSIZE_s/2+3]=a0-R}while(--i0>=0);g($[A],f,J0.BLKSIZE_s/2)}},this.fft_long=function(j,$,q,r0,f0){var A=J0.BLKSIZE/8-1,f=J0.BLKSIZE/2;do{var C,i0,Q,a0,W,R=l0[A]&255;C=c[R]*r0[q][f0+R],W=c[R+512]*r0[q][f0+R+512],i0=C-W,C=C+W,Q=c[R+256]*r0[q][f0+R+256],W=c[R+768]*r0[q][f0+R+768],a0=Q-W,Q=Q+W,f-=4,$[f+0]=C+Q,$[f+2]=C-Q,$[f+1]=i0+a0,$[f+3]=i0-a0,C=c[R+1]*r0[q][f0+R+1],W=c[R+513]*r0[q][f0+R+513],i0=C-W,C=C+W,Q=c[R+257]*r0[q][f0+R+257],W=c[R+769]*r0[q][f0+R+769],a0=Q-W,Q=Q+W,$[f+J0.BLKSIZE/2+0]=C+Q,$[f+J0.BLKSIZE/2+2]=C-Q,$[f+J0.BLKSIZE/2+1]=i0+a0,$[f+J0.BLKSIZE/2+3]=i0-a0}while(--A>=0);g($,f,J0.BLKSIZE/2)},this.init_fft=function(j){for(var $=0;$<J0.BLKSIZE;$++)c[$]=.42-.5*Math.cos(2*Math.PI*($+.5)/J0.BLKSIZE)+.08*Math.cos(4*Math.PI*($+.5)/J0.BLKSIZE);for(var $=0;$<J0.BLKSIZE_s/2;$++)Y[$]=.5*(1-Math.cos(2*Math.PI*($+.5)/J0.BLKSIZE_s))}}var Wa=Qa,h1=W0;h1.System;var j1=h1.VbrMode,sa=h1.Float,z1=h1.ShortBlock,_1=h1.Util,ja=h1.Arrays;h1.new_array_n;h1.new_byte;h1.new_double;var g0=h1.new_float,L1=h1.new_float_n,P1=h1.new_int;h1.new_int_n;var R0=h1.assert,za=Wa,s0=t1();function Ja(){var c=_e,Y=new za,k=2.302585092994046,g=2,l0=16,j=2,$=16,q=.34,r0=1/(14752*14752)/(s0.BLKSIZE/2),f0=.01,A=.8,f=.6,C=.3,i0=3.5,Q=21,a0=.2302585093;function W(l){return l}function R(l,v){for(var x=0,T=0;T<s0.BLKSIZE/2;++T)x+=l[T]*v.ATH.eql_w[T];return x*=r0,x}function h(l,v,x,T,X,b,H,G,F,t0,U){var n0=l.internal_flags;if(F<2)Y.fft_long(n0,T[X],F,t0,U),Y.fft_short(n0,b[H],F,t0,U);else if(F==2){for(var b0=s0.BLKSIZE-1;b0>=0;--b0){var V0=T[X+0][b0],v0=T[X+1][b0];T[X+0][b0]=(V0+v0)*_1.SQRT2*.5,T[X+1][b0]=(V0-v0)*_1.SQRT2*.5}for(var N0=2;N0>=0;--N0)for(var b0=s0.BLKSIZE_s-1;b0>=0;--b0){var V0=b[H+0][N0][b0],v0=b[H+1][N0][b0];b[H+0][N0][b0]=(V0+v0)*_1.SQRT2*.5,b[H+1][N0][b0]=(V0-v0)*_1.SQRT2*.5}}v[0]=T[X+0][0],v[0]*=v[0];for(var b0=s0.BLKSIZE/2-1;b0>=0;--b0){var e0=T[X+0][s0.BLKSIZE/2-b0],x0=T[X+0][s0.BLKSIZE/2+b0];v[s0.BLKSIZE/2-b0]=(e0*e0+x0*x0)*.5}for(var N0=2;N0>=0;--N0){x[N0][0]=b[H+0][N0][0],x[N0][0]*=x[N0][0];for(var b0=s0.BLKSIZE_s/2-1;b0>=0;--b0){var e0=b[H+0][N0][s0.BLKSIZE_s/2-b0],x0=b[H+0][N0][s0.BLKSIZE_s/2+b0];x[N0][s0.BLKSIZE_s/2-b0]=(e0*e0+x0*x0)*.5}}{for(var k0=0,b0=11;b0<s0.HBLKSIZE;b0++)k0+=v[b0];n0.tot_ener[F]=k0}if(l.analysis){for(var b0=0;b0<s0.HBLKSIZE;b0++)n0.pinfo.energy[G][F][b0]=n0.pinfo.energy_save[F][b0],n0.pinfo.energy_save[F][b0]=v[b0];n0.pinfo.pe[G][F]=n0.pe[F]}l.athaa_loudapprox==2&&F<2&&(n0.loudness_sq[G][F]=n0.loudness_sq_save[F],n0.loudness_sq_save[F]=R(v,n0))}var u=8,M=23,e=15,i,S,V,N=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function w(){i=Math.pow(10,(u+1)/16),S=Math.pow(10,(M+1)/16),V=Math.pow(10,e/10)}var P=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],Z=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],m=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function r(l,v,x,T,X,b){var H;if(v>l)if(v<l*S)H=v/l;else return l+v;else{if(l>=v*S)return l+v;H=l/v}if(R0(l>=0),R0(v>=0),l+=v,T+3<=6){if(H>=i)return l;var G=0|_1.FAST_LOG10_X(H,16);return l*Z[G]}var G=0|_1.FAST_LOG10_X(H,16);if(b!=0?v=X.ATH.cb_s[x]*X.ATH.adjust:v=X.ATH.cb_l[x]*X.ATH.adjust,R0(v>=0),l<V*v){if(l>v){var F,t0;return F=1,G<=13&&(F=m[G]),t0=_1.FAST_LOG10_X(l/v,10/15),l*((P[G]-F)*t0+F)}return G>13?l:l*m[G]}return l*P[G]}var d=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function I(l,v,x){var T;if(l<0&&(l=0),v<0&&(v=0),l<=0)return v;if(v<=0)return l;if(v>l?T=v/l:T=l/v,-2<=x&&x<=2){if(T>=i)return l+v;var X=0|_1.FAST_LOG10_X(T,16);return(l+v)*d[X]}return T<S?l+v:(l<v&&(l=v),l)}function p(l,v){var x=l.internal_flags;if(x.channels_out>1){for(var T=0;T<s0.SBMAX_l;T++){var X=x.thm[0].l[T],b=x.thm[1].l[T];x.thm[0].l[T]+=b*v,x.thm[1].l[T]+=X*v}for(var T=0;T<s0.SBMAX_s;T++)for(var H=0;H<3;H++){var X=x.thm[0].s[T][H],b=x.thm[1].s[T][H];x.thm[0].s[T][H]+=b*v,x.thm[1].s[T][H]+=X*v}}}function L(l){for(var v=0;v<s0.SBMAX_l;v++)if(!(l.thm[0].l[v]>1.58*l.thm[1].l[v]||l.thm[1].l[v]>1.58*l.thm[0].l[v])){var x=l.mld_l[v]*l.en[3].l[v],T=Math.max(l.thm[2].l[v],Math.min(l.thm[3].l[v],x));x=l.mld_l[v]*l.en[2].l[v];var X=Math.max(l.thm[3].l[v],Math.min(l.thm[2].l[v],x));l.thm[2].l[v]=T,l.thm[3].l[v]=X}for(var v=0;v<s0.SBMAX_s;v++)for(var b=0;b<3;b++)if(!(l.thm[0].s[v][b]>1.58*l.thm[1].s[v][b]||l.thm[1].s[v][b]>1.58*l.thm[0].s[v][b])){var x=l.mld_s[v]*l.en[3].s[v][b],T=Math.max(l.thm[2].s[v][b],Math.min(l.thm[3].s[v][b],x));x=l.mld_s[v]*l.en[2].s[v][b];var X=Math.max(l.thm[3].s[v][b],Math.min(l.thm[2].s[v][b],x));l.thm[2].s[v][b]=T,l.thm[3].s[v][b]=X}}function K(l,v,x){var T=v,X=Math.pow(10,x);v*=2,T*=2;for(var b=0;b<s0.SBMAX_l;b++){var H,G,F,t0;if(t0=l.ATH.cb_l[l.bm_l[b]]*X,H=Math.min(Math.max(l.thm[0].l[b],t0),Math.max(l.thm[1].l[b],t0)),G=Math.max(l.thm[2].l[b],t0),F=Math.max(l.thm[3].l[b],t0),H*v<G+F){var U=H*T/(G+F);G*=U,F*=U,R0(G+F>0)}l.thm[2].l[b]=Math.min(G,l.thm[2].l[b]),l.thm[3].l[b]=Math.min(F,l.thm[3].l[b])}X*=s0.BLKSIZE_s/s0.BLKSIZE;for(var b=0;b<s0.SBMAX_s;b++)for(var n0=0;n0<3;n0++){var H,G,F,t0;if(t0=l.ATH.cb_s[l.bm_s[b]]*X,H=Math.min(Math.max(l.thm[0].s[b][n0],t0),Math.max(l.thm[1].s[b][n0],t0)),G=Math.max(l.thm[2].s[b][n0],t0),F=Math.max(l.thm[3].s[b][n0],t0),H*v<G+F){var U=H*v/(G+F);G*=U,F*=U,R0(G+F>0)}l.thm[2].s[b][n0]=Math.min(l.thm[2].s[b][n0],G),l.thm[3].s[b][n0]=Math.min(l.thm[3].s[b][n0],F)}}function B(l,v,x,T,X){var b,H,G=0,F=0;for(b=H=0;b<s0.SBMAX_s;++H,++b){for(var t0=l.bo_s[b],U=l.npart_s,n0=t0<U?t0:U;H<n0;)R0(v[H]>=0),R0(x[H]>=0),G+=v[H],F+=x[H],H++;if(l.en[T].s[b][X]=G,l.thm[T].s[b][X]=F,H>=U){++b;break}R0(v[H]>=0),R0(x[H]>=0);{var b0=l.PSY.bo_s_weight[b],V0=1-b0;G=b0*v[H],F=b0*x[H],l.en[T].s[b][X]+=G,l.thm[T].s[b][X]+=F,G=V0*v[H],F=V0*x[H]}}for(;b<s0.SBMAX_s;++b)l.en[T].s[b][X]=0,l.thm[T].s[b][X]=0}function E(l,v,x,T){var X,b,H=0,G=0;for(X=b=0;X<s0.SBMAX_l;++b,++X){for(var F=l.bo_l[X],t0=l.npart_l,U=F<t0?F:t0;b<U;)R0(v[b]>=0),R0(x[b]>=0),H+=v[b],G+=x[b],b++;if(l.en[T].l[X]=H,l.thm[T].l[X]=G,b>=t0){++X;break}R0(v[b]>=0),R0(x[b]>=0);{var n0=l.PSY.bo_l_weight[X],b0=1-n0;H=n0*v[b],G=n0*x[b],l.en[T].l[X]+=H,l.thm[T].l[X]+=G,H=b0*v[b],G=b0*x[b]}}for(;X<s0.SBMAX_l;++X)l.en[T].l[X]=0,l.thm[T].l[X]=0}function n(l,v,x,T,X,b){var H=l.internal_flags,G,F;for(F=G=0;F<H.npart_s;++F){for(var t0=0,U=H.numlines_s[F],n0=0;n0<U;++n0,++G){var b0=v[b][G];t0+=b0}x[F]=t0}for(R0(F==H.npart_s),R0(G==129),G=F=0;F<H.npart_s;F++){var V0=H.s3ind_s[F][0],v0=H.s3_ss[G++]*x[V0];for(++V0;V0<=H.s3ind_s[F][1];)v0+=H.s3_ss[G]*x[V0],++G,++V0;{var N0=j*H.nb_s1[X][F];T[F]=Math.min(v0,N0)}if(H.blocktype_old[X&1]==s0.SHORT_TYPE){var N0=$*H.nb_s2[X][F],e0=T[F];T[F]=Math.min(N0,e0)}H.nb_s2[X][F]=H.nb_s1[X][F],H.nb_s1[X][F]=v0,R0(T[F]>=0)}for(;F<=s0.CBANDS;++F)x[F]=0,T[F]=0}function s(l,v,x,T){var X=l.internal_flags;l.short_blocks==z1.short_block_coupled&&!(v[0]!=0&&v[1]!=0)&&(v[0]=v[1]=0);for(var b=0;b<X.channels_out;b++)T[b]=s0.NORM_TYPE,l.short_blocks==z1.short_block_dispensed&&(v[b]=1),l.short_blocks==z1.short_block_forced&&(v[b]=0),v[b]!=0?(R0(X.blocktype_old[b]!=s0.START_TYPE),X.blocktype_old[b]==s0.SHORT_TYPE&&(T[b]=s0.STOP_TYPE)):(T[b]=s0.SHORT_TYPE,X.blocktype_old[b]==s0.NORM_TYPE&&(X.blocktype_old[b]=s0.START_TYPE),X.blocktype_old[b]==s0.STOP_TYPE&&(X.blocktype_old[b]=s0.SHORT_TYPE)),x[b]=X.blocktype_old[b],X.blocktype_old[b]=T[b]}function a(l,v,x){return x>=1?l:x<=0?v:v>0?Math.pow(l/v,x)*v:0}var o=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function O(l,v){for(var x=309.07,T=0;T<s0.SBMAX_s-1;T++)for(var X=0;X<3;X++){var b=l.thm.s[T][X];if(R0(T<o.length),b>0){var H=b*v,G=l.en.s[T][X];G>H&&(G>H*1e10?x+=o[T]*(10*k):(R0(H>0),x+=o[T]*_1.FAST_LOG10(G/H)))}}return x}var J=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function D(l,v){for(var x=281.0575,T=0;T<s0.SBMAX_l-1;T++){var X=l.thm.l[T];if(R0(T<J.length),X>0){var b=X*v,H=l.en.l[T];H>b&&(H>b*1e10?x+=J[T]*(10*k):(R0(b>0),x+=J[T]*_1.FAST_LOG10(H/b)))}}return x}function y(l,v,x,T,X){var b,H;for(b=H=0;b<l.npart_l;++b){var G=0,F=0,t0;for(t0=0;t0<l.numlines_l[b];++t0,++H){var U=v[H];R0(U>=0),G+=U,F<U&&(F=U)}x[b]=G,T[b]=F,X[b]=G*l.rnumlines_l[b],R0(l.rnumlines_l[b]>=0),R0(G>=0),R0(x[b]>=0),R0(T[b]>=0),R0(X[b]>=0)}}function z(l,v,x,T){var X=N.length-1,b=0,H=x[b]+x[b+1];if(R0(H>=0),H>0){var G=v[b];G<v[b+1]&&(G=v[b+1]),R0(l.numlines_l[b]+l.numlines_l[b+1]-1>0),H=20*(G*2-H)/(H*(l.numlines_l[b]+l.numlines_l[b+1]-1));var F=0|H;F>X&&(F=X),T[b]=F}else T[b]=0;for(b=1;b<l.npart_l-1;b++)if(H=x[b-1]+x[b]+x[b+1],R0(H>=0),H>0){var G=v[b-1];G<v[b]&&(G=v[b]),G<v[b+1]&&(G=v[b+1]),R0(l.numlines_l[b-1]+l.numlines_l[b]+l.numlines_l[b+1]-1>0),H=20*(G*3-H)/(H*(l.numlines_l[b-1]+l.numlines_l[b]+l.numlines_l[b+1]-1));var F=0|H;F>X&&(F=X),T[b]=F}else T[b]=0;if(R0(b>0),R0(b==l.npart_l-1),H=x[b-1]+x[b],R0(H>=0),H>0){var G=v[b-1];G<v[b]&&(G=v[b]),R0(l.numlines_l[b-1]+l.numlines_l[b]-1>0),H=20*(G*2-H)/(H*(l.numlines_l[b-1]+l.numlines_l[b]-1));var F=0|H;F>X&&(F=X),T[b]=F}else T[b]=0;R0(b==l.npart_l-1)}var _0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(l,v,x,T,X,b,H,G,F,t0){var U=l.internal_flags,n0=L1([2,s0.BLKSIZE]),b0=L1([2,3,s0.BLKSIZE_s]),V0=g0(s0.CBANDS+1),v0=g0(s0.CBANDS+1),N0=g0(s0.CBANDS+2),e0=P1(2),x0=P1(2),k0,h0,B0,o0,p0,P0,S0,C0,X0=L1([2,576]),K0,T1=P1(s0.CBANDS+2),z0=P1(s0.CBANDS+2);for(ja.fill(z0,0),k0=U.channels_out,l.mode==c.JOINT_STEREO&&(k0=4),l.VBR==j1.vbr_off?K0=U.ResvMax==0?0:U.ResvSize/U.ResvMax*.5:l.VBR==j1.vbr_rh||l.VBR==j1.vbr_mtrh||l.VBR==j1.vbr_mt?K0=.6:K0=1,h0=0;h0<U.channels_out;h0++){var U0=v[h0],s1=x+576-350-Q+192;for(R0(_0.length==(Q-1)/2),o0=0;o0<576;o0++){var w1,y1;for(w1=U0[s1+o0+10],y1=0,p0=0;p0<(Q-1)/2-1;p0+=2)w1+=_0[p0]*(U0[s1+o0+p0]+U0[s1+o0+Q-p0]),y1+=_0[p0+1]*(U0[s1+o0+p0+1]+U0[s1+o0+Q-p0-1]);X0[h0][o0]=w1+y1}X[T][h0].en.assign(U.en[h0]),X[T][h0].thm.assign(U.thm[h0]),k0>2&&(b[T][h0].en.assign(U.en[h0+2]),b[T][h0].thm.assign(U.thm[h0+2]))}for(h0=0;h0<k0;h0++){var p1,H1,r1=g0(12),k1=[0,0,0,0],W1=g0(12),Re=1,Ke,Qe=g0(s0.CBANDS),We=g0(s0.CBANDS),Q0=[0,0,0,0],je=g0(s0.HBLKSIZE),ze=L1([3,s0.HBLKSIZE_s]);for(R0(U.npart_s<=s0.CBANDS),R0(U.npart_l<=s0.CBANDS),o0=0;o0<3;o0++)r1[o0]=U.nsPsy.last_en_subshort[h0][o0+6],R0(U.nsPsy.last_en_subshort[h0][o0+4]>0),W1[o0]=r1[o0]/U.nsPsy.last_en_subshort[h0][o0+4],k1[0]+=r1[o0];if(h0==2)for(o0=0;o0<576;o0++){var xe,Ee;xe=X0[0][o0],Ee=X0[1][o0],X0[0][o0]=xe+Ee,X0[1][o0]=xe-Ee}{var Je=X0[h0&1],ee=0;for(o0=0;o0<9;o0++){for(var Da=ee+64,a1=1;ee<Da;ee++)a1<Math.abs(Je[ee])&&(a1=Math.abs(Je[ee]));U.nsPsy.last_en_subshort[h0][o0]=r1[o0+3]=a1,k1[1+o0/3]+=a1,a1>r1[o0+3-2]?(R0(r1[o0+3-2]>0),a1=a1/r1[o0+3-2]):r1[o0+3-2]>a1*10?(R0(a1>0),a1=r1[o0+3-2]/(a1*10)):a1=0,W1[o0+3]=a1}}if(l.analysis){var Be=W1[0];for(o0=1;o0<12;o0++)Be<W1[o0]&&(Be=W1[o0]);U.pinfo.ers[T][h0]=U.pinfo.ers_save[h0],U.pinfo.ers_save[h0]=Be}for(Ke=h0==3?U.nsPsy.attackthre_s:U.nsPsy.attackthre,o0=0;o0<12;o0++)Q0[o0/3]==0&&W1[o0]>Ke&&(Q0[o0/3]=o0%3+1);for(o0=1;o0<4;o0++){var Te;k1[o0-1]>k1[o0]?(R0(k1[o0]>0),Te=k1[o0-1]/k1[o0]):(R0(k1[o0-1]>0),Te=k1[o0]/k1[o0-1]),Te<1.7&&(Q0[o0]=0,o0==1&&(Q0[0]=0))}for(Q0[0]!=0&&U.nsPsy.lastAttacks[h0]!=0&&(Q0[0]=0),(U.nsPsy.lastAttacks[h0]==3||Q0[0]+Q0[1]+Q0[2]+Q0[3]!=0)&&(Re=0,Q0[1]!=0&&Q0[0]!=0&&(Q0[1]=0),Q0[2]!=0&&Q0[1]!=0&&(Q0[2]=0),Q0[3]!=0&&Q0[2]!=0&&(Q0[3]=0)),h0<2?x0[h0]=Re:Re==0&&(x0[0]=x0[1]=0),F[h0]=U.tot_ener[h0],H1=b0,p1=n0,h(l,je,ze,p1,h0&1,H1,h0&1,T,h0,v,x),y(U,je,V0,Qe,We),z(U,Qe,We,T1),C0=0;C0<3;C0++){var we,i1;for(n(l,ze,v0,N0,h0,C0),B(U,v0,N0,h0,C0),S0=0;S0<s0.SBMAX_s;S0++){if(i1=U.thm[h0].s[S0][C0],i1*=A,Q0[C0]>=2||Q0[C0+1]==1){var ae=C0!=0?C0-1:2,a1=a(U.thm[h0].s[S0][ae],i1,f*K0);i1=Math.min(i1,a1)}if(Q0[C0]==1){var ae=C0!=0?C0-1:2,a1=a(U.thm[h0].s[S0][ae],i1,C*K0);i1=Math.min(i1,a1)}else if(C0!=0&&Q0[C0-1]==3||C0==0&&U.nsPsy.lastAttacks[h0]==3){var ae=C0!=2?C0+1:0,a1=a(U.thm[h0].s[S0][ae],i1,C*K0);i1=Math.min(i1,a1)}we=r1[C0*3+3]+r1[C0*3+4]+r1[C0*3+5],r1[C0*3+5]*6<we&&(i1*=.5,r1[C0*3+4]*6<we&&(i1*=.5)),U.thm[h0].s[S0][C0]=i1}}for(U.nsPsy.lastAttacks[h0]=Q0[2],P0=0,B0=0;B0<U.npart_l;B0++){for(var G1=U.s3ind[B0][0],ye=V0[G1]*N[T1[G1]],$1=U.s3_ll[P0++]*ye;++G1<=U.s3ind[B0][1];)ye=V0[G1]*N[T1[G1]],$1=r($1,U.s3_ll[P0++]*ye,G1,G1-B0,U,0);$1*=.158489319246111,U.blocktype_old[h0&1]==s0.SHORT_TYPE?N0[B0]=$1:N0[B0]=a(Math.min($1,Math.min(g*U.nb_1[h0][B0],l0*U.nb_2[h0][B0])),$1,K0),U.nb_2[h0][B0]=U.nb_1[h0][B0],U.nb_1[h0][B0]=$1}for(;B0<=s0.CBANDS;++B0)V0[B0]=0,N0[B0]=0;E(U,V0,N0,h0)}if((l.mode==c.STEREO||l.mode==c.JOINT_STEREO)&&l.interChRatio>0&&p(l,l.interChRatio),l.mode==c.JOINT_STEREO){var Ie;L(U),Ie=l.msfix,Math.abs(Ie)>0&&K(U,Ie,l.ATHlower*U.ATH.adjust)}for(s(l,x0,t0,e0),h0=0;h0<k0;h0++){var re,te=0,le,oe;h0>1?(re=G,te=-2,le=s0.NORM_TYPE,(t0[0]==s0.SHORT_TYPE||t0[1]==s0.SHORT_TYPE)&&(le=s0.SHORT_TYPE),oe=b[T][h0-2]):(re=H,te=0,le=t0[h0],oe=X[T][h0]),le==s0.SHORT_TYPE?re[te+h0]=O(oe,U.masking_lower):re[te+h0]=D(oe,U.masking_lower),l.analysis&&(U.pinfo.pe[T][h0]=re[te+h0])}return 0};function m0(l,v,x,T,X,b,H,G){var F=l.internal_flags;if(T<2)Y.fft_long(F,H[G],T,v,x);else if(T==2)for(var t0=s0.BLKSIZE-1;t0>=0;--t0){var U=H[G+0][t0],n0=H[G+1][t0];H[G+0][t0]=(U+n0)*_1.SQRT2*.5,H[G+1][t0]=(U-n0)*_1.SQRT2*.5}b[0]=H[G+0][0],b[0]*=b[0];for(var t0=s0.BLKSIZE/2-1;t0>=0;--t0){var b0=H[G+0][s0.BLKSIZE/2-t0],V0=H[G+0][s0.BLKSIZE/2+t0];b[s0.BLKSIZE/2-t0]=(b0*b0+V0*V0)*.5}{for(var v0=0,t0=11;t0<s0.HBLKSIZE;t0++)v0+=b[t0];F.tot_ener[T]=v0}if(l.analysis){for(var t0=0;t0<s0.HBLKSIZE;t0++)F.pinfo.energy[X][T][t0]=F.pinfo.energy_save[T][t0],F.pinfo.energy_save[T][t0]=b[t0];F.pinfo.pe[X][T]=F.pe[T]}}function y0(l,v,x,T,X,b,H,G){var F=l.internal_flags;if(X==0&&T<2&&Y.fft_short(F,H[G],T,v,x),T==2)for(var t0=s0.BLKSIZE_s-1;t0>=0;--t0){var U=H[G+0][X][t0],n0=H[G+1][X][t0];H[G+0][X][t0]=(U+n0)*_1.SQRT2*.5,H[G+1][X][t0]=(U-n0)*_1.SQRT2*.5}b[X][0]=H[G+0][X][0],b[X][0]*=b[X][0];for(var t0=s0.BLKSIZE_s/2-1;t0>=0;--t0){var b0=H[G+0][X][s0.BLKSIZE_s/2-t0],V0=H[G+0][X][s0.BLKSIZE_s/2+t0];b[X][s0.BLKSIZE_s/2-t0]=(b0*b0+V0*V0)*.5}}function A0(l,v,x,T){var X=l.internal_flags;l.athaa_loudapprox==2&&x<2&&(X.loudness_sq[v][x]=X.loudness_sq_save[x],X.loudness_sq_save[x]=R(T,X))}var d0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function I0(l,v,x,T,X,b,H,G,F,t0){for(var U=L1([2,576]),n0=l.internal_flags,b0=n0.channels_out,V0=l.mode==c.JOINT_STEREO?4:b0,v0=0;v0<b0;v0++){firbuf=v[v0];var N0=x+576-350-Q+192;R0(d0.length==(Q-1)/2);for(var e0=0;e0<576;e0++){var x0,k0;x0=firbuf[N0+e0+10],k0=0;for(var h0=0;h0<(Q-1)/2-1;h0+=2)x0+=d0[h0]*(firbuf[N0+e0+h0]+firbuf[N0+e0+Q-h0]),k0+=d0[h0+1]*(firbuf[N0+e0+h0+1]+firbuf[N0+e0+Q-h0-1]);U[v0][e0]=x0+k0}X[T][v0].en.assign(n0.en[v0]),X[T][v0].thm.assign(n0.thm[v0]),V0>2&&(b[T][v0].en.assign(n0.en[v0+2]),b[T][v0].thm.assign(n0.thm[v0+2]))}for(var v0=0;v0<V0;v0++){var B0=g0(12),o0=g0(12),p0=[0,0,0,0],P0=U[v0&1],S0=0,C0=v0==3?n0.nsPsy.attackthre_s:n0.nsPsy.attackthre,X0=1;if(v0==2)for(var e0=0,h0=576;h0>0;++e0,--h0){var K0=U[0][e0],T1=U[1][e0];U[0][e0]=K0+T1,U[1][e0]=K0-T1}for(var e0=0;e0<3;e0++)o0[e0]=n0.nsPsy.last_en_subshort[v0][e0+6],R0(n0.nsPsy.last_en_subshort[v0][e0+4]>0),B0[e0]=o0[e0]/n0.nsPsy.last_en_subshort[v0][e0+4],p0[0]+=o0[e0];for(var e0=0;e0<9;e0++){for(var z0=S0+64,U0=1;S0<z0;S0++)U0<Math.abs(P0[S0])&&(U0=Math.abs(P0[S0]));n0.nsPsy.last_en_subshort[v0][e0]=o0[e0+3]=U0,p0[1+e0/3]+=U0,U0>o0[e0+3-2]?(R0(o0[e0+3-2]>0),U0=U0/o0[e0+3-2]):o0[e0+3-2]>U0*10?(R0(U0>0),U0=o0[e0+3-2]/(U0*10)):U0=0,B0[e0+3]=U0}for(var e0=0;e0<3;++e0){var s1=o0[e0*3+3]+o0[e0*3+4]+o0[e0*3+5],w1=1;o0[e0*3+5]*6<s1&&(w1*=.5,o0[e0*3+4]*6<s1&&(w1*=.5)),G[v0][e0]=w1}if(l.analysis){for(var y1=B0[0],e0=1;e0<12;e0++)y1<B0[e0]&&(y1=B0[e0]);n0.pinfo.ers[T][v0]=n0.pinfo.ers_save[v0],n0.pinfo.ers_save[v0]=y1}for(var e0=0;e0<12;e0++)F[v0][e0/3]==0&&B0[e0]>C0&&(F[v0][e0/3]=e0%3+1);for(var e0=1;e0<4;e0++){var p1=p0[e0-1],H1=p0[e0],r1=Math.max(p1,H1);r1<4e4&&p1<1.7*H1&&H1<1.7*p1&&(e0==1&&F[v0][0]<=F[v0][e0]&&(F[v0][0]=0),F[v0][e0]=0)}F[v0][0]<=n0.nsPsy.lastAttacks[v0]&&(F[v0][0]=0),(n0.nsPsy.lastAttacks[v0]==3||F[v0][0]+F[v0][1]+F[v0][2]+F[v0][3]!=0)&&(X0=0,F[v0][1]!=0&&F[v0][0]!=0&&(F[v0][1]=0),F[v0][2]!=0&&F[v0][1]!=0&&(F[v0][2]=0),F[v0][3]!=0&&F[v0][2]!=0&&(F[v0][3]=0)),v0<2?t0[v0]=X0:X0==0&&(t0[0]=t0[1]=0),H[v0]=n0.tot_ener[v0]}}function Y0(l,v,x){if(x==0)for(var T=0;T<l.npart_s;T++)l.nb_s2[v][T]=l.nb_s1[v][T],l.nb_s1[v][T]=0}function n1(l,v){for(var x=0;x<l.npart_l;x++)l.nb_2[v][x]=l.nb_1[v][x],l.nb_1[v][x]=0}function t(l,v,x,T){var X=N.length-1,b=0,H=x[b]+x[b+1];if(R0(H>=0),H>0){var G=v[b];G<v[b+1]&&(G=v[b+1]),R0(l.numlines_s[b]+l.numlines_s[b+1]-1>0),H=20*(G*2-H)/(H*(l.numlines_s[b]+l.numlines_s[b+1]-1));var F=0|H;F>X&&(F=X),T[b]=F}else T[b]=0;for(b=1;b<l.npart_s-1;b++)if(H=x[b-1]+x[b]+x[b+1],R0(b+1<l.npart_s),R0(H>=0),H>0){var G=v[b-1];G<v[b]&&(G=v[b]),G<v[b+1]&&(G=v[b+1]),R0(l.numlines_s[b-1]+l.numlines_s[b]+l.numlines_s[b+1]-1>0),H=20*(G*3-H)/(H*(l.numlines_s[b-1]+l.numlines_s[b]+l.numlines_s[b+1]-1));var F=0|H;F>X&&(F=X),T[b]=F}else T[b]=0;if(R0(b>0),R0(b==l.npart_s-1),H=x[b-1]+x[b],R0(H>=0),H>0){var G=v[b-1];G<v[b]&&(G=v[b]),R0(l.numlines_s[b-1]+l.numlines_s[b]-1>0),H=20*(G*2-H)/(H*(l.numlines_s[b-1]+l.numlines_s[b]-1));var F=0|H;F>X&&(F=X),T[b]=F}else T[b]=0;R0(b==l.npart_s-1)}function _(l,v,x,T,X,b){var H=l.internal_flags,G=new float[s0.CBANDS],F=g0(s0.CBANDS),t0,U,n0,b0=new int[s0.CBANDS];for(n0=U=0;n0<H.npart_s;++n0){var V0=0,v0=0,N0=H.numlines_s[n0];for(t0=0;t0<N0;++t0,++U){var e0=v[b][U];V0+=e0,v0<e0&&(v0=e0)}x[n0]=V0,R0(V0>=0),G[n0]=v0,R0(N0>0),F[n0]=V0/N0,R0(F[n0]>=0)}for(R0(n0==H.npart_s),R0(U==129);n0<s0.CBANDS;++n0)G[n0]=0,F[n0]=0;for(t(H,G,F,b0),U=n0=0;n0<H.npart_s;n0++){var x0=H.s3ind_s[n0][0],k0=H.s3ind_s[n0][1],h0,B0,o0,p0,P0;for(h0=b0[x0],B0=1,p0=H.s3_ss[U]*x[x0]*N[b0[x0]],++U,++x0;x0<=k0;)h0+=b0[x0],B0+=1,o0=H.s3_ss[U]*x[x0]*N[b0[x0]],p0=I(p0,o0,x0-n0),++U,++x0;h0=(1+2*h0)/(2*B0),P0=N[h0]*.5,p0*=P0,T[n0]=p0,H.nb_s2[X][n0]=H.nb_s1[X][n0],H.nb_s1[X][n0]=p0,o0=G[n0],o0*=H.minval_s[n0],o0*=P0,T[n0]>o0&&(T[n0]=o0),H.masking_lower>1&&(T[n0]*=H.masking_lower),T[n0]>x[n0]&&(T[n0]=x[n0]),H.masking_lower<1&&(T[n0]*=H.masking_lower),R0(T[n0]>=0)}for(;n0<s0.CBANDS;++n0)x[n0]=0,T[n0]=0}function M0(l,v,x,T,X){var b=g0(s0.CBANDS),H=g0(s0.CBANDS),G=P1(s0.CBANDS+2),F;y(l,v,x,b,H),z(l,b,H,G);var t0=0;for(F=0;F<l.npart_l;F++){var U,n0,b0,V0,v0=l.s3ind[F][0],N0=l.s3ind[F][1],e0=0,x0=0;for(e0=G[v0],x0+=1,n0=l.s3_ll[t0]*x[v0]*N[G[v0]],++t0,++v0;v0<=N0;)e0+=G[v0],x0+=1,U=l.s3_ll[t0]*x[v0]*N[G[v0]],V0=I(n0,U,v0-F),n0=V0,++t0,++v0;if(e0=(1+2*e0)/(2*x0),b0=N[e0]*.5,n0*=b0,l.blocktype_old[X&1]==s0.SHORT_TYPE){var k0=g*l.nb_1[X][F];k0>0?T[F]=Math.min(n0,k0):T[F]=Math.min(n0,x[F]*C)}else{var h0=l0*l.nb_2[X][F],B0=g*l.nb_1[X][F],k0;h0<=0&&(h0=n0),B0<=0&&(B0=n0),l.blocktype_old[X&1]==s0.NORM_TYPE?k0=Math.min(B0,h0):k0=B0,T[F]=Math.min(n0,k0)}l.nb_2[X][F]=l.nb_1[X][F],l.nb_1[X][F]=n0,U=b[F],U*=l.minval_l[F],U*=b0,T[F]>U&&(T[F]=U),l.masking_lower>1&&(T[F]*=l.masking_lower),T[F]>x[F]&&(T[F]=x[F]),l.masking_lower<1&&(T[F]*=l.masking_lower),R0(T[F]>=0)}for(;F<s0.CBANDS;++F)x[F]=0,T[F]=0}function E0(l,v){var x=l.internal_flags;l.short_blocks==z1.short_block_coupled&&!(v[0]!=0&&v[1]!=0)&&(v[0]=v[1]=0);for(var T=0;T<x.channels_out;T++)l.short_blocks==z1.short_block_dispensed&&(v[T]=1),l.short_blocks==z1.short_block_forced&&(v[T]=0)}function O0(l,v,x){for(var T=l.internal_flags,X=0;X<T.channels_out;X++){var b=s0.NORM_TYPE;v[X]!=0?(R0(T.blocktype_old[X]!=s0.START_TYPE),T.blocktype_old[X]==s0.SHORT_TYPE&&(b=s0.STOP_TYPE)):(b=s0.SHORT_TYPE,T.blocktype_old[X]==s0.NORM_TYPE&&(T.blocktype_old[X]=s0.START_TYPE),T.blocktype_old[X]==s0.STOP_TYPE&&(T.blocktype_old[X]=s0.SHORT_TYPE)),x[X]=T.blocktype_old[X],T.blocktype_old[X]=b}}function H0(l,v,x,T,X,b,H){for(var G=b*2,F=b>0?Math.pow(10,X):1,t0,U,n0=0;n0<H;++n0){var b0=l[2][n0],V0=l[3][n0],v0=v[0][n0],N0=v[1][n0],e0=v[2][n0],x0=v[3][n0];if(v0<=1.58*N0&&N0<=1.58*v0){var k0=x[n0]*V0,h0=x[n0]*b0;U=Math.max(e0,Math.min(x0,k0)),t0=Math.max(x0,Math.min(e0,h0))}else U=e0,t0=x0;if(b>0){var B0,o0,p0=T[n0]*F;if(B0=Math.min(Math.max(v0,p0),Math.max(N0,p0)),e0=Math.max(U,p0),x0=Math.max(t0,p0),o0=e0+x0,o0>0&&B0*G<o0){var P0=B0*G/o0;e0*=P0,x0*=P0,R0(o0>0)}U=Math.min(e0,U),t0=Math.min(x0,t0)}U>b0&&(U=b0),t0>V0&&(t0=V0),v[2][n0]=U,v[3][n0]=t0}}this.L3psycho_anal_vbr=function(l,v,x,T,X,b,H,G,F,t0){var U=l.internal_flags,n0,b0,V0=g0(s0.HBLKSIZE),v0=L1([3,s0.HBLKSIZE_s]),N0=L1([2,s0.BLKSIZE]),e0=L1([2,3,s0.BLKSIZE_s]),x0=L1([4,s0.CBANDS]),k0=L1([4,s0.CBANDS]),h0=L1([4,3]),B0=.6,o0=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],p0=P1(2),P0=l.mode==c.JOINT_STEREO?4:U.channels_out;I0(l,v,x,T,X,b,F,h0,o0,p0),E0(l,p0);{for(var S0=0;S0<P0;S0++){var C0=S0&1;n0=N0,m0(l,v,x,S0,T,V0,n0,C0),A0(l,T,S0,V0),p0[C0]!=0?M0(U,V0,x0[S0],k0[S0],S0):n1(U,S0)}p0[0]+p0[1]==2&&l.mode==c.JOINT_STEREO&&H0(x0,k0,U.mld_cb_l,U.ATH.cb_l,l.ATHlower*U.ATH.adjust,l.msfix,U.npart_l);for(var S0=0;S0<P0;S0++){var C0=S0&1;p0[C0]!=0&&E(U,x0[S0],k0[S0],S0)}}{for(var X0=0;X0<3;X0++){for(var S0=0;S0<P0;++S0){var C0=S0&1;p0[C0]!=0?Y0(U,S0,X0):(b0=e0,y0(l,v,x,S0,X0,v0,b0,C0),_(l,v0,x0[S0],k0[S0],S0,X0))}p0[0]+p0[1]==0&&l.mode==c.JOINT_STEREO&&H0(x0,k0,U.mld_cb_s,U.ATH.cb_s,l.ATHlower*U.ATH.adjust,l.msfix,U.npart_s);for(var S0=0;S0<P0;++S0){var C0=S0&1;p0[C0]==0&&B(U,x0[S0],k0[S0],S0,X0)}}for(var S0=0;S0<P0;S0++){var C0=S0&1;if(p0[C0]==0)for(var K0=0;K0<s0.SBMAX_s;K0++){for(var T1=g0(3),X0=0;X0<3;X0++){var z0=U.thm[S0].s[K0][X0];if(z0*=A,o0[S0][X0]>=2||o0[S0][X0+1]==1){var U0=X0!=0?X0-1:2,s1=a(U.thm[S0].s[K0][U0],z0,f*B0);z0=Math.min(z0,s1)}else if(o0[S0][X0]==1){var U0=X0!=0?X0-1:2,s1=a(U.thm[S0].s[K0][U0],z0,C*B0);z0=Math.min(z0,s1)}else if(X0!=0&&o0[S0][X0-1]==3||X0==0&&U.nsPsy.lastAttacks[S0]==3){var U0=X0!=2?X0+1:0,s1=a(U.thm[S0].s[K0][U0],z0,C*B0);z0=Math.min(z0,s1)}z0*=h0[S0][X0],T1[X0]=z0}for(var X0=0;X0<3;X0++)U.thm[S0].s[K0][X0]=T1[X0]}}}for(var S0=0;S0<P0;S0++)U.nsPsy.lastAttacks[S0]=o0[S0][2];O0(l,p0,t0);for(var S0=0;S0<P0;S0++){var w1,y1,p1,H1;S0>1?(w1=G,y1=-2,p1=s0.NORM_TYPE,(t0[0]==s0.SHORT_TYPE||t0[1]==s0.SHORT_TYPE)&&(p1=s0.SHORT_TYPE),H1=b[T][S0-2]):(w1=H,y1=0,p1=t0[S0],H1=X[T][S0]),p1==s0.SHORT_TYPE?w1[y1+S0]=O(H1,U.masking_lower):w1[y1+S0]=D(H1,U.masking_lower),l.analysis&&(U.pinfo.pe[T][S0]=w1[y1+S0])}return 0};function w0(l,v){var x=l,T;return x>=0?T=-x*27:T=x*v,T<=-72?0:Math.exp(T*a0)}function T0(l){var v=0,x=0;{var T=0,X,b;for(T=0;w0(T,l)>1e-20;T-=1);for(X=T,b=0;Math.abs(b-X)>1e-12;)T=(b+X)/2,w0(T,l)>0?b=T:X=T;v=X}{var T=0,X,b;for(T=0;w0(T,l)>1e-20;T+=1);for(X=0,b=T;Math.abs(b-X)>1e-12;)T=(b+X)/2,w0(T,l)>0?X=T:b=T;x=b}{var H=0,G=1e3,F;for(F=0;F<=G;++F){var T=v+F*(x-v)/G,t0=w0(T,l);H+=t0}{var U=(G+1)/(H*(x-v));return U}}}function F0(l){var v,x,T,X;return v=l,v>=0?v*=3:v*=1.5,v>=.5&&v<=2.5?(X=v-.5,x=8*(X*X-2*X)):x=0,v+=.474,T=15.811389+7.5*v-17.5*Math.sqrt(1+v*v),T<=-60?0:(v=Math.exp((x+T)*a0),v/=.6609193,v)}function L0(l){return l<0&&(l=0),l=l*.001,13*Math.atan(.76*l)+3.5*Math.atan(l*l/(7.5*7.5))}function c0(l,v,x,T,X,b,H,G,F,t0,U,n0){var b0=g0(s0.CBANDS+1),V0=G/(n0>15?2*576:2*192),v0=P1(s0.HBLKSIZE),N0;G/=F;var e0=0,x0=0;for(N0=0;N0<s0.CBANDS;N0++){var k0,h0;for(k0=L0(G*e0),b0[N0]=G*e0,h0=e0;L0(G*h0)-k0<q&&h0<=F/2;h0++);for(l[N0]=h0-e0,x0=N0+1;e0<h0;)R0(e0<s0.HBLKSIZE),v0[e0++]=N0;if(e0>F/2){e0=F/2,++N0;break}}R0(N0<s0.CBANDS),b0[N0]=G*e0;for(var B0=0;B0<n0;B0++){var o0,p0,P0,S0,C0;P0=t0[B0],S0=t0[B0+1],o0=0|Math.floor(.5+U*(P0-.5)),o0<0&&(o0=0),p0=0|Math.floor(.5+U*(S0-.5)),p0>F/2&&(p0=F/2),x[B0]=(v0[o0]+v0[p0])/2,v[B0]=v0[p0];var X0=V0*S0;H[B0]=(X0-b0[v[B0]])/(b0[v[B0]+1]-b0[v[B0]]),H[B0]<0?H[B0]=0:H[B0]>1&&(H[B0]=1),C0=L0(G*t0[B0]*U),C0=Math.min(C0,15.5)/15.5,b[B0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*C0))-2.5)}e0=0;for(var K0=0;K0<x0;K0++){var T1=l[K0],k0,z0;k0=L0(G*e0),z0=L0(G*(e0+T1-1)),T[K0]=.5*(k0+z0),k0=L0(G*(e0-.5)),z0=L0(G*(e0+T1-.5)),X[K0]=z0-k0,e0+=T1}return x0}function $0(l,v,x,T,X,b){var H=L1([s0.CBANDS,s0.CBANDS]),G,F=0;if(b)for(var t0=0;t0<v;t0++)for(G=0;G<v;G++){var U=F0(x[t0]-x[G])*T[G];H[t0][G]=U*X[t0]}else for(G=0;G<v;G++)for(var n0=15+Math.min(21/x[G],12),b0=T0(n0),t0=0;t0<v;t0++){var U=b0*w0(x[t0]-x[G],n0)*T[G];H[t0][G]=U*X[t0]}for(var t0=0;t0<v;t0++){for(G=0;G<v&&!(H[t0][G]>0);G++);for(l[t0][0]=G,G=v-1;G>0&&!(H[t0][G]>0);G--);l[t0][1]=G,F+=l[t0][1]-l[t0][0]+1}for(var V0=g0(F),v0=0,t0=0;t0<v;t0++)for(G=l[t0][0];G<=l[t0][1];G++)V0[v0++]=H[t0][G];return V0}function e1(l){var v=L0(l);return v=Math.min(v,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*v))-2.5)}this.psymodel_init=function(l){var v=l.internal_flags,x,T=!0,X=13,b=24,H=0,G=0,F=-8.25,t0=-4.5,U=g0(s0.CBANDS),n0=g0(s0.CBANDS),b0=g0(s0.CBANDS),V0=l.out_samplerate;switch(l.experimentalZ){default:case 0:T=!0;break;case 1:T=!(l.VBR==j1.vbr_mtrh||l.VBR==j1.vbr_mt);break;case 2:T=!1;break;case 3:X=8,H=-1.75,G=-.0125,F=-8.25,t0=-2.25;break}for(v.ms_ener_ratio_old=.25,v.blocktype_old[0]=v.blocktype_old[1]=s0.NORM_TYPE,x=0;x<4;++x){for(var e0=0;e0<s0.CBANDS;++e0)v.nb_1[x][e0]=1e20,v.nb_2[x][e0]=1e20,v.nb_s1[x][e0]=v.nb_s2[x][e0]=1;for(var v0=0;v0<s0.SBMAX_l;v0++)v.en[x].l[v0]=1e20,v.thm[x].l[v0]=1e20;for(var e0=0;e0<3;++e0){for(var v0=0;v0<s0.SBMAX_s;v0++)v.en[x].s[v0][e0]=1e20,v.thm[x].s[v0][e0]=1e20;v.nsPsy.lastAttacks[x]=0}for(var e0=0;e0<9;e0++)v.nsPsy.last_en_subshort[x][e0]=10}for(v.loudness_sq_save[0]=v.loudness_sq_save[1]=0,v.npart_l=c0(v.numlines_l,v.bo_l,v.bm_l,U,n0,v.mld_l,v.PSY.bo_l_weight,V0,s0.BLKSIZE,v.scalefac_band.l,s0.BLKSIZE/(2*576),s0.SBMAX_l),R0(v.npart_l<s0.CBANDS),x=0;x<v.npart_l;x++){var N0=H;U[x]>=X&&(N0=G*(U[x]-X)/(b-X)+H*(b-U[x])/(b-X)),b0[x]=Math.pow(10,N0/10),v.numlines_l[x]>0?v.rnumlines_l[x]=1/v.numlines_l[x]:v.rnumlines_l[x]=0}v.s3_ll=$0(v.s3ind,v.npart_l,U,n0,b0,T);var e0=0;for(x=0;x<v.npart_l;x++){var x0;x0=sa.MAX_VALUE;for(var k0=0;k0<v.numlines_l[x];k0++,e0++){var h0=V0*e0/(1e3*s0.BLKSIZE),B0;B0=this.ATHformula(h0*1e3,l)-20,B0=Math.pow(10,.1*B0),B0*=v.numlines_l[x],x0>B0&&(x0=B0)}v.ATH.cb_l[x]=x0,x0=-20+U[x]*20/10,x0>6&&(x0=100),x0<-15&&(x0=-15),x0-=8,v.minval_l[x]=Math.pow(10,x0/10)*v.numlines_l[x]}for(v.npart_s=c0(v.numlines_s,v.bo_s,v.bm_s,U,n0,v.mld_s,v.PSY.bo_s_weight,V0,s0.BLKSIZE_s,v.scalefac_band.s,s0.BLKSIZE_s/(2*192),s0.SBMAX_s),R0(v.npart_s<s0.CBANDS),e0=0,x=0;x<v.npart_s;x++){var x0,N0=F;U[x]>=X&&(N0=t0*(U[x]-X)/(b-X)+F*(b-U[x])/(b-X)),b0[x]=Math.pow(10,N0/10),x0=sa.MAX_VALUE;for(var k0=0;k0<v.numlines_s[x];k0++,e0++){var h0=V0*e0/(1e3*s0.BLKSIZE_s),B0;B0=this.ATHformula(h0*1e3,l)-20,B0=Math.pow(10,.1*B0),B0*=v.numlines_s[x],x0>B0&&(x0=B0)}v.ATH.cb_s[x]=x0,x0=-7+U[x]*7/12,U[x]>12&&(x0*=1+Math.log(1+x0)*3.1),U[x]<12&&(x0*=1+Math.log(1-x0)*2.3),x0<-15&&(x0=-15),x0-=8,v.minval_s[x]=Math.pow(10,x0/10)*v.numlines_s[x]}v.s3_ss=$0(v.s3ind_s,v.npart_s,U,n0,b0,T),w(),Y.init_fft(v),v.decay=Math.exp(-1*k/(f0*V0/192));{var o0;o0=i0,l.exp_nspsytune&2&&(o0=1),Math.abs(l.msfix)>0&&(o0=l.msfix),l.msfix=o0;for(var p0=0;p0<v.npart_l;p0++)v.s3ind[p0][1]>v.npart_l-1&&(v.s3ind[p0][1]=v.npart_l-1)}var P0=576*v.mode_gr/V0;if(v.ATH.decay=Math.pow(10,-12/10*P0),v.ATH.adjust=.01,v.ATH.adjustLimit=1,R0(v.bo_l[s0.SBMAX_l-1]<=v.npart_l),R0(v.bo_s[s0.SBMAX_s-1]<=v.npart_s),l.ATHtype!=-1){var h0,S0=l.out_samplerate/s0.BLKSIZE,C0=0;for(h0=0,x=0;x<s0.BLKSIZE/2;++x)h0+=S0,v.ATH.eql_w[x]=1/Math.pow(10,this.ATHformula(h0,l)/10),C0+=v.ATH.eql_w[x];for(C0=1/C0,x=s0.BLKSIZE/2;--x>=0;)v.ATH.eql_w[x]*=C0}{for(var p0=e0=0;p0<v.npart_s;++p0)for(x=0;x<v.numlines_s[p0];++x)++e0;R0(e0==129);for(var p0=e0=0;p0<v.npart_l;++p0)for(x=0;x<v.numlines_l[p0];++x)++e0;R0(e0==513)}for(e0=0,x=0;x<v.npart_l;x++){var h0=V0*(e0+v.numlines_l[x]/2)/(1*s0.BLKSIZE);v.mld_cb_l[x]=e1(h0),e0+=v.numlines_l[x]}for(;x<s0.CBANDS;++x)v.mld_cb_l[x]=1;for(e0=0,x=0;x<v.npart_s;x++){var h0=V0*(e0+v.numlines_s[x]/2)/(1*s0.BLKSIZE_s);v.mld_cb_s[x]=e1(h0),e0+=v.numlines_s[x]}for(;x<s0.CBANDS;++x)v.mld_cb_s[x]=1;return 0};function q0(l,v){l<-.3&&(l=3410),l/=1e3,l=Math.max(.1,l);var x=3.64*Math.pow(l,-.8)-6.8*Math.exp(-.6*Math.pow(l-3.4,2))+6*Math.exp(-.15*Math.pow(l-8.7,2))+(.6+.04*v)*.001*Math.pow(l,4);return x}this.ATHformula=function(l,v){var x;switch(v.ATHtype){case 0:x=q0(l,9);break;case 1:x=q0(l,-1);break;case 2:x=q0(l,0);break;case 3:x=q0(l,1)+6;break;case 4:x=q0(l,v.ATHcurve);break;default:x=q0(l,0);break}return x}}var ga=Ja,er=_e;function ar(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=er.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var rr=ar,tr=t1(),Ca={};Ca.SFBMAX=tr.SBMAX_s*3;var de=Ca,u1=W0;u1.System;u1.VbrMode;u1.Float;u1.ShortBlock;u1.Util;u1.Arrays;u1.new_array_n;u1.new_byte;u1.new_double;var nr=u1.new_float;u1.new_float_n;var U1=u1.new_int;u1.new_int_n;u1.assert;var He=de;function sr(){this.xr=nr(576),this.l3_enc=U1(576),this.scalefac=U1(He.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=U1(3),this.subblock_gain=U1(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=U1(He.SFBMAX),this.window=U1(He.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=U1(4),this.max_nonzero_coeff=0;var c=this;function Y(g){return new Int32Array(g)}function k(g){return new Float32Array(g)}this.assign=function(g){c.xr=k(g.xr),c.l3_enc=Y(g.l3_enc),c.scalefac=Y(g.scalefac),c.xrpow_max=g.xrpow_max,c.part2_3_length=g.part2_3_length,c.big_values=g.big_values,c.count1=g.count1,c.global_gain=g.global_gain,c.scalefac_compress=g.scalefac_compress,c.block_type=g.block_type,c.mixed_block_flag=g.mixed_block_flag,c.table_select=Y(g.table_select),c.subblock_gain=Y(g.subblock_gain),c.region0_count=g.region0_count,c.region1_count=g.region1_count,c.preflag=g.preflag,c.scalefac_scale=g.scalefac_scale,c.count1table_select=g.count1table_select,c.part2_length=g.part2_length,c.sfb_lmax=g.sfb_lmax,c.sfb_smin=g.sfb_smin,c.psy_lmax=g.psy_lmax,c.sfbmax=g.sfbmax,c.psymax=g.psymax,c.sfbdivide=g.sfbdivide,c.width=Y(g.width),c.window=Y(g.window),c.count1bits=g.count1bits,c.sfb_partition_table=g.sfb_partition_table.slice(0),c.slen=Y(g.slen),c.max_nonzero_coeff=g.max_nonzero_coeff}}var Ge=sr,f1=W0;f1.System;f1.VbrMode;f1.Float;f1.ShortBlock;f1.Util;f1.Arrays;f1.new_array_n;f1.new_byte;f1.new_double;f1.new_float;f1.new_float_n;var ia=f1.new_int;f1.new_int_n;f1.assert;var ir=Ge;function _r(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[ia(4),ia(4)];for(var c=0;c<2;c++)for(var Y=0;Y<2;Y++)this.tt[c][Y]=new ir}var lr=_r,m1=W0,ve=m1.System;m1.VbrMode;m1.Float;m1.ShortBlock;m1.Util;m1.Arrays;m1.new_array_n;m1.new_byte;m1.new_double;m1.new_float;m1.new_float_n;var he=m1.new_int;m1.new_int_n;m1.assert;var ue=t1();function or(c,Y,k,g){this.l=he(1+ue.SBMAX_l),this.s=he(1+ue.SBMAX_s),this.psfb21=he(1+ue.PSFB21),this.psfb12=he(1+ue.PSFB12);var l0=this.l,j=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],ve.arraycopy(this.arrL,0,l0,0,Math.min(this.arrL.length,this.l.length)),ve.arraycopy(this.arrS,0,j,0,Math.min(this.arrS.length,this.s.length)),ve.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),ve.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var Fa=or,b1=W0;b1.System;b1.VbrMode;b1.Float;b1.ShortBlock;b1.Util;b1.Arrays;b1.new_array_n;b1.new_byte;b1.new_double;var Oe=b1.new_float,vr=b1.new_float_n,hr=b1.new_int;b1.new_int_n;b1.assert;var _a=t1();function ur(){this.last_en_subshort=vr([4,9]),this.lastAttacks=hr(4),this.pefirbuf=Oe(19),this.longfact=Oe(_a.SBMAX_l),this.shortfact=Oe(_a.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var fr=ur;function mr(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var br=mr,c1=W0;c1.System;c1.VbrMode;c1.Float;c1.ShortBlock;c1.Util;c1.Arrays;c1.new_array_n;var cr=c1.new_byte,Sr=c1.new_double,N1=c1.new_float,Z1=c1.new_float_n,O1=c1.new_int,fe=c1.new_int_n;c1.assert;var dr=lr,Ar=Fa,Mr=fr,Rr=br,la=Oa(),j0=t1(),xr=de;Y1.MFSIZE=3*1152+j0.ENCDELAY-j0.MDCTDELAY;Y1.MAX_HEADER_BUF=256;Y1.MAX_BITS_PER_CHANNEL=4095;Y1.MAX_BITS_PER_GRANULE=7680;Y1.BPC=320;function Y1(){var c=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Z1([2,Y1.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new dr,this.ms_ratio=N1(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=O1(2),this.CurrentStep=O1(2),this.masking_lower=0,this.bv_scf=O1(576),this.pseudohalf=O1(xr.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Y1.BPC+1),this.itime=Sr(2),this.sideinfo_len=0,this.sb_sample=Z1([2,2,18,j0.SBLIMIT]),this.amp_filter=N1(32);function Y(){this.write_timing=0,this.ptr=0,this.buf=cr(c)}this.header=new Array(Y1.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new Ar,this.minval_l=N1(j0.CBANDS),this.minval_s=N1(j0.CBANDS),this.nb_1=Z1([4,j0.CBANDS]),this.nb_2=Z1([4,j0.CBANDS]),this.nb_s1=Z1([4,j0.CBANDS]),this.nb_s2=Z1([4,j0.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=N1(4),this.loudness_sq=Z1([2,2]),this.loudness_sq_save=N1(2),this.mld_l=N1(j0.SBMAX_l),this.mld_s=N1(j0.SBMAX_s),this.bm_l=O1(j0.SBMAX_l),this.bo_l=O1(j0.SBMAX_l),this.bm_s=O1(j0.SBMAX_s),this.bo_s=O1(j0.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=fe([j0.CBANDS,2]),this.s3ind_s=fe([j0.CBANDS,2]),this.numlines_s=O1(j0.CBANDS),this.numlines_l=O1(j0.CBANDS),this.rnumlines_l=N1(j0.CBANDS),this.mld_cb_l=N1(j0.CBANDS),this.mld_cb_s=N1(j0.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=N1(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=O1(2),this.nsPsy=new Mr,this.VBR_seek_table=new Rr,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=fe([16,5]),this.bitrate_blockType_Hist=fe([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var k=0;k<this.en.length;k++)this.en[k]=new la;for(var k=0;k<this.thm.length;k++)this.thm[k]=new la;for(var k=0;k<this.header.length;k++)this.header[k]=new Y}var Ae=Y1,S1=W0;S1.System;S1.VbrMode;S1.Float;S1.ShortBlock;S1.Util;S1.Arrays;S1.new_array_n;S1.new_byte;S1.new_double;var K1=S1.new_float;S1.new_float_n;S1.new_int;S1.new_int_n;S1.assert;var Q1=t1();function Er(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=K1(Q1.SBMAX_l),this.s=K1(Q1.SBMAX_s),this.psfb21=K1(Q1.PSFB21),this.psfb12=K1(Q1.PSFB12),this.cb_l=K1(Q1.CBANDS),this.cb_s=K1(Q1.CBANDS),this.eql_w=K1(Q1.BLKSIZE/2)}var Br=Er,d1=W0,l1=d1.System;d1.VbrMode;d1.Float;d1.ShortBlock;d1.Util;var oa=d1.Arrays;d1.new_array_n;d1.new_byte;d1.new_double;d1.new_float;d1.new_float_n;d1.new_int;d1.new_int_n;d1.assert;Z0.STEPS_per_dB=100;Z0.MAX_dB=120;Z0.GAIN_NOT_ENOUGH_SAMPLES=-24601;Z0.GAIN_ANALYSIS_ERROR=0;Z0.GAIN_ANALYSIS_OK=1;Z0.INIT_GAIN_ANALYSIS_ERROR=0;Z0.INIT_GAIN_ANALYSIS_OK=1;Z0.YULE_ORDER=10;Z0.MAX_ORDER=Z0.YULE_ORDER;Z0.MAX_SAMP_FREQ=48e3;Z0.RMS_WINDOW_TIME_NUMERATOR=1;Z0.RMS_WINDOW_TIME_DENOMINATOR=20;Z0.MAX_SAMPLES_PER_WINDOW=Z0.MAX_SAMP_FREQ*Z0.RMS_WINDOW_TIME_NUMERATOR/Z0.RMS_WINDOW_TIME_DENOMINATOR+1;function Z0(){var c=64.82;Z0.YULE_ORDER;var Y=.95;Z0.MAX_SAMP_FREQ;var k=Z0.RMS_WINDOW_TIME_NUMERATOR,g=Z0.RMS_WINDOW_TIME_DENOMINATOR;Z0.MAX_SAMPLES_PER_WINDOW;var l0=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],j=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function $(f,C,i0,Q,a0,W){for(;a0--!=0;)i0[Q]=1e-10+f[C+0]*W[0]-i0[Q-1]*W[1]+f[C-1]*W[2]-i0[Q-2]*W[3]+f[C-2]*W[4]-i0[Q-3]*W[5]+f[C-3]*W[6]-i0[Q-4]*W[7]+f[C-4]*W[8]-i0[Q-5]*W[9]+f[C-5]*W[10]-i0[Q-6]*W[11]+f[C-6]*W[12]-i0[Q-7]*W[13]+f[C-7]*W[14]-i0[Q-8]*W[15]+f[C-8]*W[16]-i0[Q-9]*W[17]+f[C-9]*W[18]-i0[Q-10]*W[19]+f[C-10]*W[20],++Q,++C}function q(f,C,i0,Q,a0,W){for(;a0--!=0;)i0[Q]=f[C+0]*W[0]-i0[Q-1]*W[1]+f[C-1]*W[2]-i0[Q-2]*W[3]+f[C-2]*W[4],++Q,++C}function r0(f,C){for(var i0=0;i0<MAX_ORDER;i0++)f.linprebuf[i0]=f.lstepbuf[i0]=f.loutbuf[i0]=f.rinprebuf[i0]=f.rstepbuf[i0]=f.routbuf[i0]=0;switch(0|C){case 48e3:f.reqindex=0;break;case 44100:f.reqindex=1;break;case 32e3:f.reqindex=2;break;case 24e3:f.reqindex=3;break;case 22050:f.reqindex=4;break;case 16e3:f.reqindex=5;break;case 12e3:f.reqindex=6;break;case 11025:f.reqindex=7;break;case 8e3:f.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return f.sampleWindow=0|(C*k+g-1)/g,f.lsum=0,f.rsum=0,f.totsamp=0,oa.ill(f.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(f,C){return r0(f,C)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(f.linpre=MAX_ORDER,f.rinpre=MAX_ORDER,f.lstep=MAX_ORDER,f.rstep=MAX_ORDER,f.lout=MAX_ORDER,f.rout=MAX_ORDER,oa.fill(f.B,0),INIT_GAIN_ANALYSIS_OK)};function f0(f){return f*f}this.AnalyzeSamples=function(f,C,i0,Q,a0,W,R){var h,u,M,e,i,S,V;if(W==0)return GAIN_ANALYSIS_OK;switch(V=0,i=W,R){case 1:Q=C,a0=i0;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(W<MAX_ORDER?(l1.arraycopy(C,i0,f.linprebuf,MAX_ORDER,W),l1.arraycopy(Q,a0,f.rinprebuf,MAX_ORDER,W)):(l1.arraycopy(C,i0,f.linprebuf,MAX_ORDER,MAX_ORDER),l1.arraycopy(Q,a0,f.rinprebuf,MAX_ORDER,MAX_ORDER));i>0;){S=i>f.sampleWindow-f.totsamp?f.sampleWindow-f.totsamp:i,V<MAX_ORDER?(h=f.linpre+V,u=f.linprebuf,M=f.rinpre+V,e=f.rinprebuf,S>MAX_ORDER-V&&(S=MAX_ORDER-V)):(h=i0+V,u=C,M=a0+V,e=Q),$(u,h,f.lstepbuf,f.lstep+f.totsamp,S,l0[f.reqindex]),$(e,M,f.rstepbuf,f.rstep+f.totsamp,S,l0[f.reqindex]),q(f.lstepbuf,f.lstep+f.totsamp,f.loutbuf,f.lout+f.totsamp,S,j[f.reqindex]),q(f.rstepbuf,f.rstep+f.totsamp,f.routbuf,f.rout+f.totsamp,S,j[f.reqindex]),h=f.lout+f.totsamp,u=f.loutbuf,M=f.rout+f.totsamp,e=f.routbuf;for(var N=S%8;N--!=0;)f.lsum+=f0(u[h++]),f.rsum+=f0(e[M++]);for(N=S/8;N--!=0;)f.lsum+=f0(u[h+0])+f0(u[h+1])+f0(u[h+2])+f0(u[h+3])+f0(u[h+4])+f0(u[h+5])+f0(u[h+6])+f0(u[h+7]),h+=8,f.rsum+=f0(e[M+0])+f0(e[M+1])+f0(e[M+2])+f0(e[M+3])+f0(e[M+4])+f0(e[M+5])+f0(e[M+6])+f0(e[M+7]),M+=8;if(i-=S,V+=S,f.totsamp+=S,f.totsamp==f.sampleWindow){var w=Z0.STEPS_per_dB*10*Math.log10((f.lsum+f.rsum)/f.totsamp*.5+1e-37),P=w<=0?0:0|w;P>=f.A.length&&(P=f.A.length-1),f.A[P]++,f.lsum=f.rsum=0,l1.arraycopy(f.loutbuf,f.totsamp,f.loutbuf,0,MAX_ORDER),l1.arraycopy(f.routbuf,f.totsamp,f.routbuf,0,MAX_ORDER),l1.arraycopy(f.lstepbuf,f.totsamp,f.lstepbuf,0,MAX_ORDER),l1.arraycopy(f.rstepbuf,f.totsamp,f.rstepbuf,0,MAX_ORDER),f.totsamp=0}if(f.totsamp>f.sampleWindow)return GAIN_ANALYSIS_ERROR}return W<MAX_ORDER?(l1.arraycopy(f.linprebuf,W,f.linprebuf,0,MAX_ORDER-W),l1.arraycopy(f.rinprebuf,W,f.rinprebuf,0,MAX_ORDER-W),l1.arraycopy(C,i0,f.linprebuf,MAX_ORDER-W,W),l1.arraycopy(Q,a0,f.rinprebuf,MAX_ORDER-W,W)):(l1.arraycopy(C,i0+W-MAX_ORDER,f.linprebuf,0,MAX_ORDER),l1.arraycopy(Q,a0+W-MAX_ORDER,f.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function A(f,C){var i0,Q=0;for(i0=0;i0<C;i0++)Q+=f[i0];if(Q==0)return GAIN_NOT_ENOUGH_SAMPLES;var a0=0|Math.ceil(Q*(1-Y));for(i0=C;i0-- >0&&!((a0-=f[i0])<=0););return c-i0/Z0.STEPS_per_dB}this.GetTitleGain=function(f){for(var C=A(f.A,f.A.length),i0=0;i0<f.A.length;i0++)f.B[i0]+=f.A[i0],f.A[i0]=0;for(var i0=0;i0<MAX_ORDER;i0++)f.linprebuf[i0]=f.lstepbuf[i0]=f.loutbuf[i0]=f.rinprebuf[i0]=f.rstepbuf[i0]=f.routbuf[i0]=0;return f.totsamp=0,f.lsum=f.rsum=0,C}}var ka=Z0,A1=W0;A1.System;A1.VbrMode;A1.Float;A1.ShortBlock;A1.Util;A1.Arrays;A1.new_array_n;A1.new_byte;A1.new_double;var J1=A1.new_float;A1.new_float_n;var va=A1.new_int;A1.new_int_n;A1.assert;var o1=ka;function Tr(){this.linprebuf=J1(o1.MAX_ORDER*2),this.linpre=0,this.lstepbuf=J1(o1.MAX_SAMPLES_PER_WINDOW+o1.MAX_ORDER),this.lstep=0,this.loutbuf=J1(o1.MAX_SAMPLES_PER_WINDOW+o1.MAX_ORDER),this.lout=0,this.rinprebuf=J1(o1.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=J1(o1.MAX_SAMPLES_PER_WINDOW+o1.MAX_ORDER),this.rstep=0,this.routbuf=J1(o1.MAX_SAMPLES_PER_WINDOW+o1.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=va(0|o1.STEPS_per_dB*o1.MAX_dB),this.B=va(0|o1.STEPS_per_dB*o1.MAX_dB)}var wr=Tr;function yr(c){this.bits=c}var Xa=yr,M1=W0;M1.System;M1.VbrMode;M1.Float;M1.ShortBlock;M1.Util;M1.Arrays;M1.new_array_n;M1.new_byte;M1.new_double;var ha=M1.new_float;M1.new_float_n;var Ir=M1.new_int;M1.new_int_n;var ua=M1.assert,Lr=Xa,fa=t1(),Nr=de,Vr=Ae;function pr(c){var Y=c;this.quantize=Y,this.iteration_loop=function(k,g,l0,j){var $=k.internal_flags,q=ha(Nr.SFBMAX),r0=ha(576),f0=Ir(2),A=0,f,C=$.l3_side,i0=new Lr(A);this.quantize.rv.ResvFrameBegin(k,i0),A=i0.bits;for(var Q=0;Q<$.mode_gr;Q++){f=this.quantize.qupvt.on_pe(k,g,f0,A,Q,Q),$.mode_ext==fa.MPG_MD_MS_LR&&(this.quantize.ms_convert($.l3_side,Q),this.quantize.qupvt.reduce_side(f0,l0[Q],A,f));for(var a0=0;a0<$.channels_out;a0++){var W,R,h=C.tt[Q][a0];h.block_type!=fa.SHORT_TYPE?(W=0,R=$.PSY.mask_adjust-W):(W=0,R=$.PSY.mask_adjust_short-W),$.masking_lower=Math.pow(10,R*.1),this.quantize.init_outer_loop($,h),this.quantize.init_xrpow($,h,r0)&&(this.quantize.qupvt.calc_xmin(k,j[Q][a0],h,q),this.quantize.outer_loop(k,h,q,r0,a0,f0[a0])),this.quantize.iteration_finish_one($,Q,a0),ua(h.part2_3_length<=Vr.MAX_BITS_PER_CHANNEL),ua(h.part2_3_length<=f0[a0])}}this.quantize.rv.ResvFrameEnd($,A)}}var Hr=pr;function D0(c,Y,k,g){this.xlen=c,this.linmax=Y,this.table=k,this.hlen=g}var u0={};u0.t1HB=[1,1,1,0];u0.t2HB=[1,2,1,3,1,1,3,2,0];u0.t3HB=[3,2,1,1,1,1,3,2,0];u0.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];u0.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];u0.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];u0.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];u0.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];u0.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];u0.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];u0.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];u0.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];u0.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];u0.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];u0.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];u0.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];u0.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];u0.t1l=[1,4,3,5];u0.t2l=[1,4,7,4,5,7,6,7,8];u0.t3l=[2,3,7,4,4,7,6,7,8];u0.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];u0.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];u0.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];u0.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];u0.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];u0.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];u0.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];u0.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];u0.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];u0.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];u0.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];u0.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];u0.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];u0.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];u0.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];u0.ht=[new D0(0,0,null,null),new D0(2,0,u0.t1HB,u0.t1l),new D0(3,0,u0.t2HB,u0.t2l),new D0(3,0,u0.t3HB,u0.t3l),new D0(0,0,null,null),new D0(4,0,u0.t5HB,u0.t5l),new D0(4,0,u0.t6HB,u0.t6l),new D0(6,0,u0.t7HB,u0.t7l),new D0(6,0,u0.t8HB,u0.t8l),new D0(6,0,u0.t9HB,u0.t9l),new D0(8,0,u0.t10HB,u0.t10l),new D0(8,0,u0.t11HB,u0.t11l),new D0(8,0,u0.t12HB,u0.t12l),new D0(16,0,u0.t13HB,u0.t13l),new D0(0,0,null,u0.t16_5l),new D0(16,0,u0.t15HB,u0.t15l),new D0(1,1,u0.t16HB,u0.t16l),new D0(2,3,u0.t16HB,u0.t16l),new D0(3,7,u0.t16HB,u0.t16l),new D0(4,15,u0.t16HB,u0.t16l),new D0(6,63,u0.t16HB,u0.t16l),new D0(8,255,u0.t16HB,u0.t16l),new D0(10,1023,u0.t16HB,u0.t16l),new D0(13,8191,u0.t16HB,u0.t16l),new D0(4,15,u0.t24HB,u0.t24l),new D0(5,31,u0.t24HB,u0.t24l),new D0(6,63,u0.t24HB,u0.t24l),new D0(7,127,u0.t24HB,u0.t24l),new D0(8,255,u0.t24HB,u0.t24l),new D0(9,511,u0.t24HB,u0.t24l),new D0(11,2047,u0.t24HB,u0.t24l),new D0(13,8191,u0.t24HB,u0.t24l),new D0(0,0,u0.t32HB,u0.t32l),new D0(0,0,u0.t33HB,u0.t33l)];u0.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];u0.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];u0.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];u0.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];u0.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];u0.scfsi_band=[0,6,11,16,21];var $e=u0,Ce,ma;function Ya(){if(ma)return Ce;ma=1;var c=Fa,Y=W0;Y.System;var k=Y.VbrMode,g=Y.Float;Y.ShortBlock;var l0=Y.Util;Y.Arrays,Y.new_array_n,Y.new_byte,Y.new_double;var j=Y.new_float;Y.new_float_n;var $=Y.new_int;Y.new_int_n;var q=Y.assert,r0=t1(),f0=Xa,A=Ae;f.Q_MAX=257,f.Q_MAX2=116,f.LARGE_BITS=1e5,f.IXMAX_VAL=8206;function f(){var C=Pe(),i0=null,Q=null,a0=null;this.setModules=function(d,I,p){i0=d,Q=I,a0=p};function W(d){return q(0<=d+f.Q_MAX2&&d<f.Q_MAX),V[d+f.Q_MAX2]}this.IPOW20=function(d){return q(0<=d&&d<f.Q_MAX),N[d]};var R=2220446049250313e-31,h=f.IXMAX_VAL,u=h+2,M=f.Q_MAX,e=f.Q_MAX2;f.LARGE_BITS;var i=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var S=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=S,this.sfBandIndex=[new c([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var V=j(M+e+1),N=j(M),w=j(u),P=j(u);this.adj43=P;function Z(d,I){var p=a0.ATHformula(I,d);return p-=i,p=Math.pow(10,p/10+d.ATHlower),p}function m(d){for(var I=d.internal_flags.ATH.l,p=d.internal_flags.ATH.psfb21,L=d.internal_flags.ATH.s,K=d.internal_flags.ATH.psfb12,B=d.internal_flags,E=d.out_samplerate,n=0;n<r0.SBMAX_l;n++){var s=B.scalefac_band.l[n],a=B.scalefac_band.l[n+1];I[n]=g.MAX_VALUE;for(var o=s;o<a;o++){var O=o*E/1152,J=Z(d,O);I[n]=Math.min(I[n],J)}}for(var n=0;n<r0.PSFB21;n++){var s=B.scalefac_band.psfb21[n],a=B.scalefac_band.psfb21[n+1];p[n]=g.MAX_VALUE;for(var o=s;o<a;o++){var O=o*E/1152,J=Z(d,O);p[n]=Math.min(p[n],J)}}for(var n=0;n<r0.SBMAX_s;n++){var s=B.scalefac_band.s[n],a=B.scalefac_band.s[n+1];L[n]=g.MAX_VALUE;for(var o=s;o<a;o++){var O=o*E/384,J=Z(d,O);L[n]=Math.min(L[n],J)}L[n]*=B.scalefac_band.s[n+1]-B.scalefac_band.s[n]}for(var n=0;n<r0.PSFB12;n++){var s=B.scalefac_band.psfb12[n],a=B.scalefac_band.psfb12[n+1];K[n]=g.MAX_VALUE;for(var o=s;o<a;o++){var O=o*E/384,J=Z(d,O);K[n]=Math.min(K[n],J)}K[n]*=B.scalefac_band.s[13]-B.scalefac_band.s[12]}if(d.noATH){for(var n=0;n<r0.SBMAX_l;n++)I[n]=1e-20;for(var n=0;n<r0.PSFB21;n++)p[n]=1e-20;for(var n=0;n<r0.SBMAX_s;n++)L[n]=1e-20;for(var n=0;n<r0.PSFB12;n++)K[n]=1e-20}B.ATH.floor=10*Math.log10(Z(d,-1))}this.iteration_init=function(d){var I=d.internal_flags,p=I.l3_side,L;if(I.iteration_init_init==0){for(I.iteration_init_init=1,p.main_data_begin=0,m(d),w[0]=0,L=1;L<u;L++)w[L]=Math.pow(L,4/3);for(L=0;L<u-1;L++)P[L]=L+1-Math.pow(.5*(w[L]+w[L+1]),.75);for(P[L]=.5,L=0;L<M;L++)N[L]=Math.pow(2,(L-210)*-.1875);for(L=0;L<=M+e;L++)V[L]=Math.pow(2,(L-210-e)*.25);i0.huffman_init(I);{var K,B,E,n;for(L=d.exp_nspsytune>>2&63,L>=32&&(L-=64),K=Math.pow(10,L/4/10),L=d.exp_nspsytune>>8&63,L>=32&&(L-=64),B=Math.pow(10,L/4/10),L=d.exp_nspsytune>>14&63,L>=32&&(L-=64),E=Math.pow(10,L/4/10),L=d.exp_nspsytune>>20&63,L>=32&&(L-=64),n=E*Math.pow(10,L/4/10),L=0;L<r0.SBMAX_l;L++){var s;L<=6?s=K:L<=13?s=B:L<=20?s=E:s=n,I.nsPsy.longfact[L]=s}for(L=0;L<r0.SBMAX_s;L++){var s;L<=5?s=K:L<=10?s=B:L<=11?s=E:s=n,I.nsPsy.shortfact[L]=s}}}},this.on_pe=function(d,I,p,L,K,B){var E=d.internal_flags,n=0,s,a=$(2),o,O=new f0(n),J=Q.ResvMaxBits(d,L,O,B);n=O.bits;var D=n+J;for(D>A.MAX_BITS_PER_GRANULE&&(D=A.MAX_BITS_PER_GRANULE),s=0,o=0;o<E.channels_out;++o)p[o]=Math.min(A.MAX_BITS_PER_CHANNEL,n/E.channels_out),a[o]=0|p[o]*I[K][o]/700-p[o],a[o]>L*3/4&&(a[o]=L*3/4),a[o]<0&&(a[o]=0),a[o]+p[o]>A.MAX_BITS_PER_CHANNEL&&(a[o]=Math.max(0,A.MAX_BITS_PER_CHANNEL-p[o])),s+=a[o];if(s>J)for(o=0;o<E.channels_out;++o)a[o]=J*a[o]/s;for(o=0;o<E.channels_out;++o)p[o]+=a[o],J-=a[o];for(s=0,o=0;o<E.channels_out;++o)s+=p[o];if(s>A.MAX_BITS_PER_GRANULE){var y=0;for(o=0;o<E.channels_out;++o)p[o]*=A.MAX_BITS_PER_GRANULE,p[o]/=s,y+=p[o];q(y<=A.MAX_BITS_PER_GRANULE)}return D},this.reduce_side=function(d,I,p,L){q(L<=A.MAX_BITS_PER_GRANULE),q(d[0]+d[1]<=A.MAX_BITS_PER_GRANULE);var K=.33*(.5-I)/.5;K<0&&(K=0),K>.5&&(K=.5);var B=0|K*.5*(d[0]+d[1]);B>A.MAX_BITS_PER_CHANNEL-d[0]&&(B=A.MAX_BITS_PER_CHANNEL-d[0]),B<0&&(B=0),d[1]>=125&&(d[1]-B>125?(d[0]<p&&(d[0]+=B),d[1]-=B):(d[0]+=d[1]-125,d[1]=125)),B=d[0]+d[1],B>L&&(d[0]=L*d[0]/B,d[1]=L*d[1]/B),q(d[0]<=A.MAX_BITS_PER_CHANNEL),q(d[1]<=A.MAX_BITS_PER_CHANNEL),q(d[0]+d[1]<=A.MAX_BITS_PER_GRANULE)},this.athAdjust=function(d,I,p){var L=90.30873362,K=94.82444863,B=l0.FAST_LOG10_X(I,10),E=d*d,n=0;return B-=p,E>1e-20&&(n=1+l0.FAST_LOG10_X(E,10/L)),n<0&&(n=0),B*=n,B+=p+L-K,Math.pow(10,.1*B)},this.calc_xmin=function(d,I,p,L){var K=0,B=d.internal_flags,E,n=0,s=0,a=B.ATH,o=p.xr,O=d.VBR==k.vbr_mtrh?1:0,J=B.masking_lower;for((d.VBR==k.vbr_mtrh||d.VBR==k.vbr_mt)&&(J=1),E=0;E<p.psy_lmax;E++){var D,y,z,_0,m0,y0;d.VBR==k.vbr_rh||d.VBR==k.vbr_mtrh?y=athAdjust(a.adjust,a.l[E],a.floor):y=a.adjust*a.l[E],m0=p.width[E],z=y/m0,_0=R,y0=m0>>1,D=0;do{var A0,d0;A0=o[n]*o[n],D+=A0,_0+=A0<z?A0:z,n++,d0=o[n]*o[n],D+=d0,_0+=d0<z?d0:z,n++}while(--y0>0);if(D>y&&s++,E==r0.SBPSY_l){var I0=y*B.nsPsy.longfact[E];_0<I0&&(_0=I0)}if(O!=0&&(y=_0),!d.ATHonly){var Y0=I.en.l[E];if(Y0>0){var I0;I0=D*I.thm.l[E]*J/Y0,O!=0&&(I0*=B.nsPsy.longfact[E]),y<I0&&(y=I0)}}O!=0?L[K++]=y:L[K++]=y*B.nsPsy.longfact[E]}var n1=575;if(p.block_type!=r0.SHORT_TYPE)for(var t=576;t--!=0&&C.EQ(o[t],0);)n1=t;p.max_nonzero_coeff=n1;for(var _=p.sfb_smin;E<p.psymax;_++,E+=3){var m0,M0,E0;for(d.VBR==k.vbr_rh||d.VBR==k.vbr_mtrh?E0=athAdjust(a.adjust,a.s[_],a.floor):E0=a.adjust*a.s[_],m0=p.width[E],M0=0;M0<3;M0++){var D=0,y,z,_0,y0=m0>>1;z=E0/m0,_0=R;do{var A0,d0;A0=o[n]*o[n],D+=A0,_0+=A0<z?A0:z,n++,d0=o[n]*o[n],D+=d0,_0+=d0<z?d0:z,n++}while(--y0>0);if(D>E0&&s++,_==r0.SBPSY_s){var I0=E0*B.nsPsy.shortfact[_];_0<I0&&(_0=I0)}if(O!=0?y=_0:y=E0,!d.ATHonly&&!d.ATHshort){var Y0=I.en.s[_][M0];if(Y0>0){var I0;I0=D*I.thm.s[_][M0]*J/Y0,O!=0&&(I0*=B.nsPsy.shortfact[_]),y<I0&&(y=I0)}}O!=0?L[K++]=y:L[K++]=y*B.nsPsy.shortfact[_]}d.useTemporal&&(L[K-3]>L[K-3+1]&&(L[K-3+1]+=(L[K-3]-L[K-3+1])*B.decay),L[K-3+1]>L[K-3+2]&&(L[K-3+2]+=(L[K-3+1]-L[K-3+2])*B.decay))}return s};function r(d){this.s=d}this.calc_noise_core=function(d,I,p,L){var K=0,B=I.s,E=d.l3_enc;if(B>d.count1)for(;p--!=0;){var n;n=d.xr[B],B++,K+=n*n,n=d.xr[B],B++,K+=n*n}else if(B>d.big_values){var s=j(2);for(s[0]=0,s[1]=L;p--!=0;){var n;n=Math.abs(d.xr[B])-s[E[B]],B++,K+=n*n,n=Math.abs(d.xr[B])-s[E[B]],B++,K+=n*n}}else for(;p--!=0;){var n;n=Math.abs(d.xr[B])-w[E[B]]*L,B++,K+=n*n,n=Math.abs(d.xr[B])-w[E[B]]*L,B++,K+=n*n}return I.s=B,K},this.calc_noise=function(d,I,p,L,K){var B=0,E=0,n,s,a=0,o=0,O=0,J=-20,D=0,y=d.scalefac,z=0;for(L.over_SSD=0,n=0;n<d.psymax;n++){var _0=d.global_gain-(y[z++]+(d.preflag!=0?S[n]:0)<<d.scalefac_scale+1)-d.subblock_gain[d.window[n]]*8,m0=0;if(K!=null&&K.step[n]==_0)m0=K.noise[n],D+=d.width[n],p[B++]=m0/I[E++],m0=K.noise_log[n];else{var y0=W(_0);if(s=d.width[n]>>1,D+d.width[n]>d.max_nonzero_coeff){var A0;A0=d.max_nonzero_coeff-D+1,A0>0?s=A0>>1:s=0}var d0=new r(D);m0=this.calc_noise_core(d,d0,s,y0),D=d0.s,K!=null&&(K.step[n]=_0,K.noise[n]=m0),m0=p[B++]=m0/I[E++],m0=l0.FAST_LOG10(Math.max(m0,1e-20)),K!=null&&(K.noise_log[n]=m0)}if(K!=null&&(K.global_gain=d.global_gain),O+=m0,m0>0){var I0;I0=Math.max(0|m0*10+.5,1),L.over_SSD+=I0*I0,a++,o+=m0}J=Math.max(J,m0)}return L.over_count=a,L.tot_noise=O,L.over_noise=o,L.max_noise=J,a},this.set_pinfo=function(d,I,p,L,K){var B=d.internal_flags,E,n,s,a,o,O=I.scalefac_scale==0?.5:1,J=I.scalefac,D=j(L3Side.SFBMAX),y=j(L3Side.SFBMAX),z=new CalcNoiseResult;calc_xmin(d,p,I,D),calc_noise(I,D,y,z,null);var _0=0;for(n=I.sfb_lmax,I.block_type!=r0.SHORT_TYPE&&I.mixed_block_flag==0&&(n=22),E=0;E<n;E++){var m0=B.scalefac_band.l[E],y0=B.scalefac_band.l[E+1],A0=y0-m0;for(a=0;_0<y0;_0++)a+=I.xr[_0]*I.xr[_0];a/=A0,o=1e15,B.pinfo.en[L][K][E]=o*a,B.pinfo.xfsf[L][K][E]=o*D[E]*y[E]/A0,p.en.l[E]>0&&!d.ATHonly?a=a/p.en.l[E]:a=0,B.pinfo.thr[L][K][E]=o*Math.max(a*p.thm.l[E],B.ATH.l[E]),B.pinfo.LAMEsfb[L][K][E]=0,I.preflag!=0&&E>=11&&(B.pinfo.LAMEsfb[L][K][E]=-O*S[E]),E<r0.SBPSY_l&&(q(J[E]>=0),B.pinfo.LAMEsfb[L][K][E]-=O*J[E])}if(I.block_type==r0.SHORT_TYPE)for(n=E,E=I.sfb_smin;E<r0.SBMAX_s;E++)for(var m0=B.scalefac_band.s[E],y0=B.scalefac_band.s[E+1],A0=y0-m0,d0=0;d0<3;d0++){for(a=0,s=m0;s<y0;s++)a+=I.xr[_0]*I.xr[_0],_0++;a=Math.max(a/A0,1e-20),o=1e15,B.pinfo.en_s[L][K][3*E+d0]=o*a,B.pinfo.xfsf_s[L][K][3*E+d0]=o*D[n]*y[n]/A0,p.en.s[E][d0]>0?a=a/p.en.s[E][d0]:a=0,(d.ATHonly||d.ATHshort)&&(a=0),B.pinfo.thr_s[L][K][3*E+d0]=o*Math.max(a*p.thm.s[E][d0],B.ATH.s[E]),B.pinfo.LAMEsfb_s[L][K][3*E+d0]=-2*I.subblock_gain[d0],E<r0.SBPSY_s&&(B.pinfo.LAMEsfb_s[L][K][3*E+d0]-=O*J[n]),n++}B.pinfo.LAMEqss[L][K]=I.global_gain,B.pinfo.LAMEmainbits[L][K]=I.part2_3_length+I.part2_length,B.pinfo.LAMEsfbits[L][K]=I.part2_length,B.pinfo.over[L][K]=z.over_count,B.pinfo.max_noise[L][K]=z.max_noise*10,B.pinfo.over_noise[L][K]=z.over_noise*10,B.pinfo.tot_noise[L][K]=z.tot_noise*10,B.pinfo.over_SSD[L][K]=z.over_SSD}}return Ce=f,Ce}var Fe,ba;function qa(){if(ba)return Fe;ba=1;var c=W0,Y=c.System;c.VbrMode,c.Float,c.ShortBlock,c.Util;var k=c.Arrays;c.new_array_n,c.new_byte,c.new_double,c.new_float,c.new_float_n;var g=c.new_int;c.new_int_n;var l0=c.assert,j=t1(),$=$e,q=Ge,r0=Ya();function f0(){var A=null;this.qupvt=null,this.setModules=function(B){this.qupvt=B,A=B};function f(B){this.bits=0|B}var C=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function i0(B,E,n,s,a,o){var O=.5946/E;for(l0(B>0),B=B>>1;B--!=0;)a[o++]=O>n[s++]?0:1,a[o++]=O>n[s++]?0:1}function Q(B,E,n,s,a,o){l0(B>0),B=B>>1;var O=B%2;for(B=B>>1;B--!=0;){var J,D,y,z,_0,m0,y0,A0;J=n[s++]*E,D=n[s++]*E,_0=0|J,y=n[s++]*E,m0=0|D,z=n[s++]*E,y0=0|y,J+=A.adj43[_0],A0=0|z,D+=A.adj43[m0],a[o++]=0|J,y+=A.adj43[y0],a[o++]=0|D,z+=A.adj43[A0],a[o++]=0|y,a[o++]=0|z}if(O!=0){var J,D,_0,m0;J=n[s++]*E,D=n[s++]*E,_0=0|J,m0=0|D,J+=A.adj43[_0],D+=A.adj43[m0],a[o++]=0|J,a[o++]=0|D}}function a0(B,E,n,s,a){var o,O,J=0,D,y=0,z=0,_0=0,m0=E,y0=0,A0=m0,d0=0,I0=B,Y0=0;for(D=a!=null&&s.global_gain==a.global_gain,s.block_type==j.SHORT_TYPE?O=38:O=21,o=0;o<=O;o++){var n1=-1;if((D||s.block_type==j.NORM_TYPE)&&(n1=s.global_gain-(s.scalefac[o]+(s.preflag!=0?A.pretab[o]:0)<<s.scalefac_scale+1)-s.subblock_gain[s.window[o]]*8),l0(s.width[o]>=0),D&&a.step[o]==n1)y!=0&&(Q(y,n,I0,Y0,A0,d0),y=0),z!=0&&(i0(z,n,I0,Y0,A0,d0),z=0);else{var t=s.width[o];if(J+s.width[o]>s.max_nonzero_coeff){var _;_=s.max_nonzero_coeff-J+1,k.fill(E,s.max_nonzero_coeff,576,0),t=_,t<0&&(t=0),o=O+1}if(y==0&&z==0&&(A0=m0,d0=y0,I0=B,Y0=_0),a!=null&&a.sfb_count1>0&&o>=a.sfb_count1&&a.step[o]>0&&n1>=a.step[o]?(y!=0&&(Q(y,n,I0,Y0,A0,d0),y=0,A0=m0,d0=y0,I0=B,Y0=_0),z+=t):(z!=0&&(i0(z,n,I0,Y0,A0,d0),z=0,A0=m0,d0=y0,I0=B,Y0=_0),y+=t),t<=0){z!=0&&(i0(z,n,I0,Y0,A0,d0),z=0),y!=0&&(Q(y,n,I0,Y0,A0,d0),y=0);break}}o<=O&&(y0+=s.width[o],_0+=s.width[o],J+=s.width[o])}y!=0&&(Q(y,n,I0,Y0,A0,d0),y=0),z!=0&&(i0(z,n,I0,Y0,A0,d0),z=0)}function W(B,E,n){var s=0,a=0;do{var o=B[E++],O=B[E++];s<o&&(s=o),a<O&&(a=O)}while(E<n);return s<a&&(s=a),s}function R(B,E,n,s,a,o){var O=$.ht[s].xlen*65536+$.ht[a].xlen,J=0,D;do{var y=B[E++],z=B[E++];y!=0&&(y>14&&(y=15,J+=O),y*=16),z!=0&&(z>14&&(z=15,J+=O),y+=z),J+=$.largetbl[y]}while(E<n);return D=J&65535,J>>=16,J>D&&(J=D,s=a),o.bits+=J,s}function h(B,E,n,s){var a=0,o=$.ht[1].hlen;do{var O=B[E+0]*2+B[E+1];E+=2,a+=o[O]}while(E<n);return s.bits+=a,1}function u(B,E,n,s,a){var o=0,O,J=$.ht[s].xlen,D;s==2?D=$.table23:D=$.table56;do{var y=B[E+0]*J+B[E+1];E+=2,o+=D[y]}while(E<n);return O=o&65535,o>>=16,o>O&&(o=O,s++),a.bits+=o,s}function M(B,E,n,s,a){var o=0,O=0,J=0,D=$.ht[s].xlen,y=$.ht[s].hlen,z=$.ht[s+1].hlen,_0=$.ht[s+2].hlen;do{var m0=B[E+0]*D+B[E+1];E+=2,o+=y[m0],O+=z[m0],J+=_0[m0]}while(E<n);var y0=s;return o>O&&(o=O,y0++),o>J&&(o=J,y0=s+2),a.bits+=o,y0}var e=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function i(B,E,n,s){var a=W(B,E,n);switch(a){case 0:return a;case 1:return h(B,E,n,s);case 2:case 3:return u(B,E,n,e[a-1],s);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return M(B,E,n,e[a-1],s);default:if(a>r0.IXMAX_VAL)return s.bits=r0.LARGE_BITS,-1;a-=15;var o;for(o=24;o<32&&!($.ht[o].linmax>=a);o++);var O;for(O=o-8;O<24&&!($.ht[O].linmax>=a);O++);return R(B,E,n,O,o,s)}}this.noquant_count_bits=function(B,E,n){var s=E.l3_enc,a=Math.min(576,E.max_nonzero_coeff+2>>1<<1);for(n!=null&&(n.sfb_count1=0);a>1&&!(s[a-1]|s[a-2]);a-=2);E.count1=a;for(var o=0,O=0;a>3;a-=4){var J;if(((s[a-1]|s[a-2]|s[a-3]|s[a-4])&2147483647)>1)break;J=((s[a-4]*2+s[a-3])*2+s[a-2])*2+s[a-1],o+=$.t32l[J],O+=$.t33l[J]}var D=o;if(E.count1table_select=0,o>O&&(D=O,E.count1table_select=1),E.count1bits=D,E.big_values=a,a==0)return D;if(E.block_type==j.SHORT_TYPE)o=3*B.scalefac_band.s[3],o>E.big_values&&(o=E.big_values),O=E.big_values;else if(E.block_type==j.NORM_TYPE){if(l0(a<=576),o=E.region0_count=B.bv_scf[a-2],O=E.region1_count=B.bv_scf[a-1],l0(o+O+2<j.SBPSY_l),O=B.scalefac_band.l[o+O+2],o=B.scalefac_band.l[o+1],O<a){var y=new f(D);E.table_select[2]=i(s,O,a,y),D=y.bits}}else E.region0_count=7,E.region1_count=j.SBMAX_l-1-7-1,o=B.scalefac_band.l[8],O=a,o>O&&(o=O);if(o=Math.min(o,a),O=Math.min(O,a),l0(o>=0),l0(O>=0),0<o){var y=new f(D);E.table_select[0]=i(s,0,o,y),D=y.bits}if(o<O){var y=new f(D);E.table_select[1]=i(s,o,O,y),D=y.bits}if(B.use_best_huffman==2&&(E.part2_3_length=D,best_huffman_divide(B,E),D=E.part2_3_length),n!=null&&E.block_type==j.NORM_TYPE){for(var z=0;B.scalefac_band.l[z]<E.big_values;)z++;n.sfb_count1=z}return D},this.count_bits=function(B,E,n,s){var a=n.l3_enc,o=r0.IXMAX_VAL/A.IPOW20(n.global_gain);if(n.xrpow_max>o)return r0.LARGE_BITS;if(a0(E,a,A.IPOW20(n.global_gain),n,s),B.substep_shaping&2)for(var O=0,J=n.global_gain+n.scalefac_scale,D=.634521682242439/A.IPOW20(J),y=0;y<n.sfbmax;y++){var z=n.width[y];if(l0(z>=0),B.pseudohalf[y]==0)O+=z;else{var _0;for(_0=O,O+=z;_0<O;++_0)a[_0]=E[_0]>=D?a[_0]:0}}return this.noquant_count_bits(B,n,s)};function S(B,E,n,s,a,o,O){for(var J=E.big_values,D=0;D<=22;D++)s[D]=r0.LARGE_BITS;for(var D=0;D<16;D++){var y=B.scalefac_band.l[D+1];if(y>=J)break;var z=0,_0=new f(z),m0=i(n,0,y,_0);z=_0.bits;for(var y0=0;y0<8;y0++){var A0=B.scalefac_band.l[D+y0+2];if(A0>=J)break;var d0=z;_0=new f(d0);var I0=i(n,y,A0,_0);d0=_0.bits,s[D+y0]>d0&&(s[D+y0]=d0,a[D+y0]=D,o[D+y0]=m0,O[D+y0]=I0)}}}function V(B,E,n,s,a,o,O,J){for(var D=E.big_values,y=2;y<j.SBMAX_l+1;y++){var z=B.scalefac_band.l[y];if(z>=D)break;var _0=a[y-2]+E.count1bits;if(n.part2_3_length<=_0)break;var m0=new f(_0),y0=i(s,z,D,m0);_0=m0.bits,!(n.part2_3_length<=_0)&&(n.assign(E),n.part2_3_length=_0,n.region0_count=o[y-2],n.region1_count=y-2-o[y-2],n.table_select[0]=O[y-2],n.table_select[1]=J[y-2],n.table_select[2]=y0)}}this.best_huffman_divide=function(B,E){var n=new q,s=E.l3_enc,a=g(23),o=g(23),O=g(23),J=g(23);if(!(E.block_type==j.SHORT_TYPE&&B.mode_gr==1)){n.assign(E),E.block_type==j.NORM_TYPE&&(S(B,E,s,a,o,O,J),V(B,n,E,s,a,o,O,J));var D=n.big_values;if(!(D==0||(s[D-2]|s[D-1])>1)&&(D=E.count1+2,!(D>576))){n.assign(E),n.count1=D;var y=0,z=0;for(l0(D<=576);D>n.big_values;D-=4){var _0=((s[D-4]*2+s[D-3])*2+s[D-2])*2+s[D-1];y+=$.t32l[_0],z+=$.t33l[_0]}if(n.big_values=D,n.count1table_select=0,y>z&&(y=z,n.count1table_select=1),n.count1bits=y,n.block_type==j.NORM_TYPE)V(B,n,E,s,a,o,O,J);else{if(n.part2_3_length=y,y=B.scalefac_band.l[8],y>D&&(y=D),y>0){var m0=new f(n.part2_3_length);n.table_select[0]=i(s,0,y,m0),n.part2_3_length=m0.bits}if(D>y){var m0=new f(n.part2_3_length);n.table_select[1]=i(s,y,D,m0),n.part2_3_length=m0.bits}E.part2_3_length>n.part2_3_length&&E.assign(n)}}}};var N=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],w=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],P=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],Z=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];f0.slen1_tab=P,f0.slen2_tab=Z;function m(B,E){for(var n,s=E.tt[1][B],a=E.tt[0][B],o=0;o<$.scfsi_band.length-1;o++){for(n=$.scfsi_band[o];n<$.scfsi_band[o+1]&&!(a.scalefac[n]!=s.scalefac[n]&&s.scalefac[n]>=0);n++);if(n==$.scfsi_band[o+1]){for(n=$.scfsi_band[o];n<$.scfsi_band[o+1];n++)s.scalefac[n]=-1;E.scfsi[B][o]=1}}var O=0,J=0;for(n=0;n<11;n++)s.scalefac[n]!=-1&&(J++,O<s.scalefac[n]&&(O=s.scalefac[n]));for(var D=0,y=0;n<j.SBPSY_l;n++)s.scalefac[n]!=-1&&(y++,D<s.scalefac[n]&&(D=s.scalefac[n]));for(var o=0;o<16;o++)if(O<N[o]&&D<w[o]){var z=P[o]*J+Z[o]*y;s.part2_length>z&&(s.part2_length=z,s.scalefac_compress=o)}}this.best_scalefac_store=function(B,E,n,s){var a=s.tt[E][n],o,O,J,D,y=0;for(J=0,o=0;o<a.sfbmax;o++){var z=a.width[o];for(l0(z>=0),J+=z,D=-z;D<0&&a.l3_enc[D+J]==0;D++);D==0&&(a.scalefac[o]=y=-2)}if(a.scalefac_scale==0&&a.preflag==0){var _0=0;for(o=0;o<a.sfbmax;o++)a.scalefac[o]>0&&(_0|=a.scalefac[o]);if(!(_0&1)&&_0!=0){for(o=0;o<a.sfbmax;o++)a.scalefac[o]>0&&(a.scalefac[o]>>=1);a.scalefac_scale=y=1}}if(a.preflag==0&&a.block_type!=j.SHORT_TYPE&&B.mode_gr==2){for(o=11;o<j.SBPSY_l&&!(a.scalefac[o]<A.pretab[o]&&a.scalefac[o]!=-2);o++);if(o==j.SBPSY_l){for(o=11;o<j.SBPSY_l;o++)a.scalefac[o]>0&&(a.scalefac[o]-=A.pretab[o]);a.preflag=y=1}}for(O=0;O<4;O++)s.scfsi[n][O]=0;for(B.mode_gr==2&&E==1&&s.tt[0][n].block_type!=j.SHORT_TYPE&&s.tt[1][n].block_type!=j.SHORT_TYPE&&(m(n,s),y=0),o=0;o<a.sfbmax;o++)a.scalefac[o]==-2&&(a.scalefac[o]=0);y!=0&&(B.mode_gr==2?this.scale_bitcount(a):this.scale_bitcount_lsf(B,a))};function r(B,E){for(var n=0;n<E;++n)if(B[n]<0)return!1;return!0}var d=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],I=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],p=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(B){var E,n,s=0,a=0,o,O=B.scalefac;if(l0(r(O,B.sfbmax)),B.block_type==j.SHORT_TYPE)o=d,B.mixed_block_flag!=0&&(o=I);else if(o=p,B.preflag==0){for(n=11;n<j.SBPSY_l&&!(O[n]<A.pretab[n]);n++);if(n==j.SBPSY_l)for(B.preflag=1,n=11;n<j.SBPSY_l;n++)O[n]-=A.pretab[n]}for(n=0;n<B.sfbdivide;n++)s<O[n]&&(s=O[n]);for(;n<B.sfbmax;n++)a<O[n]&&(a=O[n]);for(B.part2_length=r0.LARGE_BITS,E=0;E<16;E++)s<N[E]&&a<w[E]&&B.part2_length>o[E]&&(B.part2_length=o[E],B.scalefac_compress=E);return B.part2_length==r0.LARGE_BITS};var L=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(B,E){var n,s,a,o,O,J,D,y,z=g(4),_0=E.scalefac;for(E.preflag!=0?n=2:n=0,D=0;D<4;D++)z[D]=0;if(E.block_type==j.SHORT_TYPE){s=1;var m0=A.nr_of_sfb_block[n][s];for(y=0,a=0;a<4;a++)for(o=m0[a]/3,D=0;D<o;D++,y++)for(O=0;O<3;O++)_0[y*3+O]>z[a]&&(z[a]=_0[y*3+O])}else{s=0;var m0=A.nr_of_sfb_block[n][s];for(y=0,a=0;a<4;a++)for(o=m0[a],D=0;D<o;D++,y++)_0[y]>z[a]&&(z[a]=_0[y])}for(J=!1,a=0;a<4;a++)z[a]>L[n][a]&&(J=!0);if(!J){var y0,A0,d0,I0;for(E.sfb_partition_table=A.nr_of_sfb_block[n][s],a=0;a<4;a++)E.slen[a]=K[z[a]];switch(y0=E.slen[0],A0=E.slen[1],d0=E.slen[2],I0=E.slen[3],n){case 0:E.scalefac_compress=(y0*5+A0<<4)+(d0<<2)+I0;break;case 1:E.scalefac_compress=400+(y0*5+A0<<2)+d0;break;case 2:E.scalefac_compress=500+y0*3+A0;break;default:Y.err.printf(`intensity stereo not implemented yet
`);break}}if(!J)for(l0(E.sfb_partition_table!=null),E.part2_length=0,a=0;a<4;a++)E.part2_length+=E.slen[a]*E.sfb_partition_table[a];return J};var K=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(B){for(var E=2;E<=576;E+=2){for(var n=0,s;B.scalefac_band.l[++n]<E;);for(s=C[n][0];B.scalefac_band.l[s+1]>E;)s--;for(s<0&&(s=C[n][0]),B.bv_scf[E-2]=s,s=C[n][1];B.scalefac_band.l[s+B.bv_scf[E-2]+2]>E;)s--;s<0&&(s=C[n][1]),B.bv_scf[E-1]=s}}}return Fe=f0,Fe}var ke,ca;function Pe(){if(ca)return ke;ca=1;var c=W0,Y=c.System;c.VbrMode,c.Float,c.ShortBlock,c.Util;var k=c.Arrays;c.new_array_n;var g=c.new_byte;c.new_double,c.new_float;var l0=c.new_float_n,j=c.new_int;c.new_int_n;var $=c.assert,q=qa(),r0=$e,f0=t1(),A=Ae;f.EQ=function(C,i0){return Math.abs(C)>Math.abs(i0)?Math.abs(C-i0)<=Math.abs(C)*1e-6:Math.abs(C-i0)<=Math.abs(i0)*1e-6},f.NEQ=function(C,i0){return!f.EQ(C,i0)};function f(){var C=Ue(),i0=this,Q=32773,a0=32,W=null,R=null,h=null,u=null;this.setModules=function(n,s,a,o){W=n,R=s,h=a,u=o};var M=null,e=0,i=0,S=0;this.getframebits=function(n){var s=n.internal_flags,a;s.bitrate_index!=0?a=r0.bitrate_table[n.version][s.bitrate_index]:a=n.brate,$(8<=a&&a<=640);var o=0|(n.version+1)*72e3*a/n.out_samplerate+s.padding;return 8*o};function V(n){Y.arraycopy(n.header[n.w_ptr].buf,0,M,i,n.sideinfo_len),i+=n.sideinfo_len,e+=n.sideinfo_len*8,n.w_ptr=n.w_ptr+1&A.MAX_HEADER_BUF-1}function N(n,s,a){for($(a<a0-2);a>0;){var o;S==0&&(S=8,i++,$(i<C.LAME_MAXMP3BUFFER),$(n.header[n.w_ptr].write_timing>=e),n.header[n.w_ptr].write_timing==e&&V(n),M[i]=0),o=Math.min(a,S),a-=o,S-=o,$(a<a0),$(S<a0),M[i]|=s>>a<<S,e+=o}}function w(n,s,a){for($(a<a0-2);a>0;){var o;S==0&&(S=8,i++,$(i<C.LAME_MAXMP3BUFFER),M[i]=0),o=Math.min(a,S),a-=o,S-=o,$(a<a0),$(S<a0),M[i]|=s>>a<<S,e+=o}}function P(n,s){var a=n.internal_flags,o;if($(s>=0),s>=8&&(N(a,76,8),s-=8),s>=8&&(N(a,65,8),s-=8),s>=8&&(N(a,77,8),s-=8),s>=8&&(N(a,69,8),s-=8),s>=32){var O=h.getLameShortVersion();if(s>=32)for(o=0;o<O.length&&s>=8;++o)s-=8,N(a,O.charAt(o),8)}for(;s>=1;s-=1)N(a,a.ancillary_flag,1),a.ancillary_flag^=n.disable_reservoir?0:1;$(s==0)}function Z(n,s,a){for(var o=n.header[n.h_ptr].ptr;a>0;){var O=Math.min(a,8-(o&7));a-=O,$(a<a0),n.header[n.h_ptr].buf[o>>3]|=s>>a<<8-(o&7)-O,o+=O}n.header[n.h_ptr].ptr=o}function m(n,s){n<<=8;for(var a=0;a<8;a++)n<<=1,s<<=1,(s^n)&65536&&(s^=Q);return s}this.CRC_writeheader=function(n,s){var a=65535;a=m(s[2]&255,a),a=m(s[3]&255,a);for(var o=6;o<n.sideinfo_len;o++)a=m(s[o]&255,a);s[4]=byte(a>>8),s[5]=byte(a&255)};function r(n,s){var a=n.internal_flags,o,O,J;if(o=a.l3_side,a.header[a.h_ptr].ptr=0,k.fill(a.header[a.h_ptr].buf,0,a.sideinfo_len,0),n.out_samplerate<16e3?Z(a,4094,12):Z(a,4095,12),Z(a,n.version,1),Z(a,1,2),Z(a,n.error_protection?0:1,1),Z(a,a.bitrate_index,4),Z(a,a.samplerate_index,2),Z(a,a.padding,1),Z(a,n.extension,1),Z(a,n.mode.ordinal(),2),Z(a,a.mode_ext,2),Z(a,n.copyright,1),Z(a,n.original,1),Z(a,n.emphasis,2),n.error_protection&&Z(a,0,16),n.version==1){for($(o.main_data_begin>=0),Z(a,o.main_data_begin,9),a.channels_out==2?Z(a,o.private_bits,3):Z(a,o.private_bits,5),J=0;J<a.channels_out;J++){var D;for(D=0;D<4;D++)Z(a,o.scfsi[J][D],1)}for(O=0;O<2;O++)for(J=0;J<a.channels_out;J++){var y=o.tt[O][J];Z(a,y.part2_3_length+y.part2_length,12),Z(a,y.big_values/2,9),Z(a,y.global_gain,8),Z(a,y.scalefac_compress,4),y.block_type!=f0.NORM_TYPE?(Z(a,1,1),Z(a,y.block_type,2),Z(a,y.mixed_block_flag,1),y.table_select[0]==14&&(y.table_select[0]=16),Z(a,y.table_select[0],5),y.table_select[1]==14&&(y.table_select[1]=16),Z(a,y.table_select[1],5),Z(a,y.subblock_gain[0],3),Z(a,y.subblock_gain[1],3),Z(a,y.subblock_gain[2],3)):(Z(a,0,1),y.table_select[0]==14&&(y.table_select[0]=16),Z(a,y.table_select[0],5),y.table_select[1]==14&&(y.table_select[1]=16),Z(a,y.table_select[1],5),y.table_select[2]==14&&(y.table_select[2]=16),Z(a,y.table_select[2],5),$(0<=y.region0_count&&y.region0_count<16),$(0<=y.region1_count&&y.region1_count<8),Z(a,y.region0_count,4),Z(a,y.region1_count,3)),Z(a,y.preflag,1),Z(a,y.scalefac_scale,1),Z(a,y.count1table_select,1)}}else for($(o.main_data_begin>=0),Z(a,o.main_data_begin,8),Z(a,o.private_bits,a.channels_out),O=0,J=0;J<a.channels_out;J++){var y=o.tt[O][J];Z(a,y.part2_3_length+y.part2_length,12),Z(a,y.big_values/2,9),Z(a,y.global_gain,8),Z(a,y.scalefac_compress,9),y.block_type!=f0.NORM_TYPE?(Z(a,1,1),Z(a,y.block_type,2),Z(a,y.mixed_block_flag,1),y.table_select[0]==14&&(y.table_select[0]=16),Z(a,y.table_select[0],5),y.table_select[1]==14&&(y.table_select[1]=16),Z(a,y.table_select[1],5),Z(a,y.subblock_gain[0],3),Z(a,y.subblock_gain[1],3),Z(a,y.subblock_gain[2],3)):(Z(a,0,1),y.table_select[0]==14&&(y.table_select[0]=16),Z(a,y.table_select[0],5),y.table_select[1]==14&&(y.table_select[1]=16),Z(a,y.table_select[1],5),y.table_select[2]==14&&(y.table_select[2]=16),Z(a,y.table_select[2],5),$(0<=y.region0_count&&y.region0_count<16),$(0<=y.region1_count&&y.region1_count<8),Z(a,y.region0_count,4),Z(a,y.region1_count,3)),Z(a,y.scalefac_scale,1),Z(a,y.count1table_select,1)}n.error_protection&&CRC_writeheader(a,a.header[a.h_ptr].buf);{var z=a.h_ptr;$(a.header[z].ptr==a.sideinfo_len*8),a.h_ptr=z+1&A.MAX_HEADER_BUF-1,a.header[a.h_ptr].write_timing=a.header[z].write_timing+s,a.h_ptr==a.w_ptr&&Y.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function d(n,s){var a=r0.ht[s.count1table_select+32],o,O=0,J=s.big_values,D=s.big_values;for($(s.count1table_select<2),o=(s.count1-s.big_values)/4;o>0;--o){var y=0,z=0,_0;_0=s.l3_enc[J+0],_0!=0&&(z+=8,s.xr[D+0]<0&&y++,$(_0<=1)),_0=s.l3_enc[J+1],_0!=0&&(z+=4,y*=2,s.xr[D+1]<0&&y++,$(_0<=1)),_0=s.l3_enc[J+2],_0!=0&&(z+=2,y*=2,s.xr[D+2]<0&&y++,$(_0<=1)),_0=s.l3_enc[J+3],_0!=0&&(z++,y*=2,s.xr[D+3]<0&&y++,$(_0<=1)),J+=4,D+=4,N(n,y+a.table[z],a.hlen[z]),O+=a.hlen[z]}return O}function I(n,s,a,o,O){var J=r0.ht[s],D=0;if($(s<32),s==0)return D;for(var y=a;y<o;y+=2){var z=0,_0=0,m0=J.xlen,y0=J.xlen,A0=0,d0=O.l3_enc[y],I0=O.l3_enc[y+1];if(d0!=0&&(O.xr[y]<0&&A0++,z--),s>15){if(d0>14){var Y0=d0-15;$(Y0<=J.linmax),A0|=Y0<<1,_0=m0,d0=15}if(I0>14){var n1=I0-15;$(n1<=J.linmax),A0<<=m0,A0|=n1,_0+=m0,I0=15}y0=16}I0!=0&&(A0<<=1,O.xr[y+1]<0&&A0++,z--),$((d0|I0)<16),d0=d0*y0+I0,_0-=z,z+=J.hlen[d0],$(z<=a0),$(_0<=a0),N(n,J.table[d0],z),N(n,A0,_0),D+=z+_0}return D}function p(n,s){var a=3*n.scalefac_band.s[3];a>s.big_values&&(a=s.big_values);var o=I(n,s.table_select[0],0,a,s);return o+=I(n,s.table_select[1],a,s.big_values,s),o}function L(n,s){var a,o,O,J;a=s.big_values,$(0<=a&&a<=576);var D=s.region0_count+1;return $(0<=D),$(D<n.scalefac_band.l.length),O=n.scalefac_band.l[D],D+=s.region1_count+1,$(0<=D),$(D<n.scalefac_band.l.length),J=n.scalefac_band.l[D],O>a&&(O=a),J>a&&(J=a),o=I(n,s.table_select[0],0,O,s),o+=I(n,s.table_select[1],O,J,s),o+=I(n,s.table_select[2],J,a,s),o}function K(n){var s,a,o,O,J=0,D=n.internal_flags,y=D.l3_side;if(n.version==1)for(s=0;s<2;s++)for(a=0;a<D.channels_out;a++){var z=y.tt[s][a],_0=q.slen1_tab[z.scalefac_compress],m0=q.slen2_tab[z.scalefac_compress];for(O=0,o=0;o<z.sfbdivide;o++)z.scalefac[o]!=-1&&(N(D,z.scalefac[o],_0),O+=_0);for(;o<z.sfbmax;o++)z.scalefac[o]!=-1&&(N(D,z.scalefac[o],m0),O+=m0);$(O==z.part2_length),z.block_type==f0.SHORT_TYPE?O+=p(D,z):O+=L(D,z),O+=d(D,z),$(O==z.part2_3_length+z.part2_length),J+=O}else for(s=0,a=0;a<D.channels_out;a++){var z=y.tt[s][a],y0,A0,d0=0;if($(z.sfb_partition_table!=null),O=0,o=0,A0=0,z.block_type==f0.SHORT_TYPE){for(;A0<4;A0++){var I0=z.sfb_partition_table[A0]/3,Y0=z.slen[A0];for(y0=0;y0<I0;y0++,o++)N(D,Math.max(z.scalefac[o*3+0],0),Y0),N(D,Math.max(z.scalefac[o*3+1],0),Y0),N(D,Math.max(z.scalefac[o*3+2],0),Y0),d0+=3*Y0}O+=p(D,z)}else{for(;A0<4;A0++){var I0=z.sfb_partition_table[A0],Y0=z.slen[A0];for(y0=0;y0<I0;y0++,o++)N(D,Math.max(z.scalefac[o],0),Y0),d0+=Y0}O+=L(D,z)}O+=d(D,z),$(O==z.part2_3_length),$(d0==z.part2_length),J+=d0+O}return J}function B(){this.total=0}function E(n,s){var a=n.internal_flags,o,O,J,D,y;return y=a.w_ptr,D=a.h_ptr-1,D==-1&&(D=A.MAX_HEADER_BUF-1),o=a.header[D].write_timing-e,s.total=o,o>=0&&(O=1+D-y,D<y&&(O=1+D-y+A.MAX_HEADER_BUF),o-=O*8*a.sideinfo_len),J=i0.getframebits(n),o+=J,s.total+=J,s.total%8!=0?s.total=1+s.total/8:s.total=s.total/8,s.total+=i+1,o<0&&Y.err.println(`strange error flushing buffer ... 
`),o}this.flush_bitstream=function(n){var s=n.internal_flags,a,o,O=s.h_ptr-1;if(O==-1&&(O=A.MAX_HEADER_BUF-1),a=s.l3_side,!((o=E(n,new B))<0)){if(P(n,o),$(s.header[O].write_timing+this.getframebits(n)==e),s.ResvSize=0,a.main_data_begin=0,s.findReplayGain){var J=W.GetTitleGain(s.rgdata);$(NEQ(J,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),s.RadioGain=Math.floor(J*10+.5)|0}s.findPeakSample&&(s.noclipGainChange=Math.ceil(Math.log10(s.PeakSample/32767)*20*10)|0,s.noclipGainChange>0&&(EQ(n.scale,1)||EQ(n.scale,0))?s.noclipScale=Math.floor(32767/s.PeakSample*100)/100:s.noclipScale=-1)}},this.add_dummy_byte=function(n,s,a){for(var o=n.internal_flags,O;a-- >0;)for(w(o,s,8),O=0;O<A.MAX_HEADER_BUF;++O)o.header[O].write_timing+=8},this.format_bitstream=function(n){var s=n.internal_flags,a;a=s.l3_side;var o=this.getframebits(n);P(n,a.resvDrain_pre),r(n,o);var O=8*s.sideinfo_len;if(O+=K(n),P(n,a.resvDrain_post),O+=a.resvDrain_post,a.main_data_begin+=(o-O)/8,E(n,new B)!=s.ResvSize&&Y.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),a.main_data_begin*8!=s.ResvSize&&(Y.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*a.main_data_begin,s.ResvSize,a.resvDrain_post,a.resvDrain_pre,8*s.sideinfo_len,O-a.resvDrain_post-8*s.sideinfo_len,O,O%8,o),Y.err.println("This is a fatal error.  It has several possible causes:"),Y.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),Y.err.println(" 9%%  Your system is overclocked"),Y.err.println(" 1%%  bug in LAME encoding library"),s.ResvSize=a.main_data_begin*8),$(e%8==0),e>1e9){var J;for(J=0;J<A.MAX_HEADER_BUF;++J)s.header[J].write_timing-=e;e=0}return 0},this.copy_buffer=function(n,s,a,o,O){var J=i+1;if(J<=0)return 0;if(o!=0&&J>o)return-1;if(Y.arraycopy(M,0,s,a,J),i=-1,S=0,O!=0){var D=j(1);if(D[0]=n.nMusicCRC,u.updateMusicCRC(D,s,a,J),n.nMusicCRC=D[0],J>0&&(n.VBR_seek_table.nBytesWritten+=J),n.decode_on_the_fly){for(var y=l0([2,1152]),z=J,_0=-1,m0;_0!=0;)if(_0=R.hip_decode1_unclipped(n.hip,s,a,z,y[0],y[1]),z=0,_0==-1&&(_0=0),_0>0){if($(_0<=1152),n.findPeakSample){for(m0=0;m0<_0;m0++)y[0][m0]>n.PeakSample?n.PeakSample=y[0][m0]:-y[0][m0]>n.PeakSample&&(n.PeakSample=-y[0][m0]);if(n.channels_out>1)for(m0=0;m0<_0;m0++)y[1][m0]>n.PeakSample?n.PeakSample=y[1][m0]:-y[1][m0]>n.PeakSample&&(n.PeakSample=-y[1][m0])}if(n.findReplayGain&&W.AnalyzeSamples(n.rgdata,y[0],0,y[1],0,_0,n.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return J},this.init_bit_stream_w=function(n){M=g(C.LAME_MAXMP3BUFFER),n.h_ptr=n.w_ptr=0,n.header[n.h_ptr].write_timing=0,i=-1,S=0,e=0}}return ke=f,ke}var Xe,Sa;function Ue(){if(Sa)return Xe;Sa=1;var c=W0,Y=c.System,k=c.VbrMode;c.Float;var g=c.ShortBlock;c.Util,c.Arrays,c.new_array_n,c.new_byte,c.new_double;var l0=c.new_float;c.new_float_n,c.new_int;var j=c.new_int_n,$=c.new_short_n,q=c.assert,r0=ga,f0=rr,A=Ae,f=Br,C=wr,i0=Hr,Q=Pe(),a0=$e,W=t1();function R(){var h=_e,u=this,M=128*1024;R.V9=410,R.V8=420,R.V7=430,R.V6=440,R.V5=450,R.V4=460,R.V3=470,R.V2=480,R.V1=490,R.V0=500,R.R3MIX=1e3,R.STANDARD=1001,R.EXTREME=1002,R.INSANE=1003,R.STANDARD_FAST=1004,R.EXTREME_FAST=1005,R.MEDIUM=1006,R.MEDIUM_FAST=1007;var e=16384+M;R.LAME_MAXMP3BUFFER=e;var i,S,V,N,w,P=new r0,Z,m,r;this.enc=new W,this.setModules=function(t,_,M0,E0,O0,H0,w0,T0,F0){i=t,S=_,V=M0,N=E0,w=O0,Z=H0,m=T0,r=F0,this.enc.setModules(S,P,N,Z)};function d(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=l0(W.SBMAX_l),this.bo_s_weight=l0(W.SBMAX_s)}function I(){this.lowerlimit=0}function p(t,_){this.lowpass=_}var L=4294479419;function K(t){var _;return t.class_id=L,_=t.internal_flags=new A,t.mode=h.NOT_SET,t.original=1,t.in_samplerate=44100,t.num_channels=2,t.num_samples=-1,t.bWriteVbrTag=!0,t.quality=-1,t.short_blocks=null,_.subblock_gain=-1,t.lowpassfreq=0,t.highpassfreq=0,t.lowpasswidth=-1,t.highpasswidth=-1,t.VBR=k.vbr_off,t.VBR_q=4,t.ATHcurve=-1,t.VBR_mean_bitrate_kbps=128,t.VBR_min_bitrate_kbps=0,t.VBR_max_bitrate_kbps=0,t.VBR_hard_min=0,_.VBR_min_bitrate=1,_.VBR_max_bitrate=13,t.quant_comp=-1,t.quant_comp_short=-1,t.msfix=-1,_.resample_ratio=1,_.OldValue[0]=180,_.OldValue[1]=180,_.CurrentStep[0]=4,_.CurrentStep[1]=4,_.masking_lower=1,_.nsPsy.attackthre=-1,_.nsPsy.attackthre_s=-1,t.scale=-1,t.athaa_type=-1,t.ATHtype=-1,t.athaa_loudapprox=-1,t.athaa_sensitivity=0,t.useTemporal=null,t.interChRatio=-1,_.mf_samples_to_encode=W.ENCDELAY+W.POSTDELAY,t.encoder_padding=0,_.mf_size=W.ENCDELAY-W.MDCTDELAY,t.findReplayGain=!1,t.decode_on_the_fly=!1,_.decode_on_the_fly=!1,_.findReplayGain=!1,_.findPeakSample=!1,_.RadioGain=0,_.AudiophileGain=0,_.noclipGainChange=0,_.noclipScale=-1,t.preset=0,t.write_id3tag_automatic=!0,0}this.lame_init=function(){var t=new f0;return K(t),t.lame_allocated_gfp=1,t};function B(t){return t>1?0:t<=0?1:Math.cos(Math.PI/2*t)}this.nearestBitrateFullIndex=function(t){var _=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],M0=0,E0=0,O0=0,H0=0;H0=_[16],O0=16,E0=_[16],M0=16;for(var w0=0;w0<16;w0++)if(Math.max(t,_[w0+1])!=t){H0=_[w0+1],O0=w0+1,E0=_[w0],M0=w0;break}return H0-t>t-E0?M0:O0};function E(t,_){var M0=44100;return _>=48e3?M0=48e3:_>=44100?M0=44100:_>=32e3?M0=32e3:_>=24e3?M0=24e3:_>=22050?M0=22050:_>=16e3?M0=16e3:_>=12e3?M0=12e3:_>=11025?M0=11025:_>=8e3&&(M0=8e3),t==-1?M0:(t<=15960&&(M0=44100),t<=15250&&(M0=32e3),t<=11220&&(M0=24e3),t<=9970&&(M0=22050),t<=7230&&(M0=16e3),t<=5420&&(M0=12e3),t<=4510&&(M0=11025),t<=3970&&(M0=8e3),_<M0?_>44100?48e3:_>32e3?44100:_>24e3?32e3:_>22050?24e3:_>16e3?22050:_>12e3?16e3:_>11025?12e3:_>8e3?11025:8e3:M0)}function n(t,_){switch(t){case 44100:return _.version=1,0;case 48e3:return _.version=1,1;case 32e3:return _.version=1,2;case 22050:return _.version=0,0;case 24e3:return _.version=0,1;case 16e3:return _.version=0,2;case 11025:return _.version=0,0;case 12e3:return _.version=0,1;case 8e3:return _.version=0,2;default:return _.version=0,-1}}function s(t,_,M0){M0<16e3&&(_=2);for(var E0=a0.bitrate_table[_][1],O0=2;O0<=14;O0++)a0.bitrate_table[_][O0]>0&&Math.abs(a0.bitrate_table[_][O0]-t)<Math.abs(E0-t)&&(E0=a0.bitrate_table[_][O0]);return E0}function a(t,_,M0){M0<16e3&&(_=2);for(var E0=0;E0<=14;E0++)if(a0.bitrate_table[_][E0]>0&&a0.bitrate_table[_][E0]==t)return E0;return-1}function o(t,_){var M0=[new p(8,2e3),new p(16,3700),new p(24,3900),new p(32,5500),new p(40,7e3),new p(48,7500),new p(56,1e4),new p(64,11e3),new p(80,13500),new p(96,15100),new p(112,15600),new p(128,17e3),new p(160,17500),new p(192,18600),new p(224,19400),new p(256,19700),new p(320,20500)],E0=u.nearestBitrateFullIndex(_);t.lowerlimit=M0[E0].lowpass}function O(t){var _=t.internal_flags,M0=32,E0=-1;if(_.lowpass1>0){for(var O0=999,H0=0;H0<=31;H0++){var w0=H0/31;w0>=_.lowpass2&&(M0=Math.min(M0,H0)),_.lowpass1<w0&&w0<_.lowpass2&&(O0=Math.min(O0,H0))}O0==999?_.lowpass1=(M0-.75)/31:_.lowpass1=(O0-.75)/31,_.lowpass2=M0/31}if(_.highpass2>0&&_.highpass2<.9*(.75/31)&&(_.highpass1=0,_.highpass2=0,Y.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),_.highpass2>0){for(var T0=-1,H0=0;H0<=31;H0++){var w0=H0/31;w0<=_.highpass1&&(E0=Math.max(E0,H0)),_.highpass1<w0&&w0<_.highpass2&&(T0=Math.max(T0,H0))}_.highpass1=E0/31,T0==-1?_.highpass2=(E0+.75)/31:_.highpass2=(T0+.75)/31}for(var H0=0;H0<32;H0++){var F0,L0,w0=H0/31;_.highpass2>_.highpass1?F0=B((_.highpass2-w0)/(_.highpass2-_.highpass1+1e-20)):F0=1,_.lowpass2>_.lowpass1?L0=B((w0-_.lowpass1)/(_.lowpass2-_.lowpass1+1e-20)):L0=1,_.amp_filter[H0]=F0*L0}}function J(t){var _=t.internal_flags;switch(t.quality){default:case 9:_.psymodel=0,_.noise_shaping=0,_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.use_best_huffman=0,_.full_outer_loop=0;break;case 8:t.quality=7;case 7:_.psymodel=1,_.noise_shaping=0,_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.use_best_huffman=0,_.full_outer_loop=0;break;case 6:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=0,_.full_outer_loop=0;break;case 5:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=0,_.full_outer_loop=0;break;case 4:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 3:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=1,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 2:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.substep_shaping==0&&(_.substep_shaping=2),_.noise_shaping_amp=1,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 1:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.substep_shaping==0&&(_.substep_shaping=2),_.noise_shaping_amp=2,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 0:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.substep_shaping==0&&(_.substep_shaping=2),_.noise_shaping_amp=2,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break}}function D(t){var _=t.internal_flags;t.frameNum=0,t.write_id3tag_automatic&&m.id3tag_write_v2(t),_.bitrate_stereoMode_Hist=j([16,5]),_.bitrate_blockType_Hist=j([16,6]),_.PeakSample=0,t.bWriteVbrTag&&Z.InitVbrTag(t)}this.lame_init_params=function(t){var _=t.internal_flags;if(_.Class_ID=0,_.ATH==null&&(_.ATH=new f),_.PSY==null&&(_.PSY=new d),_.rgdata==null&&(_.rgdata=new C),_.channels_in=t.num_channels,_.channels_in==1&&(t.mode=h.MONO),_.channels_out=t.mode==h.MONO?1:2,_.mode_ext=W.MPG_MD_MS_LR,t.mode==h.MONO&&(t.force_ms=!1),t.VBR==k.vbr_off&&t.VBR_mean_bitrate_kbps!=128&&t.brate==0&&(t.brate=t.VBR_mean_bitrate_kbps),t.VBR==k.vbr_off||t.VBR==k.vbr_mtrh||t.VBR==k.vbr_mt||(t.free_format=!1),t.VBR==k.vbr_off&&t.brate==0&&Q.EQ(t.compression_ratio,0)&&(t.compression_ratio=11.025),t.VBR==k.vbr_off&&t.compression_ratio>0&&(t.out_samplerate==0&&(t.out_samplerate=map2MP3Frequency(int(.97*t.in_samplerate))),t.brate=0|t.out_samplerate*16*_.channels_out/(1e3*t.compression_ratio),_.samplerate_index=n(t.out_samplerate,t),t.free_format||(t.brate=s(t.brate,t.version,t.out_samplerate))),t.out_samplerate!=0&&(t.out_samplerate<16e3?(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,64)):t.out_samplerate<32e3?(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,160)):(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,32),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,320))),t.lowpassfreq==0){var M0=16e3;switch(t.VBR){case k.vbr_off:{var E0=new I;o(E0,t.brate),M0=E0.lowerlimit;break}case k.vbr_abr:{var E0=new I;o(E0,t.VBR_mean_bitrate_kbps),M0=E0.lowerlimit;break}case k.vbr_rh:{var O0=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=t.VBR_q&&t.VBR_q<=9){var H0=O0[t.VBR_q],w0=O0[t.VBR_q+1],T0=t.VBR_q_frac;M0=linear_int(H0,w0,T0)}else M0=19500;break}default:{var O0=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=t.VBR_q&&t.VBR_q<=9){var H0=O0[t.VBR_q],w0=O0[t.VBR_q+1],T0=t.VBR_q_frac;M0=linear_int(H0,w0,T0)}else M0=19500}}t.mode==h.MONO&&(t.VBR==k.vbr_off||t.VBR==k.vbr_abr)&&(M0*=1.5),t.lowpassfreq=M0|0}if(t.out_samplerate==0&&(2*t.lowpassfreq>t.in_samplerate&&(t.lowpassfreq=t.in_samplerate/2),t.out_samplerate=E(t.lowpassfreq|0,t.in_samplerate)),t.lowpassfreq=Math.min(20500,t.lowpassfreq),t.lowpassfreq=Math.min(t.out_samplerate/2,t.lowpassfreq),t.VBR==k.vbr_off&&(t.compression_ratio=t.out_samplerate*16*_.channels_out/(1e3*t.brate)),t.VBR==k.vbr_abr&&(t.compression_ratio=t.out_samplerate*16*_.channels_out/(1e3*t.VBR_mean_bitrate_kbps)),t.bWriteVbrTag||(t.findReplayGain=!1,t.decode_on_the_fly=!1,_.findPeakSample=!1),_.findReplayGain=t.findReplayGain,_.decode_on_the_fly=t.decode_on_the_fly,_.decode_on_the_fly&&(_.findPeakSample=!0),_.findReplayGain&&i.InitGainAnalysis(_.rgdata,t.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return t.internal_flags=null,-6;switch(_.decode_on_the_fly&&!t.decode_only&&(_.hip!=null&&r.hip_decode_exit(_.hip),_.hip=r.hip_decode_init()),_.mode_gr=t.out_samplerate<=24e3?1:2,t.framesize=576*_.mode_gr,t.encoder_delay=W.ENCDELAY,_.resample_ratio=t.in_samplerate/t.out_samplerate,t.VBR){case k.vbr_mt:case k.vbr_rh:case k.vbr_mtrh:{var F0=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];t.compression_ratio=F0[t.VBR_q]}break;case k.vbr_abr:t.compression_ratio=t.out_samplerate*16*_.channels_out/(1e3*t.VBR_mean_bitrate_kbps);break;default:t.compression_ratio=t.out_samplerate*16*_.channels_out/(1e3*t.brate);break}if(t.mode==h.NOT_SET&&(t.mode=h.JOINT_STEREO),t.highpassfreq>0?(_.highpass1=2*t.highpassfreq,t.highpasswidth>=0?_.highpass2=2*(t.highpassfreq+t.highpasswidth):_.highpass2=1*2*t.highpassfreq,_.highpass1/=t.out_samplerate,_.highpass2/=t.out_samplerate):(_.highpass1=0,_.highpass2=0),t.lowpassfreq>0?(_.lowpass2=2*t.lowpassfreq,t.lowpasswidth>=0?(_.lowpass1=2*(t.lowpassfreq-t.lowpasswidth),_.lowpass1<0&&(_.lowpass1=0)):_.lowpass1=1*2*t.lowpassfreq,_.lowpass1/=t.out_samplerate,_.lowpass2/=t.out_samplerate):(_.lowpass1=0,_.lowpass2=0),O(t),_.samplerate_index=n(t.out_samplerate,t),_.samplerate_index<0)return t.internal_flags=null,-1;if(t.VBR==k.vbr_off){if(t.free_format)_.bitrate_index=0;else if(t.brate=s(t.brate,t.version,t.out_samplerate),_.bitrate_index=a(t.brate,t.version,t.out_samplerate),_.bitrate_index<=0)return t.internal_flags=null,-1}else _.bitrate_index=1;t.analysis&&(t.bWriteVbrTag=!1),_.pinfo!=null&&(t.bWriteVbrTag=!1),S.init_bit_stream_w(_);for(var L0=_.samplerate_index+3*t.version+6*(t.out_samplerate<16e3?1:0),c0=0;c0<W.SBMAX_l+1;c0++)_.scalefac_band.l[c0]=N.sfBandIndex[L0].l[c0];for(var c0=0;c0<W.PSFB21+1;c0++){var $0=(_.scalefac_band.l[22]-_.scalefac_band.l[21])/W.PSFB21,e1=_.scalefac_band.l[21]+c0*$0;_.scalefac_band.psfb21[c0]=e1}_.scalefac_band.psfb21[W.PSFB21]=576;for(var c0=0;c0<W.SBMAX_s+1;c0++)_.scalefac_band.s[c0]=N.sfBandIndex[L0].s[c0];for(var c0=0;c0<W.PSFB12+1;c0++){var $0=(_.scalefac_band.s[13]-_.scalefac_band.s[12])/W.PSFB12,e1=_.scalefac_band.s[12]+c0*$0;_.scalefac_band.psfb12[c0]=e1}_.scalefac_band.psfb12[W.PSFB12]=192,t.version==1?_.sideinfo_len=_.channels_out==1?21:36:_.sideinfo_len=_.channels_out==1?13:21,t.error_protection&&(_.sideinfo_len+=2),D(t),_.Class_ID=L;{var q0;for(q0=0;q0<19;q0++)_.nsPsy.pefirbuf[q0]=700*_.mode_gr*_.channels_out;t.ATHtype==-1&&(t.ATHtype=4)}switch(q(t.VBR_q<=9),q(t.VBR_q>=0),t.VBR){case k.vbr_mt:t.VBR=k.vbr_mtrh;case k.vbr_mtrh:{t.useTemporal==null&&(t.useTemporal=!1),V.apply_preset(t,500-t.VBR_q*10,0),t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),t.quality<5&&(t.quality=0),t.quality>5&&(t.quality=5),_.PSY.mask_adjust=t.maskingadjust,_.PSY.mask_adjust_short=t.maskingadjust_short,t.experimentalY?_.sfb21_extra=!1:_.sfb21_extra=t.out_samplerate>44e3,_.iteration_loop=new VBRNewIterationLoop(w);break}case k.vbr_rh:{V.apply_preset(t,500-t.VBR_q*10,0),_.PSY.mask_adjust=t.maskingadjust,_.PSY.mask_adjust_short=t.maskingadjust_short,t.experimentalY?_.sfb21_extra=!1:_.sfb21_extra=t.out_samplerate>44e3,t.quality>6&&(t.quality=6),t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),_.iteration_loop=new VBROldIterationLoop(w);break}default:{var l;_.sfb21_extra=!1,t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),l=t.VBR,l==k.vbr_off&&(t.VBR_mean_bitrate_kbps=t.brate),V.apply_preset(t,t.VBR_mean_bitrate_kbps,0),t.VBR=l,_.PSY.mask_adjust=t.maskingadjust,_.PSY.mask_adjust_short=t.maskingadjust_short,l==k.vbr_off?_.iteration_loop=new i0(w):_.iteration_loop=new ABRIterationLoop(w);break}}if(q(t.scale>=0),t.VBR!=k.vbr_off){if(_.VBR_min_bitrate=1,_.VBR_max_bitrate=14,t.out_samplerate<16e3&&(_.VBR_max_bitrate=8),t.VBR_min_bitrate_kbps!=0&&(t.VBR_min_bitrate_kbps=s(t.VBR_min_bitrate_kbps,t.version,t.out_samplerate),_.VBR_min_bitrate=a(t.VBR_min_bitrate_kbps,t.version,t.out_samplerate),_.VBR_min_bitrate<0)||t.VBR_max_bitrate_kbps!=0&&(t.VBR_max_bitrate_kbps=s(t.VBR_max_bitrate_kbps,t.version,t.out_samplerate),_.VBR_max_bitrate=a(t.VBR_max_bitrate_kbps,t.version,t.out_samplerate),_.VBR_max_bitrate<0))return-1;t.VBR_min_bitrate_kbps=a0.bitrate_table[t.version][_.VBR_min_bitrate],t.VBR_max_bitrate_kbps=a0.bitrate_table[t.version][_.VBR_max_bitrate],t.VBR_mean_bitrate_kbps=Math.min(a0.bitrate_table[t.version][_.VBR_max_bitrate],t.VBR_mean_bitrate_kbps),t.VBR_mean_bitrate_kbps=Math.max(a0.bitrate_table[t.version][_.VBR_min_bitrate],t.VBR_mean_bitrate_kbps)}return t.tune&&(_.PSY.mask_adjust+=t.tune_value_a,_.PSY.mask_adjust_short+=t.tune_value_a),J(t),q(t.scale>=0),t.athaa_type<0?_.ATH.useAdjust=3:_.ATH.useAdjust=t.athaa_type,_.ATH.aaSensitivityP=Math.pow(10,t.athaa_sensitivity/-10),t.short_blocks==null&&(t.short_blocks=g.short_block_allowed),t.short_blocks==g.short_block_allowed&&(t.mode==h.JOINT_STEREO||t.mode==h.STEREO)&&(t.short_blocks=g.short_block_coupled),t.quant_comp<0&&(t.quant_comp=1),t.quant_comp_short<0&&(t.quant_comp_short=0),t.msfix<0&&(t.msfix=0),t.exp_nspsytune=t.exp_nspsytune|1,t.internal_flags.nsPsy.attackthre<0&&(t.internal_flags.nsPsy.attackthre=r0.NSATTACKTHRE),t.internal_flags.nsPsy.attackthre_s<0&&(t.internal_flags.nsPsy.attackthre_s=r0.NSATTACKTHRE_S),q(t.scale>=0),t.scale<0&&(t.scale=1),t.ATHtype<0&&(t.ATHtype=4),t.ATHcurve<0&&(t.ATHcurve=4),t.athaa_loudapprox<0&&(t.athaa_loudapprox=2),t.interChRatio<0&&(t.interChRatio=0),t.useTemporal==null&&(t.useTemporal=!0),_.slot_lag=_.frac_SpF=0,t.VBR==k.vbr_off&&(_.slot_lag=_.frac_SpF=(t.version+1)*72e3*t.brate%t.out_samplerate|0),N.iteration_init(t),P.psymodel_init(t),q(t.scale>=0),0};function y(t,_){(t.in_buffer_0==null||t.in_buffer_nsamples<_)&&(t.in_buffer_0=l0(_),t.in_buffer_1=l0(_),t.in_buffer_nsamples=_)}this.lame_encode_flush=function(t,_,M0,E0){var O0=t.internal_flags,H0=$([2,1152]),w0=0,T0,F0,L0,c0,$0=O0.mf_samples_to_encode-W.POSTDELAY,e1=z(t);if(O0.mf_samples_to_encode<1)return 0;for(T0=0,t.in_samplerate!=t.out_samplerate&&($0+=16*t.out_samplerate/t.in_samplerate),L0=t.framesize-$0%t.framesize,L0<576&&(L0+=t.framesize),t.encoder_padding=L0,c0=($0+L0)/t.framesize;c0>0&&w0>=0;){var q0=e1-O0.mf_size,l=t.frameNum;q0*=t.in_samplerate,q0/=t.out_samplerate,q0>1152&&(q0=1152),q0<1&&(q0=1),F0=E0-T0,E0==0&&(F0=0),w0=this.lame_encode_buffer(t,H0[0],H0[1],q0,_,M0,F0),M0+=w0,T0+=w0,c0-=l!=t.frameNum?1:0}if(O0.mf_samples_to_encode=0,w0<0||(F0=E0-T0,E0==0&&(F0=0),S.flush_bitstream(t),w0=S.copy_buffer(O0,_,M0,F0,1),w0<0))return w0;if(M0+=w0,T0+=w0,F0=E0-T0,E0==0&&(F0=0),t.write_id3tag_automatic){if(m.id3tag_write_v1(t),w0=S.copy_buffer(O0,_,M0,F0,0),w0<0)return w0;T0+=w0}return T0},this.lame_encode_buffer=function(t,_,M0,E0,O0,H0,w0){var T0=t.internal_flags,F0=[null,null];if(T0.Class_ID!=L)return-3;if(E0==0)return 0;y(T0,E0),F0[0]=T0.in_buffer_0,F0[1]=T0.in_buffer_1;for(var L0=0;L0<E0;L0++)F0[0][L0]=_[L0],T0.channels_in>1&&(F0[1][L0]=M0[L0]);return _0(t,F0[0],F0[1],E0,O0,H0,w0)};function z(t){var _=W.BLKSIZE+t.framesize-W.FFTOFFSET;return _=Math.max(_,512+t.framesize-32),q(A.MFSIZE>=_),_}function _0(t,_,M0,E0,O0,H0,w0){var T0=t.internal_flags,F0=0,L0,c0,$0,e1,q0,l=[null,null],v=[null,null];if(T0.Class_ID!=L)return-3;if(E0==0)return 0;if(q0=S.copy_buffer(T0,O0,H0,w0,0),q0<0)return q0;if(H0+=q0,F0+=q0,v[0]=_,v[1]=M0,Q.NEQ(t.scale,0)&&Q.NEQ(t.scale,1))for(c0=0;c0<E0;++c0)v[0][c0]*=t.scale,T0.channels_out==2&&(v[1][c0]*=t.scale);if(Q.NEQ(t.scale_left,0)&&Q.NEQ(t.scale_left,1))for(c0=0;c0<E0;++c0)v[0][c0]*=t.scale_left;if(Q.NEQ(t.scale_right,0)&&Q.NEQ(t.scale_right,1))for(c0=0;c0<E0;++c0)v[1][c0]*=t.scale_right;if(t.num_channels==2&&T0.channels_out==1)for(c0=0;c0<E0;++c0)v[0][c0]=.5*(v[0][c0]+v[1][c0]),v[1][c0]=0;e1=z(t),l[0]=T0.mfbuf[0],l[1]=T0.mfbuf[1];for(var x=0;E0>0;){var T=[null,null],X=0,b=0;T[0]=v[0],T[1]=v[1];var H=new y0;if(n1(t,l,T,x,E0,H),X=H.n_in,b=H.n_out,T0.findReplayGain&&!T0.decode_on_the_fly&&i.AnalyzeSamples(T0.rgdata,l[0],T0.mf_size,l[1],T0.mf_size,b,T0.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(E0-=X,x+=X,T0.channels_out==2,T0.mf_size+=b,q(T0.mf_size<=A.MFSIZE),T0.mf_samples_to_encode<1&&(T0.mf_samples_to_encode=W.ENCDELAY+W.POSTDELAY),T0.mf_samples_to_encode+=b,T0.mf_size>=e1){var G=w0-F0;if(w0==0&&(G=0),L0=m0(t,l[0],l[1],O0,H0,G),L0<0)return L0;for(H0+=L0,F0+=L0,T0.mf_size-=t.framesize,T0.mf_samples_to_encode-=t.framesize,$0=0;$0<T0.channels_out;$0++)for(c0=0;c0<T0.mf_size;c0++)l[$0][c0]=l[$0][c0+t.framesize]}}return q(E0==0),F0}function m0(t,_,M0,E0,O0,H0){var w0=u.enc.lame_encode_mp3_frame(t,_,M0,E0,O0,H0);return t.frameNum++,w0}function y0(){this.n_in=0,this.n_out=0}function A0(){this.num_used=0}function d0(t,_){return _!=0?d0(_,t%_):t}function I0(t,_,M0){var E0=Math.PI*_;t/=M0,t<0&&(t=0),t>1&&(t=1);var O0=t-.5,H0=.42-.5*Math.cos(2*t*Math.PI)+.08*Math.cos(4*t*Math.PI);return Math.abs(O0)<1e-9?E0/Math.PI:H0*Math.sin(M0*E0*O0)/(Math.PI*M0*O0)}function Y0(t,_,M0,E0,O0,H0,w0,T0,F0){var L0=t.internal_flags,c0,$0=0,e1,q0=t.out_samplerate/d0(t.out_samplerate,t.in_samplerate);q0>A.BPC&&(q0=A.BPC);var l=Math.abs(L0.resample_ratio-Math.floor(.5+L0.resample_ratio))<1e-4?1:0,v=1/L0.resample_ratio;v>1&&(v=1);var x=31;x%2==0&&--x,x+=l;var T=x+1;if(L0.fill_buffer_resample_init==0){for(L0.inbuf_old[0]=l0(T),L0.inbuf_old[1]=l0(T),c0=0;c0<=2*q0;++c0)L0.blackfilt[c0]=l0(T);for(L0.itime[0]=0,L0.itime[1]=0,$0=0;$0<=2*q0;$0++){var X=0,b=($0-q0)/(2*q0);for(c0=0;c0<=x;c0++)X+=L0.blackfilt[$0][c0]=I0(c0-b,v,x);for(c0=0;c0<=x;c0++)L0.blackfilt[$0][c0]/=X}L0.fill_buffer_resample_init=1}var H=L0.inbuf_old[F0];for(e1=0;e1<E0;e1++){var G,F;if(G=e1*L0.resample_ratio,$0=0|Math.floor(G-L0.itime[F0]),x+$0-x/2>=w0)break;var b=G-L0.itime[F0]-($0+.5*(x%2));q(Math.abs(b)<=.501),F=0|Math.floor(b*2*q0+q0+.5);var t0=0;for(c0=0;c0<=x;++c0){var U=0|c0+$0-x/2,n0;q(U<w0),q(U+T>=0),n0=U<0?H[T+U]:O0[H0+U],t0+=n0*L0.blackfilt[F][c0]}_[M0+e1]=t0}if(T0.num_used=Math.min(w0,x+$0-x/2),L0.itime[F0]+=T0.num_used-e1*L0.resample_ratio,T0.num_used>=T)for(c0=0;c0<T;c0++)H[c0]=O0[H0+T0.num_used+c0-T];else{var b0=T-T0.num_used;for(c0=0;c0<b0;++c0)H[c0]=H[c0+T0.num_used];for($0=0;c0<T;++c0,++$0)H[c0]=O0[H0+$0];q($0==T0.num_used)}return e1}function n1(t,_,M0,E0,O0,H0){var w0=t.internal_flags;if(w0.resample_ratio<.9999||w0.resample_ratio>1.0001)for(var T0=0;T0<w0.channels_out;T0++){var F0=new A0;H0.n_out=Y0(t,_[T0],w0.mf_size,t.framesize,M0[T0],E0,O0,F0,T0),H0.n_in=F0.num_used}else{H0.n_out=Math.min(t.framesize,O0),H0.n_in=H0.n_out;for(var L0=0;L0<H0.n_out;++L0)_[0][w0.mf_size+L0]=M0[0][E0+L0],w0.channels_out==2&&(_[1][w0.mf_size+L0]=M0[1][E0+L0])}}}return Xe=R,Xe}var R1=W0;R1.System;var X1=R1.VbrMode;R1.Float;R1.ShortBlock;R1.Util;R1.Arrays;R1.new_array_n;R1.new_byte;R1.new_double;R1.new_float;R1.new_float_n;R1.new_int;R1.new_int_n;R1.assert;function Or(){var c=Ue();function Y(A,f,C,i0,Q,a0,W,R,h,u,M,e,i,S,V){this.vbr_q=A,this.quant_comp=f,this.quant_comp_s=C,this.expY=i0,this.st_lrm=Q,this.st_s=a0,this.masking_adj=W,this.masking_adj_short=R,this.ath_lower=h,this.ath_curve=u,this.ath_sensitivity=M,this.interch=e,this.safejoint=i,this.sfb21mod=S,this.msfix=V}function k(A,f,C,i0,Q,a0,W,R,h,u,M,e,i,S){this.quant_comp=f,this.quant_comp_s=C,this.safejoint=i0,this.nsmsfix=Q,this.st_lrm=a0,this.st_s=W,this.nsbass=R,this.scale=h,this.masking_adj=u,this.ath_lower=M,this.ath_curve=e,this.interch=i,this.sfscale=S}var g;this.setModules=function(A){g=A};var l0=[new Y(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new Y(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new Y(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new Y(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new Y(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new Y(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new Y(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new Y(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new Y(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new Y(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new Y(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],j=[new Y(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new Y(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new Y(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new Y(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new Y(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new Y(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new Y(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new Y(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new Y(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new Y(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new Y(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function $(A,f,C){var i0=A.VBR==X1.vbr_rh?l0:j,Q=A.VBR_q_frac,a0=i0[f],W=i0[f+1],R=a0;a0.st_lrm=a0.st_lrm+Q*(W.st_lrm-a0.st_lrm),a0.st_s=a0.st_s+Q*(W.st_s-a0.st_s),a0.masking_adj=a0.masking_adj+Q*(W.masking_adj-a0.masking_adj),a0.masking_adj_short=a0.masking_adj_short+Q*(W.masking_adj_short-a0.masking_adj_short),a0.ath_lower=a0.ath_lower+Q*(W.ath_lower-a0.ath_lower),a0.ath_curve=a0.ath_curve+Q*(W.ath_curve-a0.ath_curve),a0.ath_sensitivity=a0.ath_sensitivity+Q*(W.ath_sensitivity-a0.ath_sensitivity),a0.interch=a0.interch+Q*(W.interch-a0.interch),a0.msfix=a0.msfix+Q*(W.msfix-a0.msfix),f0(A,R.vbr_q),C!=0?A.quant_comp=R.quant_comp:Math.abs(A.quant_comp- -1)>0||(A.quant_comp=R.quant_comp),C!=0?A.quant_comp_short=R.quant_comp_s:Math.abs(A.quant_comp_short- -1)>0||(A.quant_comp_short=R.quant_comp_s),R.expY!=0&&(A.experimentalY=R.expY!=0),C!=0?A.internal_flags.nsPsy.attackthre=R.st_lrm:Math.abs(A.internal_flags.nsPsy.attackthre- -1)>0||(A.internal_flags.nsPsy.attackthre=R.st_lrm),C!=0?A.internal_flags.nsPsy.attackthre_s=R.st_s:Math.abs(A.internal_flags.nsPsy.attackthre_s- -1)>0||(A.internal_flags.nsPsy.attackthre_s=R.st_s),C!=0?A.maskingadjust=R.masking_adj:Math.abs(A.maskingadjust-0)>0||(A.maskingadjust=R.masking_adj),C!=0?A.maskingadjust_short=R.masking_adj_short:Math.abs(A.maskingadjust_short-0)>0||(A.maskingadjust_short=R.masking_adj_short),C!=0?A.ATHlower=-R.ath_lower/10:Math.abs(-A.ATHlower*10-0)>0||(A.ATHlower=-R.ath_lower/10),C!=0?A.ATHcurve=R.ath_curve:Math.abs(A.ATHcurve- -1)>0||(A.ATHcurve=R.ath_curve),C!=0?A.athaa_sensitivity=R.ath_sensitivity:Math.abs(A.athaa_sensitivity- -1)>0||(A.athaa_sensitivity=R.ath_sensitivity),R.interch>0&&(C!=0?A.interChRatio=R.interch:Math.abs(A.interChRatio- -1)>0||(A.interChRatio=R.interch)),R.safejoint>0&&(A.exp_nspsytune=A.exp_nspsytune|R.safejoint),R.sfb21mod>0&&(A.exp_nspsytune=A.exp_nspsytune|R.sfb21mod<<20),C!=0?A.msfix=R.msfix:Math.abs(A.msfix- -1)>0||(A.msfix=R.msfix),C==0&&(A.VBR_q=f,A.VBR_q_frac=Q)}var q=[new k(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new k(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new k(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new k(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new k(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new k(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new k(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new k(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new k(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new k(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new k(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new k(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new k(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new k(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new k(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new k(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new k(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function r0(A,f,C){var i0=f,Q=g.nearestBitrateFullIndex(f);if(A.VBR=X1.vbr_abr,A.VBR_mean_bitrate_kbps=i0,A.VBR_mean_bitrate_kbps=Math.min(A.VBR_mean_bitrate_kbps,320),A.VBR_mean_bitrate_kbps=Math.max(A.VBR_mean_bitrate_kbps,8),A.brate=A.VBR_mean_bitrate_kbps,A.VBR_mean_bitrate_kbps>320&&(A.disable_reservoir=!0),q[Q].safejoint>0&&(A.exp_nspsytune=A.exp_nspsytune|2),q[Q].sfscale>0&&(A.internal_flags.noise_shaping=2),Math.abs(q[Q].nsbass)>0){var a0=int(q[Q].nsbass*4);a0<0&&(a0+=64),A.exp_nspsytune=A.exp_nspsytune|a0<<2}return C!=0?A.quant_comp=q[Q].quant_comp:Math.abs(A.quant_comp- -1)>0||(A.quant_comp=q[Q].quant_comp),C!=0?A.quant_comp_short=q[Q].quant_comp_s:Math.abs(A.quant_comp_short- -1)>0||(A.quant_comp_short=q[Q].quant_comp_s),C!=0?A.msfix=q[Q].nsmsfix:Math.abs(A.msfix- -1)>0||(A.msfix=q[Q].nsmsfix),C!=0?A.internal_flags.nsPsy.attackthre=q[Q].st_lrm:Math.abs(A.internal_flags.nsPsy.attackthre- -1)>0||(A.internal_flags.nsPsy.attackthre=q[Q].st_lrm),C!=0?A.internal_flags.nsPsy.attackthre_s=q[Q].st_s:Math.abs(A.internal_flags.nsPsy.attackthre_s- -1)>0||(A.internal_flags.nsPsy.attackthre_s=q[Q].st_s),C!=0?A.scale=q[Q].scale:Math.abs(A.scale- -1)>0||(A.scale=q[Q].scale),C!=0?A.maskingadjust=q[Q].masking_adj:Math.abs(A.maskingadjust-0)>0||(A.maskingadjust=q[Q].masking_adj),q[Q].masking_adj>0?C!=0?A.maskingadjust_short=q[Q].masking_adj*.9:Math.abs(A.maskingadjust_short-0)>0||(A.maskingadjust_short=q[Q].masking_adj*.9):C!=0?A.maskingadjust_short=q[Q].masking_adj*1.1:Math.abs(A.maskingadjust_short-0)>0||(A.maskingadjust_short=q[Q].masking_adj*1.1),C!=0?A.ATHlower=-q[Q].ath_lower/10:Math.abs(-A.ATHlower*10-0)>0||(A.ATHlower=-q[Q].ath_lower/10),C!=0?A.ATHcurve=q[Q].ath_curve:Math.abs(A.ATHcurve- -1)>0||(A.ATHcurve=q[Q].ath_curve),C!=0?A.interChRatio=q[Q].interch:Math.abs(A.interChRatio- -1)>0||(A.interChRatio=q[Q].interch),f}this.apply_preset=function(A,f,C){switch(f){case c.R3MIX:{f=c.V3,A.VBR=X1.vbr_mtrh;break}case c.MEDIUM:{f=c.V4,A.VBR=X1.vbr_rh;break}case c.MEDIUM_FAST:{f=c.V4,A.VBR=X1.vbr_mtrh;break}case c.STANDARD:{f=c.V2,A.VBR=X1.vbr_rh;break}case c.STANDARD_FAST:{f=c.V2,A.VBR=X1.vbr_mtrh;break}case c.EXTREME:{f=c.V0,A.VBR=X1.vbr_rh;break}case c.EXTREME_FAST:{f=c.V0,A.VBR=X1.vbr_mtrh;break}case c.INSANE:return f=320,A.preset=f,r0(A,f,C),A.VBR=X1.vbr_off,f}switch(A.preset=f,f){case c.V9:return $(A,9,C),f;case c.V8:return $(A,8,C),f;case c.V7:return $(A,7,C),f;case c.V6:return $(A,6,C),f;case c.V5:return $(A,5,C),f;case c.V4:return $(A,4,C),f;case c.V3:return $(A,3,C),f;case c.V2:return $(A,2,C),f;case c.V1:return $(A,1,C),f;case c.V0:return $(A,0,C),f}return 8<=f&&f<=320?r0(A,f,C):(A.preset=0,f)};function f0(A,f){var C=0;return 0>f&&(C=-1,f=0),9<f&&(C=-1,f=9),A.VBR_q=f,A.VBR_q_frac=0,C}}var Cr=Or;function Fr(){this.setModules=function(c,Y){}}var kr=Fr;function Xr(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var Yr=Xr,Ze=W0,da=Ze.new_float,qr=Ze.new_int;Ze.assert;function Dr(){this.global_gain=0,this.sfb_count1=0,this.step=qr(39),this.noise=da(39),this.noise_log=da(39)}var Gr=Dr,x1=W0,D1=x1.System,Aa=x1.VbrMode;x1.Float;x1.ShortBlock;var Ye=x1.Util,g1=x1.Arrays;x1.new_array_n;x1.new_byte;x1.new_double;var ne=x1.new_float;x1.new_float_n;x1.new_int;x1.new_int_n;var V1=x1.assert,$r=kr,qe=Yr,Pr=Gr,G0=t1(),Ma=Ge,Ra=de;function Ur(){var c;this.rv=null;var Y;this.qupvt=null;var k,g=new $r,l0;this.setModules=function(R,h,u,M){c=R,Y=h,this.rv=h,k=u,this.qupvt=u,l0=M,g.setModules(k,l0)},this.ms_convert=function(R,h){for(var u=0;u<576;++u){var M=R.tt[h][0].xr[u],e=R.tt[h][1].xr[u];R.tt[h][0].xr[u]=(M+e)*(Ye.SQRT2*.5),R.tt[h][1].xr[u]=(M-e)*(Ye.SQRT2*.5)}};function j(R,h,u,M){M=0;for(var e=0;e<=u;++e){var i=Math.abs(R.xr[e]);M+=i,h[e]=Math.sqrt(i*Math.sqrt(i)),h[e]>R.xrpow_max&&(R.xrpow_max=h[e])}return M}this.init_xrpow=function(R,h,u){var M=0,e=0|h.max_nonzero_coeff;if(V1(u!=null),h.xrpow_max=0,V1(0<=e&&e<=575),g1.fill(u,e,576,0),M=j(h,u,e,M),M>1e-20){var i=0;R.substep_shaping&2&&(i=1);for(var S=0;S<h.psymax;S++)R.pseudohalf[S]=i;return!0}return g1.fill(h.l3_enc,0,576,0),!1};function $(R,h){var u=R.ATH,M=h.xr;if(h.block_type!=G0.SHORT_TYPE)for(var e=!1,i=G0.PSFB21-1;i>=0&&!e;i--){var S=R.scalefac_band.psfb21[i],V=R.scalefac_band.psfb21[i+1],N=k.athAdjust(u.adjust,u.psfb21[i],u.floor);R.nsPsy.longfact[21]>1e-12&&(N*=R.nsPsy.longfact[21]);for(var w=V-1;w>=S;w--)if(Math.abs(M[w])<N)M[w]=0;else{e=!0;break}}else for(var P=0;P<3;P++)for(var e=!1,i=G0.PSFB12-1;i>=0&&!e;i--){var S=R.scalefac_band.s[12]*3+(R.scalefac_band.s[13]-R.scalefac_band.s[12])*P+(R.scalefac_band.psfb12[i]-R.scalefac_band.psfb12[0]),V=S+(R.scalefac_band.psfb12[i+1]-R.scalefac_band.psfb12[i]),Z=k.athAdjust(u.adjust,u.psfb12[i],u.floor);R.nsPsy.shortfact[12]>1e-12&&(Z*=R.nsPsy.shortfact[12]);for(var w=V-1;w>=S;w--)if(Math.abs(M[w])<Z)M[w]=0;else{e=!0;break}}}this.init_outer_loop=function(R,h){h.part2_3_length=0,h.big_values=0,h.count1=0,h.global_gain=210,h.scalefac_compress=0,h.table_select[0]=0,h.table_select[1]=0,h.table_select[2]=0,h.subblock_gain[0]=0,h.subblock_gain[1]=0,h.subblock_gain[2]=0,h.subblock_gain[3]=0,h.region0_count=0,h.region1_count=0,h.preflag=0,h.scalefac_scale=0,h.count1table_select=0,h.part2_length=0,h.sfb_lmax=G0.SBPSY_l,h.sfb_smin=G0.SBPSY_s,h.psy_lmax=R.sfb21_extra?G0.SBMAX_l:G0.SBPSY_l,h.psymax=h.psy_lmax,h.sfbmax=h.sfb_lmax,h.sfbdivide=11;for(var u=0;u<G0.SBMAX_l;u++)h.width[u]=R.scalefac_band.l[u+1]-R.scalefac_band.l[u],h.window[u]=3;if(h.block_type==G0.SHORT_TYPE){var M=ne(576);h.sfb_smin=0,h.sfb_lmax=0,h.mixed_block_flag!=0&&(h.sfb_smin=3,h.sfb_lmax=R.mode_gr*2+4),h.psymax=h.sfb_lmax+3*((R.sfb21_extra?G0.SBMAX_s:G0.SBPSY_s)-h.sfb_smin),h.sfbmax=h.sfb_lmax+3*(G0.SBPSY_s-h.sfb_smin),h.sfbdivide=h.sfbmax-18,h.psy_lmax=h.sfb_lmax;var e=R.scalefac_band.l[h.sfb_lmax];D1.arraycopy(h.xr,0,M,0,576);for(var u=h.sfb_smin;u<G0.SBMAX_s;u++)for(var i=R.scalefac_band.s[u],S=R.scalefac_band.s[u+1],V=0;V<3;V++)for(var N=i;N<S;N++)h.xr[e++]=M[3*N+V];for(var w=h.sfb_lmax,u=h.sfb_smin;u<G0.SBMAX_s;u++)h.width[w]=h.width[w+1]=h.width[w+2]=R.scalefac_band.s[u+1]-R.scalefac_band.s[u],h.window[w]=0,h.window[w+1]=1,h.window[w+2]=2,w+=3}h.count1bits=0,h.sfb_partition_table=k.nr_of_sfb_block[0][0],h.slen[0]=0,h.slen[1]=0,h.slen[2]=0,h.slen[3]=0,h.max_nonzero_coeff=575,g1.fill(h.scalefac,0),$(R,h)};function q(R){this.ordinal=R}q.BINSEARCH_NONE=new q(0),q.BINSEARCH_UP=new q(1),q.BINSEARCH_DOWN=new q(2);function r0(R,h,u,M,e){var i,S=R.CurrentStep[M],V=!1,N=R.OldValue[M],w=q.BINSEARCH_NONE;for(h.global_gain=N,u-=h.part2_length,V1(S!=0);;){var P;if(i=l0.count_bits(R,e,h,null),S==1||i==u)break;i>u?(w==q.BINSEARCH_DOWN&&(V=!0),V&&(S/=2),w=q.BINSEARCH_UP,P=S):(w==q.BINSEARCH_UP&&(V=!0),V&&(S/=2),w=q.BINSEARCH_DOWN,P=-S),h.global_gain+=P,h.global_gain<0&&(h.global_gain=0,V=!0),h.global_gain>255&&(h.global_gain=255,V=!0)}for(V1(h.global_gain>=0),V1(h.global_gain<256);i>u&&h.global_gain<255;)h.global_gain++,i=l0.count_bits(R,e,h,null);return R.CurrentStep[M]=N-h.global_gain>=4?4:2,R.OldValue[M]=h.global_gain,h.part2_3_length=i,i}this.trancate_smallspectrums=function(R,h,u,M){var e=ne(Ra.SFBMAX);if(!(!(R.substep_shaping&4)&&h.block_type==G0.SHORT_TYPE||R.substep_shaping&128)){k.calc_noise(h,u,e,new qe,null);for(var S=0;S<576;S++){var i=0;h.l3_enc[S]!=0&&(i=Math.abs(h.xr[S])),M[S]=i}var S=0,V=8;h.block_type==G0.SHORT_TYPE&&(V=6);do{var N,w,P,Z,m=h.width[V];if(S+=m,!(e[V]>=1)&&(g1.sort(M,S-m,m),!BitStream.EQ(M[S-1],0))){N=(1-e[V])*u[V],w=0,Z=0;do{var r;for(P=1;Z+P<m&&!BitStream.NEQ(M[Z+S-m],M[Z+S+P-m]);P++);if(r=M[Z+S-m]*M[Z+S-m]*P,N<r){Z!=0&&(w=M[Z+S-m-1]);break}N-=r,Z+=P}while(Z<m);if(!BitStream.EQ(w,0))do Math.abs(h.xr[S-m])<=w&&(h.l3_enc[S-m]=0);while(--m>0)}}while(++V<h.psymax);h.part2_3_length=l0.noquant_count_bits(R,h,null)}};function f0(R){for(var h=0;h<R.sfbmax;h++)if(R.scalefac[h]+R.subblock_gain[R.window[h]]==0)return!1;return!0}function A(R){return Ye.FAST_LOG10(.368+.632*R*R*R)}function f(R,h){for(var u=1e-37,M=0;M<h.psymax;M++)u+=A(R[M]);return Math.max(1e-20,u)}function C(R,h,u,M,e){var i;switch(R){default:case 9:{h.over_count>0?(i=u.over_SSD<=h.over_SSD,u.over_SSD==h.over_SSD&&(i=u.bits<h.bits)):i=u.max_noise<0&&u.max_noise*10+u.bits<=h.max_noise*10+h.bits;break}case 0:i=u.over_count<h.over_count||u.over_count==h.over_count&&u.over_noise<h.over_noise||u.over_count==h.over_count&&BitStream.EQ(u.over_noise,h.over_noise)&&u.tot_noise<h.tot_noise;break;case 8:u.max_noise=f(e,M);case 1:i=u.max_noise<h.max_noise;break;case 2:i=u.tot_noise<h.tot_noise;break;case 3:i=u.tot_noise<h.tot_noise&&u.max_noise<h.max_noise;break;case 4:i=u.max_noise<=0&&h.max_noise>.2||u.max_noise<=0&&h.max_noise<0&&h.max_noise>u.max_noise-.2&&u.tot_noise<h.tot_noise||u.max_noise<=0&&h.max_noise>0&&h.max_noise>u.max_noise-.2&&u.tot_noise<h.tot_noise+h.over_noise||u.max_noise>0&&h.max_noise>-.05&&h.max_noise>u.max_noise-.1&&u.tot_noise+u.over_noise<h.tot_noise+h.over_noise||u.max_noise>0&&h.max_noise>-.1&&h.max_noise>u.max_noise-.15&&u.tot_noise+u.over_noise+u.over_noise<h.tot_noise+h.over_noise+h.over_noise;break;case 5:i=u.over_noise<h.over_noise||BitStream.EQ(u.over_noise,h.over_noise)&&u.tot_noise<h.tot_noise;break;case 6:i=u.over_noise<h.over_noise||BitStream.EQ(u.over_noise,h.over_noise)&&(u.max_noise<h.max_noise||BitStream.EQ(u.max_noise,h.max_noise)&&u.tot_noise<=h.tot_noise);break;case 7:i=u.over_count<h.over_count||u.over_noise<h.over_noise;break}return h.over_count==0&&(i=i&&u.bits<h.bits),i}function i0(R,h,u,M,e){var i=R.internal_flags,S;h.scalefac_scale==0?S=1.2968395546510096:S=1.6817928305074292;for(var V=0,N=0;N<h.sfbmax;N++)V<u[N]&&(V=u[N]);var w=i.noise_shaping_amp;switch(w==3&&(e?w=2:w=1),w){case 2:break;case 1:V>1?V=Math.pow(V,.5):V*=.95;break;case 0:default:V>1?V=1:V*=.95;break}for(var P=0,N=0;N<h.sfbmax;N++){var Z=h.width[N],m;if(P+=Z,!(u[N]<V)){if(i.substep_shaping&2&&(i.pseudohalf[N]=i.pseudohalf[N]==0?1:0,i.pseudohalf[N]==0&&i.noise_shaping_amp==2))return;for(h.scalefac[N]++,m=-Z;m<0;m++)M[P+m]*=S,M[P+m]>h.xrpow_max&&(h.xrpow_max=M[P+m]);if(i.noise_shaping_amp==2)return}}}function Q(R,h){for(var u=1.2968395546510096,M=0,e=0;e<R.sfbmax;e++){var i=R.width[e],S=R.scalefac[e];if(R.preflag!=0&&(S+=k.pretab[e]),M+=i,S&1){S++;for(var V=-i;V<0;V++)h[M+V]*=u,h[M+V]>R.xrpow_max&&(R.xrpow_max=h[M+V])}R.scalefac[e]=S>>1}R.preflag=0,R.scalefac_scale=1}function a0(R,h,u){var M,e=h.scalefac;for(M=0;M<h.sfb_lmax;M++)if(e[M]>=16)return!0;for(var i=0;i<3;i++){var S=0,V=0;for(M=h.sfb_lmax+i;M<h.sfbdivide;M+=3)S<e[M]&&(S=e[M]);for(;M<h.sfbmax;M+=3)V<e[M]&&(V=e[M]);if(!(S<16&&V<8)){if(h.subblock_gain[i]>=7)return!0;h.subblock_gain[i]++;var N=R.scalefac_band.l[h.sfb_lmax];for(M=h.sfb_lmax+i;M<h.sfbmax;M+=3){var w,P=h.width[M],Z=e[M];if(V1(Z>=0),Z=Z-(4>>h.scalefac_scale),Z>=0){e[M]=Z,N+=P*3;continue}e[M]=0;{var m=210+(Z<<h.scalefac_scale+1);w=k.IPOW20(m)}N+=P*(i+1);for(var r=-P;r<0;r++)u[N+r]*=w,u[N+r]>h.xrpow_max&&(h.xrpow_max=u[N+r]);N+=P*(3-i-1)}{var w=k.IPOW20(202);N+=h.width[M]*(i+1);for(var r=-h.width[M];r<0;r++)u[N+r]*=w,u[N+r]>h.xrpow_max&&(h.xrpow_max=u[N+r])}}}return!1}function W(R,h,u,M,e){var i=R.internal_flags;i0(R,h,u,M,e);var S=f0(h);return S?!1:(i.mode_gr==2?S=l0.scale_bitcount(h):S=l0.scale_bitcount_lsf(i,h),S?(i.noise_shaping>1&&(g1.fill(i.pseudohalf,0),h.scalefac_scale==0?(Q(h,M),S=!1):h.block_type==G0.SHORT_TYPE&&i.subblock_gain>0&&(S=a0(i,h,M)||f0(h))),S||(i.mode_gr==2?S=l0.scale_bitcount(h):S=l0.scale_bitcount_lsf(i,h)),!S):!0)}this.outer_loop=function(R,h,u,M,e,i){var S=R.internal_flags,V=new Ma,N=ne(576),w=ne(Ra.SFBMAX),P=new qe,Z,m=new Pr,r=9999999,d=!1,I=!1,p=0;if(r0(S,h,i,e,M),S.noise_shaping==0)return 100;k.calc_noise(h,u,w,P,m),P.bits=h.part2_3_length,V.assign(h);var L=0;for(D1.arraycopy(M,0,N,0,576);!d;){do{var K=new qe,B,E=255;if(S.substep_shaping&2?B=20:B=3,S.sfb21_extra&&(w[V.sfbmax]>1||V.block_type==G0.SHORT_TYPE&&(w[V.sfbmax+1]>1||w[V.sfbmax+2]>1))||!W(R,V,w,M,I))break;V.scalefac_scale!=0&&(E=254);var n=i-V.part2_length;if(n<=0)break;for(;(V.part2_3_length=l0.count_bits(S,M,V,m))>n&&V.global_gain<=E;)V.global_gain++;if(V.global_gain>E)break;if(P.over_count==0){for(;(V.part2_3_length=l0.count_bits(S,M,V,m))>r&&V.global_gain<=E;)V.global_gain++;if(V.global_gain>E)break}if(k.calc_noise(V,u,w,K,m),K.bits=V.part2_3_length,h.block_type!=G0.SHORT_TYPE?Z=R.quant_comp:Z=R.quant_comp_short,Z=C(Z,P,K,V,w)?1:0,Z!=0)r=h.part2_3_length,P=K,h.assign(V),L=0,D1.arraycopy(M,0,N,0,576);else if(S.full_outer_loop==0&&(++L>B&&P.over_count==0||S.noise_shaping_amp==3&&I&&L>30||S.noise_shaping_amp==3&&I&&V.global_gain-p>15))break}while(V.global_gain+V.scalefac_scale<255);S.noise_shaping_amp==3?I?d=!0:(V.assign(h),D1.arraycopy(N,0,M,0,576),L=0,p=V.global_gain,I=!0):d=!0}return V1(h.global_gain+h.scalefac_scale<=255),R.VBR==Aa.vbr_rh||R.VBR==Aa.vbr_mtrh?D1.arraycopy(N,0,M,0,576):S.substep_shaping&1&&trancate_smallspectrums(S,h,u,M),P.over_count},this.iteration_finish_one=function(R,h,u){var M=R.l3_side,e=M.tt[h][u];l0.best_scalefac_store(R,h,u,M),R.use_best_huffman==1&&l0.best_huffman_divide(R,e),Y.ResvAdjust(R,e)},this.VBR_encode_granule=function(R,h,u,M,e,i,S){var V=R.internal_flags,N=new Ma,w=ne(576),P=S,Z=S+1,m=(S+i)/2,r,d,I=0,p=V.sfb21_extra;V1(P<=LameInternalFlags.MAX_BITS_PER_CHANNEL),g1.fill(N.l3_enc,0);do V1(m>=i),V1(m<=S),V1(i<=S),m>P-42?V.sfb21_extra=!1:V.sfb21_extra=p,d=outer_loop(R,h,u,M,e,m),d<=0?(I=1,Z=h.part2_3_length,N.assign(h),D1.arraycopy(M,0,w,0,576),S=Z-32,r=S-i,m=(S+i)/2):(i=m+32,r=S-i,m=(S+i)/2,I!=0&&(I=2,h.assign(N),D1.arraycopy(w,0,M,0,576)));while(r>12);V.sfb21_extra=p,I==2&&D1.arraycopy(N.l3_enc,0,h.l3_enc,0,576),V1(h.part2_3_length<=P)},this.get_framebits=function(R,h){var u=R.internal_flags;u.bitrate_index=u.VBR_min_bitrate;var M=c.getframebits(R);u.bitrate_index=1,M=c.getframebits(R);for(var e=1;e<=u.VBR_max_bitrate;e++){u.bitrate_index=e;var i=new MeanBits(M);h[e]=Y.ResvFrameBegin(R,i),M=i.bits}},this.VBR_old_prepare=function(R,h,u,M,e,i,S,V,N){var w=R.internal_flags,P,Z=0,m=1,r=0;w.bitrate_index=w.VBR_max_bitrate;var d=Y.ResvFrameBegin(R,new MeanBits(0))/w.mode_gr;get_framebits(R,i);for(var I=0;I<w.mode_gr;I++){var p=k.on_pe(R,h,V[I],d,I,0);w.mode_ext==G0.MPG_MD_MS_LR&&(ms_convert(w.l3_side,I),k.reduce_side(V[I],u[I],d,p));for(var L=0;L<w.channels_out;++L){var K=w.l3_side.tt[I][L];K.block_type!=G0.SHORT_TYPE?(Z=1.28/(1+Math.exp(3.5-h[I][L]/300))-.05,P=w.PSY.mask_adjust-Z):(Z=2.56/(1+Math.exp(3.5-h[I][L]/300))-.14,P=w.PSY.mask_adjust_short-Z),w.masking_lower=Math.pow(10,P*.1),init_outer_loop(w,K),N[I][L]=k.calc_xmin(R,M[I][L],K,e[I][L]),N[I][L]!=0&&(m=0),S[I][L]=126,r+=V[I][L]}}for(var I=0;I<w.mode_gr;I++)for(var L=0;L<w.channels_out;L++)r>i[w.VBR_max_bitrate]&&(V[I][L]*=i[w.VBR_max_bitrate],V[I][L]/=r),S[I][L]>V[I][L]&&(S[I][L]=V[I][L]);return m},this.bitpressure_strategy=function(R,h,u,M){for(var e=0;e<R.mode_gr;e++)for(var i=0;i<R.channels_out;i++){for(var S=R.l3_side.tt[e][i],V=h[e][i],N=0,w=0;w<S.psy_lmax;w++)V[N++]*=1+.029*w*w/G0.SBMAX_l/G0.SBMAX_l;if(S.block_type==G0.SHORT_TYPE)for(var w=S.sfb_smin;w<G0.SBMAX_s;w++)V[N++]*=1+.029*w*w/G0.SBMAX_s/G0.SBMAX_s,V[N++]*=1+.029*w*w/G0.SBMAX_s/G0.SBMAX_s,V[N++]*=1+.029*w*w/G0.SBMAX_s/G0.SBMAX_s;M[e][i]=0|Math.max(u[e][i],.9*M[e][i])}},this.VBR_new_prepare=function(R,h,u,M,e,i){var S=R.internal_flags,V=1,N=0,w=0,P;if(R.free_format){S.bitrate_index=0;var Z=new MeanBits(N);P=Y.ResvFrameBegin(R,Z),N=Z.bits,e[0]=P}else{S.bitrate_index=S.VBR_max_bitrate;var Z=new MeanBits(N);Y.ResvFrameBegin(R,Z),N=Z.bits,get_framebits(R,e),P=e[S.VBR_max_bitrate]}for(var m=0;m<S.mode_gr;m++){k.on_pe(R,h,i[m],N,m,0),S.mode_ext==G0.MPG_MD_MS_LR&&ms_convert(S.l3_side,m);for(var r=0;r<S.channels_out;++r){var d=S.l3_side.tt[m][r];S.masking_lower=Math.pow(10,S.PSY.mask_adjust*.1),init_outer_loop(S,d),k.calc_xmin(R,u[m][r],d,M[m][r])!=0&&(V=0),w+=i[m][r]}}for(var m=0;m<S.mode_gr;m++)for(var r=0;r<S.channels_out;r++)w>P&&(i[m][r]*=P,i[m][r]/=w);return V},this.calc_target_bits=function(R,h,u,M,e,i){var S=R.internal_flags,V=S.l3_side,N,w,P,Z,m=0;S.bitrate_index=S.VBR_max_bitrate;var r=new MeanBits(m);for(i[0]=Y.ResvFrameBegin(R,r),m=r.bits,S.bitrate_index=1,m=c.getframebits(R)-S.sideinfo_len*8,e[0]=m/(S.mode_gr*S.channels_out),m=R.VBR_mean_bitrate_kbps*R.framesize*1e3,S.substep_shaping&1&&(m*=1.09),m/=R.out_samplerate,m-=S.sideinfo_len*8,m/=S.mode_gr*S.channels_out,N=.93+.07*(11-R.compression_ratio)/(11-5.5),N<.9&&(N=.9),N>1&&(N=1),w=0;w<S.mode_gr;w++){var d=0;for(P=0;P<S.channels_out;P++){if(M[w][P]=int(N*m),h[w][P]>700){var I=int((h[w][P]-700)/1.4),p=V.tt[w][P];M[w][P]=int(N*m),p.block_type==G0.SHORT_TYPE&&I<m/2&&(I=m/2),I>m*3/2?I=m*3/2:I<0&&(I=0),M[w][P]+=I}M[w][P]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(M[w][P]=LameInternalFlags.MAX_BITS_PER_CHANNEL),d+=M[w][P]}if(d>LameInternalFlags.MAX_BITS_PER_GRANULE)for(P=0;P<S.channels_out;++P)M[w][P]*=LameInternalFlags.MAX_BITS_PER_GRANULE,M[w][P]/=d}if(S.mode_ext==G0.MPG_MD_MS_LR)for(w=0;w<S.mode_gr;w++)k.reduce_side(M[w],u[w],m*S.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(Z=0,w=0;w<S.mode_gr;w++)for(P=0;P<S.channels_out;P++)M[w][P]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(M[w][P]=LameInternalFlags.MAX_BITS_PER_CHANNEL),Z+=M[w][P];if(Z>i[0])for(w=0;w<S.mode_gr;w++)for(P=0;P<S.channels_out;P++)M[w][P]*=i[0],M[w][P]/=Z}}var Zr=Ur,Kr=W0,me=Kr.assert;function Qr(){var c;this.setModules=function(Y){c=Y},this.ResvFrameBegin=function(Y,k){var g=Y.internal_flags,l0,j=g.l3_side,$=c.getframebits(Y);k.bits=($-g.sideinfo_len*8)/g.mode_gr;var q=8*256*g.mode_gr-8;Y.brate>320?l0=8*int(Y.brate*1e3/(Y.out_samplerate/1152)/8+.5):(l0=8*1440,Y.strict_ISO&&(l0=8*int(32e4/(Y.out_samplerate/1152)/8+.5))),g.ResvMax=l0-$,g.ResvMax>q&&(g.ResvMax=q),(g.ResvMax<0||Y.disable_reservoir)&&(g.ResvMax=0);var r0=k.bits*g.mode_gr+Math.min(g.ResvSize,g.ResvMax);return r0>l0&&(r0=l0),me(g.ResvMax%8==0),me(g.ResvMax>=0),j.resvDrain_pre=0,g.pinfo!=null&&(g.pinfo.mean_bits=k.bits/2,g.pinfo.resvsize=g.ResvSize),r0},this.ResvMaxBits=function(Y,k,g,l0){var j=Y.internal_flags,$,q=j.ResvSize,r0=j.ResvMax;l0!=0&&(q+=k),j.substep_shaping&1&&(r0*=.9),g.bits=k,q*10>r0*9?($=q-r0*9/10,g.bits+=$,j.substep_shaping|=128):($=0,j.substep_shaping&=127,!Y.disable_reservoir&&!(j.substep_shaping&1)&&(g.bits-=.1*k));var f0=q<j.ResvMax*6/10?q:j.ResvMax*6/10;return f0-=$,f0<0&&(f0=0),f0},this.ResvAdjust=function(Y,k){Y.ResvSize-=k.part2_3_length+k.part2_length},this.ResvFrameEnd=function(Y,k){var g,l0=Y.l3_side;Y.ResvSize+=k*Y.mode_gr;var j=0;l0.resvDrain_post=0,l0.resvDrain_pre=0,(g=Y.ResvSize%8)!=0&&(j+=g),g=Y.ResvSize-j-Y.ResvMax,g>0&&(me(g%8==0),me(g>=0),j+=g);{var $=Math.min(l0.main_data_begin*8,j)/8;l0.resvDrain_pre+=8*$,j-=8*$,Y.ResvSize-=8*$,l0.main_data_begin-=$}l0.resvDrain_post+=j,Y.ResvSize-=j}}var Wr=Qr;function jr(){var c="http://www.mp3dev.org/",Y=3,k=98,g=4,l0=0,j=93;this.getLameVersion=function(){return Y+"."+k+"."+g},this.getLameShortVersion=function(){return Y+"."+k+"."+g},this.getLameVeryShortVersion=function(){return"LAME"+Y+"."+k+"r"},this.getPsyVersion=function(){return l0+"."+j},this.getLameUrl=function(){return c},this.getLameOsBitness=function(){return"32bits"}}var zr=jr,E1=W0,Jr=E1.System,De=E1.VbrMode;E1.Float;var xa=E1.ShortBlock;E1.Util;var gr=E1.Arrays;E1.new_array_n;var be=E1.new_byte;E1.new_double;E1.new_float;E1.new_float_n;E1.new_int;E1.new_int_n;var e2=E1.assert;se.NUMTOCENTRIES=100;se.MAXFRAMESIZE=2880;function se(){var c,Y,k;this.setModules=function(m,r,d){c=m,Y=r,k=d};var g=1,l0=2,j=4,$=8,q=se.NUMTOCENTRIES,r0=se.MAXFRAMESIZE,f0=q+4+4+4+4+4,A=f0+9+1+1+8+1+1+3+1+1+2+4+2+2,f=128,C=64,i0=32,Q=null,a0="Xing",W="Info",R=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function h(m,r){if(m.nVbrNumFrames++,m.sum+=r,m.seen++,!(m.seen<m.want)&&(m.pos<m.size&&(m.bag[m.pos]=m.sum,m.pos++,m.seen=0),m.pos==m.size)){for(var d=1;d<m.size;d+=2)m.bag[d/2]=m.bag[d];m.want*=2,m.pos/=2}}function u(m,r){if(!(m.pos<=0))for(var d=1;d<q;++d){var I=d/q,p,L,K=0|Math.floor(I*m.pos);K>m.pos-1&&(K=m.pos-1),p=m.bag[K],L=m.sum;var B=0|256*p/L;B>255&&(B=255),r[d]=255&B}}this.addVbrFrame=function(m){var r=m.internal_flags,d=Tables.bitrate_table[m.version][r.bitrate_index];e2(r.VBR_seek_table.bag!=null),h(r.VBR_seek_table,d)};function M(m,r){var d=m[r+0]&255;return d<<=8,d|=m[r+1]&255,d<<=8,d|=m[r+2]&255,d<<=8,d|=m[r+3]&255,d}function e(m,r,d){m[r+0]=255&(d>>24&255),m[r+1]=255&(d>>16&255),m[r+2]=255&(d>>8&255),m[r+3]=255&(d&255)}function i(m,r,d){m[r+0]=255&(d>>8&255),m[r+1]=255&(d&255)}function S(m,r){return new String(m,r,a0.length(),Q).equals(a0)||new String(m,r,W.length(),Q).equals(W)}function V(m,r,d){return 255&(m<<r|d&~(-1<<r))}function N(m,r){var d=m.internal_flags;r[0]=V(r[0],8,255),r[1]=V(r[1],3,7),r[1]=V(r[1],1,m.out_samplerate<16e3?0:1),r[1]=V(r[1],1,m.version),r[1]=V(r[1],2,1),r[1]=V(r[1],1,m.error_protection?0:1),r[2]=V(r[2],4,d.bitrate_index),r[2]=V(r[2],2,d.samplerate_index),r[2]=V(r[2],1,0),r[2]=V(r[2],1,m.extension),r[3]=V(r[3],2,m.mode.ordinal()),r[3]=V(r[3],2,d.mode_ext),r[3]=V(r[3],1,m.copyright),r[3]=V(r[3],1,m.original),r[3]=V(r[3],2,m.emphasis),r[0]=255;var I=255&(r[1]&241),p;m.version==1?p=f:m.out_samplerate<16e3?p=i0:p=C,m.VBR==De.vbr_off&&(p=m.brate);var L;m.free_format?L=0:L=255&16*c.BitrateIndex(p,m.version,m.out_samplerate),m.version==1?(r[1]=255&(I|10),I=255&(r[2]&13),r[2]=255&(L|I)):(r[1]=255&(I|2),I=255&(r[2]&13),r[2]=255&(L|I))}this.getVbrTag=function(m){var r=new VBRTagData,d=0;r.flags=0;var I=m[d+1]>>3&1,p=m[d+2]>>2&3,L=m[d+3]>>6&3,K=m[d+2]>>4&15;if(K=Tables.bitrate_table[I][K],m[d+1]>>4==14?r.samprate=Tables.samplerate_table[2][p]:r.samprate=Tables.samplerate_table[I][p],I!=0?L!=3?d+=36:d+=21:L!=3?d+=21:d+=13,!S(m,d))return null;d+=4,r.hId=I;var B=r.flags=M(m,d);if(d+=4,B&g&&(r.frames=M(m,d),d+=4),B&l0&&(r.bytes=M(m,d),d+=4),B&j){if(r.toc!=null)for(var E=0;E<q;E++)r.toc[E]=m[d+E];d+=q}r.vbrScale=-1,B&$&&(r.vbrScale=M(m,d),d+=4),r.headersize=(I+1)*72e3*K/r.samprate,d+=21;var n=m[d+0]<<4;n+=m[d+1]>>4;var s=(m[d+1]&15)<<8;return s+=m[d+2]&255,(n<0||n>3e3)&&(n=-1),(s<0||s>3e3)&&(s=-1),r.encDelay=n,r.encPadding=s,r},this.InitVbrTag=function(m){var r=m.internal_flags,d;m.version==1?d=f:m.out_samplerate<16e3?d=i0:d=C,m.VBR==De.vbr_off&&(d=m.brate);var I=(m.version+1)*72e3*d/m.out_samplerate,p=r.sideinfo_len+A;if(r.VBR_seek_table.TotalFrameSize=I,I<p||I>r0){m.bWriteVbrTag=!1;return}r.VBR_seek_table.nVbrNumFrames=0,r.VBR_seek_table.nBytesWritten=0,r.VBR_seek_table.sum=0,r.VBR_seek_table.seen=0,r.VBR_seek_table.want=1,r.VBR_seek_table.pos=0,r.VBR_seek_table.bag==null&&(r.VBR_seek_table.bag=new int[400],r.VBR_seek_table.size=400);var L=be(r0);N(m,L);for(var K=r.VBR_seek_table.TotalFrameSize,B=0;B<K;++B)Y.add_dummy_byte(m,L[B]&255,1)};function w(m,r){var d=r^m;return r=r>>8^R[d&255],r}this.updateMusicCRC=function(m,r,d,I){for(var p=0;p<I;++p)m[0]=w(r[d+p],m[0])};function P(m,r,d,I,p){var L=m.internal_flags,K=0,B=m.encoder_delay,E=m.encoder_padding,n=100-10*m.VBR_q-m.quality,s=k.getLameVeryShortVersion(),a,o=0,O,J=[1,5,3,2,4,0,3],D=0|(m.lowpassfreq/100+.5>255?255:m.lowpassfreq/100+.5),y=0,z=0,_0=0,m0=m.internal_flags.noise_shaping,y0=0,A0=0,d0=0,I0=0,Y0=0,n1=(m.exp_nspsytune&1)!=0,t=(m.exp_nspsytune&2)!=0,_=!1,M0=!1,E0=m.internal_flags.nogap_total,O0=m.internal_flags.nogap_current,H0=m.ATHtype,w0=0,T0;switch(m.VBR){case vbr_abr:T0=m.VBR_mean_bitrate_kbps;break;case vbr_off:T0=m.brate;break;default:T0=m.VBR_min_bitrate_kbps}switch(m.VBR.ordinal()<J.length?a=J[m.VBR.ordinal()]:a=0,O=16*o+a,L.findReplayGain&&(L.RadioGain>510&&(L.RadioGain=510),L.RadioGain<-510&&(L.RadioGain=-510),z=8192,z|=3072,L.RadioGain>=0?z|=L.RadioGain:(z|=512,z|=-L.RadioGain)),L.findPeakSample&&(y=Math.abs(0|L.PeakSample/32767*Math.pow(2,23)+.5)),E0!=-1&&(O0>0&&(M0=!0),O0<E0-1&&(_=!0)),w0=H0+((n1?1:0)<<4)+((t?1:0)<<5)+((_?1:0)<<6)+((M0?1:0)<<7),n<0&&(n=0),m.mode){case MONO:y0=0;break;case STEREO:y0=1;break;case DUAL_CHANNEL:y0=2;break;case JOINT_STEREO:m.force_ms?y0=4:y0=3;break;case NOT_SET:default:y0=7;break}m.in_samplerate<=32e3?d0=0:m.in_samplerate==48e3?d0=2:m.in_samplerate>48e3?d0=3:d0=1,(m.short_blocks==xa.short_block_forced||m.short_blocks==xa.short_block_dispensed||m.lowpassfreq==-1&&m.highpassfreq==-1||m.scale_left<m.scale_right||m.scale_left>m.scale_right||m.disable_reservoir&&m.brate<320||m.noATH||m.ATHonly||H0==0||m.in_samplerate<=32e3)&&(A0=1),I0=m0+(y0<<2)+(A0<<5)+(d0<<6),Y0=L.nMusicCRC,e(d,I+K,n),K+=4;for(var F0=0;F0<9;F0++)d[I+K+F0]=255&s.charAt(F0);K+=9,d[I+K]=255&O,K++,d[I+K]=255&D,K++,e(d,I+K,y),K+=4,i(d,I+K,z),K+=2,i(d,I+K,_0),K+=2,d[I+K]=255&w0,K++,T0>=255?d[I+K]=255:d[I+K]=255&T0,K++,d[I+K]=255&B>>4,d[I+K+1]=255&(B<<4)+(E>>8),d[I+K+2]=255&E,K+=3,d[I+K]=255&I0,K++,d[I+K++]=0,i(d,I+K,m.preset),K+=2,e(d,I+K,r),K+=4,i(d,I+K,Y0),K+=2;for(var L0=0;L0<K;L0++)p=w(d[I+L0],p);return i(d,I+K,p),K+=2,K}function Z(m){m.seek(0);var r=be(10);m.readFully(r);var d;return new String(r,"ISO-8859-1").startsWith("ID3")?d=0:d=((r[6]&127)<<21|(r[7]&127)<<14|(r[8]&127)<<7|r[9]&127)+r.length,d}this.getLameTagFrame=function(m,r){var d=m.internal_flags;if(!m.bWriteVbrTag||d.Class_ID!=Lame.LAME_ID||d.VBR_seek_table.pos<=0)return 0;if(r.length<d.VBR_seek_table.TotalFrameSize)return d.VBR_seek_table.TotalFrameSize;gr.fill(r,0,d.VBR_seek_table.TotalFrameSize,0),N(m,r);var I=be(q);if(m.free_format)for(var p=1;p<q;++p)I[p]=255&255*p/100;else u(d.VBR_seek_table,I);var L=d.sideinfo_len;m.error_protection&&(L-=2),m.VBR==De.vbr_off?(r[L++]=255&W.charAt(0),r[L++]=255&W.charAt(1),r[L++]=255&W.charAt(2),r[L++]=255&W.charAt(3)):(r[L++]=255&a0.charAt(0),r[L++]=255&a0.charAt(1),r[L++]=255&a0.charAt(2),r[L++]=255&a0.charAt(3)),e(r,L,g+l0+j+$),L+=4,e(r,L,d.VBR_seek_table.nVbrNumFrames),L+=4;var K=d.VBR_seek_table.nBytesWritten+d.VBR_seek_table.TotalFrameSize;e(r,L,0|K),L+=4,Jr.arraycopy(I,0,r,L,I.length),L+=I.length,m.error_protection&&Y.CRC_writeheader(d,r);for(var B=0,p=0;p<L;p++)B=w(r[p],B);return L+=P(m,K,r,L,B),d.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(m,r){var d=m.internal_flags;if(d.VBR_seek_table.pos<=0||(r.seek(r.length()),r.length()==0))return-1;var I=Z(r);r.seek(I);var p=be(r0),L=getLameTagFrame(m,p);return L>p.length?-1:(L<1||r.write(p,0,L),0)}}var a2=se,B1=W0;B1.System;B1.VbrMode;B1.Float;B1.ShortBlock;B1.Util;B1.Arrays;B1.new_array_n;var Ea=B1.new_byte;B1.new_double;B1.new_float;B1.new_float_n;B1.new_int;B1.new_int_n;var Ba=B1.assert,r2=Ue(),t2=Cr,n2=ka,s2=Ya(),i2=Zr,_2=qa(),l2=Wr,o2=_e,v2=Pe();t1();var h2=zr,u2=a2;function f2(){this.setModules=function(c,Y){}}function m2(){this.setModules=function(c,Y,k){}}function b2(){}function c2(){this.setModules=function(c,Y){}}function S2(c,Y,k){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),c=1,Y=44100,k=128);var g=new r2,l0=new f2,j=new n2,$=new v2,q=new t2,r0=new s2,f0=new i2,A=new u2,f=new h2,C=new c2,i0=new l2,Q=new _2,a0=new m2,W=new b2;g.setModules(j,$,q,r0,f0,A,f,C,W),$.setModules(j,W,f,A),C.setModules($,f),q.setModules(g),f0.setModules($,i0,r0,Q),r0.setModules(Q,i0,g.enc.psy),i0.setModules($),Q.setModules(r0),A.setModules(g,$,f),l0.setModules(a0,W),a0.setModules(f,C,q);var R=g.lame_init();R.num_channels=c,R.in_samplerate=Y,R.brate=k,R.mode=o2.STEREO,R.quality=3,R.bWriteVbrTag=!1,R.disable_reservoir=!0,R.write_id3tag_automatic=!1;var h=g.lame_init_params(R);Ba(h==0);var u=1152,M=0|1.25*u+7200,e=Ea(M);this.encodeBuffer=function(i,S){c==1&&(S=i),Ba(i.length==S.length),i.length>u&&(u=i.length,M=0|1.25*u+7200,e=Ea(M));var V=g.lame_encode_buffer(R,i,S,i.length,e,0,M);return new Int8Array(e.subarray(0,V))},this.flush=function(){var i=g.lame_encode_flush(R,e,0,M);return new Int8Array(e.subarray(0,i))}}function C1(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function Me(c){return c.charCodeAt(0)<<24|c.charCodeAt(1)<<16|c.charCodeAt(2)<<8|c.charCodeAt(3)}C1.RIFF=Me("RIFF");C1.WAVE=Me("WAVE");C1.fmt_=Me("fmt ");C1.data=Me("data");C1.readHeader=function(c){var Y=new C1,k=c.getUint32(0,!1);if(C1.RIFF==k&&(c.getUint32(4,!0),C1.WAVE==c.getUint32(8,!1)&&C1.fmt_==c.getUint32(12,!1))){var g=c.getUint32(16,!0),l0=20;switch(g){case 16:case 18:Y.channels=c.getUint16(l0+2,!0),Y.sampleRate=c.getUint32(l0+4,!0);break;default:throw"extended fmt chunk not implemented"}l0+=g;for(var j=C1.data,$=0;j!=k&&(k=c.getUint32(l0,!1),$=c.getUint32(l0+4,!0),j!=k);)l0+=$+8;return Y.dataLen=$,Y.dataOffset=l0+8,Y}};var d2=ce.Mp3Encoder=S2,A2=ce.WavHeader=C1;const M2=Ga({__proto__:null,Mp3Encoder:d2,WavHeader:A2,default:ce},[ce]);export{M2 as i};
